!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){!function(){var t=[r(1),r(2),r(3),r(23),r(24),r(25),r(27),r(26)];(function(t,e,r,n,i,o,a,c){"use strict";function u(){s();var t=document.getElementsByClassName("mscgen_js");l(t,0),l(document.getElementsByTagName("mscgen"),t.length)}function s(){for(var t=document.scripts,e=0;e<t.length;e++)E[t[e].type]&&!t[e].hasAttribute("data-renderedby")&&(t[e].insertAdjacentHTML("afterend",c.applyTemplate(C,{src:t[e].src?c.applyTemplate(k,{src:t[e].src}):"",lang:E[t[e].type]||i.getConfig().defaultLanguage,msc:t[e].textContent.replace(/</g,"&lt;"),mirrorEntities:v(t[e])?"data-mirror-entities='true'":"",namedStyle:m(t[e])})),t[e].setAttribute("data-renderedby","mscgen_js"))}function l(t,e){for(var r=0;r<t.length;r++)d(t[r],e+r)}function d(t,e){t.hasAttribute("data-renderedby")||f(t,e)}function p(t,e){t.innerHTML=c.applyTemplate("<div style='color: #d00'>{string}</div>",{string:e})}function f(t,e){y(t,e),t.setAttribute("data-renderedby","mscgen_js"),i.getConfig().loadFromSrcAttribute&&t.getAttribute("data-src")?a.ajax(t.getAttribute("data-src"),function(e){h(t,e.target.response)},function(){p(t,c.applyTemplate(_,{url:t.getAttribute("data-src")}))}):!i.getConfig().loadFromSrcAttribute&&t.getAttribute("data-src")?p(t,c.applyTemplate(A,{url:t.getAttribute("data-src")})):h(t,t.textContent)}function h(t,e){var r=b(t),n=x(e,r);n.entities?w(n,t.id,e,r,v(t),m(t)):t.innerHTML=o.renderError(e,n.location,n.message)}function g(t,e,r){var o={pathname:"index.html"},a=document.createElement("a");return a.setAttribute("href",i.getConfig().clickURL+n.toLocationString(o,t,e)),a.setAttribute("id",r+"link"),a.setAttribute("style","text-decoration: none;"),a.setAttribute("title","click to edit in the mscgen_js interpreter"),a}function y(t,e){t.id||(t.id=i.getConfig().parentElementPrefix+e.toString())}function b(t){var e=t.getAttribute("data-language");return e||(e=i.getConfig().defaultLanguage),e}function v(t){var e=t.getAttribute("data-mirror-entities");return!(!e||"true"!==e)}function m(t){return t.getAttribute("data-named-style")}function x(r,n){var i={};try{i="msgenny"===n?e.parse(r):"json"===n?JSON.parse(r):t.parse(r)}catch(o){return o}return i}function w(t,e,n,o,a,c){var u=document.getElementById(e);u.innerHTML="",!0===i.getConfig().clickable&&(u.appendChild(g(n,o,e)),e+="link"),r.clean(e,window),r.renderASTNew(t,window,e,{source:n,additionalTemplate:c,mirrorEntitiesOnBottom:a})}var C="<span class='mscgen_js' {src} data-language='{lang}' data-named-style='{namedStyle}' {mirrorEntities}>{msc}<span>",k="data-src='{src}' ",_="ERROR: Could not find or open the URL '{url}' specified in the <code>data-src</code> attribute.",A="ERROR: Won't load the chart specified in <code>data-src='{url}'</code>, because loading from separate files is switched off in the mscgen_js configuration. <br><br>See <a href='https://sverweij.github.io/mscgen_js/embed.html#loading-from-separate-files'>Loading charts from separate files</a> in the mscgen_js embedding guide how to enable it.",E={"text/x-mscgen":"mscgen","text/x-msgenny":"msgenny","text/x-xu":"xu"};u()}).apply(null,t)}()},function(t,e,r){var n,i;n=[],i=function(){"use strict";function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t){function r(){return o(no,ro)}function n(e){throw c(e,null,t.substring(no,ro),o(no,ro))}function i(e){var r,n,i=io[e];if(i)return i;for(r=e-1;!io[r];)r--;for(i=io[r],i={line:i.line,column:i.column,seenCR:i.seenCR};r<e;)n=t.charAt(r),"\n"===n?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),r++;return io[e]=i,i}function o(t,e){var r=i(t),n=i(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function a(t){ro<oo||(ro>oo&&(oo=ro,ao=[]),ao.push(t))}function c(t,r,n,i){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function a(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,i,o,a=new Array(t.length);for(o=0;o<t.length;o++)a[o]=t[o].description;return n=t.length>1?a.slice(0,-1).join(", ")+" or "+a[t.length-1]:a[0],i=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+i+" found."}return null!==r&&o(r),new e(null!==t?t:a(r,n),r,n,i)}function u(){var e,r,n,i,o,c,u,d,p,f;return e=ro,r=K(),r!==xt?(n=s(),n!==xt?(i=K(),i!==xt?(123===t.charCodeAt(ro)?(o=kt,ro++):(o=xt,0===co&&a(_t)),o!==xt?(c=K(),c!==xt?(u=l(),u!==xt?(d=K(),d!==xt?(125===t.charCodeAt(ro)?(p=At,ro++):(p=xt,0===co&&a(Et)),p!==xt?(f=K(),f!==xt?(no=e,r=Lt(r,u),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e}function s(){var e;return t.substr(ro,3).toLowerCase()===Tt?(e=t.substr(ro,3),ro+=3):(e=xt,0===co&&a(It)),e===xt&&(t.substr(ro,2).toLowerCase()===St?(e=t.substr(ro,2),ro+=2):(e=xt,0===co&&a(Dt))),e}function l(){var t,e,r,n,i;return t=ro,e=ro,r=d(),r!==xt&&(no=e,r=Nt(r)),e=r,e===xt&&(e=null),e!==xt?(r=ro,n=f(),n!==xt&&(no=r,n=jt(n)),r=n,r===xt&&(r=null),r!==xt?(n=ro,i=g(),i!==xt&&(no=n,i=Bt(i)),n=i,n===xt&&(n=null),n!==xt?(e=[e,r,n],t=e):(ro=t,t=xt)):(ro=t,t=xt)):(ro=t,t=xt),t}function d(){var e,r,n,i,o,c;for(e=ro,r=ro,n=[],i=ro,o=p(),o!==xt?(44===t.charCodeAt(ro)?(c=Ft,ro++):(c=xt,0===co&&a(Ht)),c!==xt?(no=i,o=Ot(o),i=o):(ro=i,i=xt)):(ro=i,i=xt);i!==xt;)n.push(i),i=ro,o=p(),o!==xt?(44===t.charCodeAt(ro)?(c=Ft,ro++):(c=xt,0===co&&a(Ht)),c!==xt?(no=i,o=Ot(o),i=o):(ro=i,i=xt)):(ro=i,i=xt);return n!==xt?(i=ro,o=p(),o!==xt?(59===t.charCodeAt(ro)?(c=Rt,ro++):(c=xt,0===co&&a(Wt)),c!==xt?(no=i,o=Ot(o),i=o):(ro=i,i=xt)):(ro=i,i=xt),i!==xt?(n=[n,i],r=n):(ro=r,r=xt)):(ro=r,r=xt),r!==xt&&(no=e,r=Mt(r)),e=r}function p(){var e,r,n,i,o,c,u,s;return co++,e=ro,r=K(),r!==xt?(t.substr(ro,6).toLowerCase()===Xt?(n=t.substr(ro,6),ro+=6):(n=xt,0===co&&a(qt)),n===xt&&(t.substr(ro,11).toLowerCase()===zt?(n=t.substr(ro,11),ro+=11):(n=xt,0===co&&a(Ut))),n!==xt?(i=K(),i!==xt?(61===t.charCodeAt(ro)?(o=Pt,ro++):(o=xt,0===co&&a(Vt)),o!==xt?(c=K(),c!==xt?(u=$(),u!==xt?(s=K(),s!==xt?(no=e,r=Kt(n,u),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=K(),r!==xt?(t.substr(ro,5).toLowerCase()===$t?(n=t.substr(ro,5),ro+=5):(n=xt,0===co&&a(Zt)),n!==xt?(i=K(),i!==xt?(61===t.charCodeAt(ro)?(o=Pt,ro++):(o=xt,0===co&&a(Vt)),o!==xt?(c=K(),c!==xt?(u=nt(),u!==xt?(s=K(),s!==xt?(no=e,r=Kt(n,u),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=K(),r!==xt?(t.substr(ro,12).toLowerCase()===Yt?(n=t.substr(ro,12),ro+=12):(n=xt,0===co&&a(Jt)),n!==xt?(i=K(),i!==xt?(61===t.charCodeAt(ro)?(o=Pt,ro++):(o=xt,0===co&&a(Vt)),o!==xt?(c=K(),c!==xt?(u=tt(),u!==xt?(s=K(),s!==xt?(no=e,r=Qt(n,u),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=K(),r!==xt?(t.substr(ro,9).toLowerCase()===te?(n=t.substr(ro,9),ro+=9):(n=xt,0===co&&a(ee)),n!==xt?(i=K(),i!==xt?(61===t.charCodeAt(ro)?(o=Pt,ro++):(o=xt,0===co&&a(Vt)),o!==xt?(c=K(),c!==xt?(u=B(),u!==xt?(s=K(),s!==xt?(no=e,r=Kt(n,u),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)))),co--,e===xt&&(r=xt,0===co&&a(Gt)),e}function f(){var e,r,n,i,o,c;for(e=ro,r=ro,n=[],i=ro,o=h(),o!==xt?(44===t.charCodeAt(ro)?(c=Ft,ro++):(c=xt,0===co&&a(Ht)),c!==xt?(no=i,o=re(o),i=o):(ro=i,i=xt)):(ro=i,i=xt);i!==xt;)n.push(i),i=ro,o=h(),o!==xt?(44===t.charCodeAt(ro)?(c=Ft,ro++):(c=xt,0===co&&a(Ht)),c!==xt?(no=i,o=re(o),i=o):(ro=i,i=xt)):(ro=i,i=xt);return n!==xt?(i=ro,o=h(),o!==xt?(59===t.charCodeAt(ro)?(c=Rt,ro++):(c=xt,0===co&&a(Wt)),c!==xt?(no=i,o=re(o),i=o):(ro=i,i=xt)):(ro=i,i=xt),i!==xt?(n=[n,i],r=n):(ro=r,r=xt)):(ro=r,r=xt),r!==xt&&(no=e,r=ne(r)),e=r}function h(){var e,r,n,i,o,c,u,s;return co++,e=ro,r=K(),r!==xt?(n=B(),n!==xt?(i=K(),i!==xt?(o=ro,91===t.charCodeAt(ro)?(c=oe,ro++):(c=xt,0===co&&a(ae)),c!==xt?(u=D(),u!==xt?(93===t.charCodeAt(ro)?(s=ce,ro++):(s=xt,0===co&&a(ue)),s!==xt?(no=o,c=se(n,u),o=c):(ro=o,o=xt)):(ro=o,o=xt)):(ro=o,o=xt),o===xt&&(o=null),o!==xt?(c=K(),c!==xt?(no=e,r=le(n,o),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=K(),r!==xt?(n=O(),n!==xt?(i=K(),i!==xt?(o=ro,91===t.charCodeAt(ro)?(c=oe,ro++):(c=xt,0===co&&a(ae)),c!==xt?(u=D(),u!==xt?(93===t.charCodeAt(ro)?(s=ce,ro++):(s=xt,0===co&&a(ue)),s!==xt?(no=o,c=se(n,u),o=c):(ro=o,o=xt)):(ro=o,o=xt)):(ro=o,o=xt),o===xt&&(o=null),o!==xt?(c=K(),c!==xt?(no=e,r=de(n,o),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)),co--,e===xt&&(r=xt,0===co&&a(ie)),e}function g(){var e,r,n,i,o;if(e=[],r=ro,n=y(),n!==xt?(i=K(),i!==xt?(59===t.charCodeAt(ro)?(o=Rt,ro++):(o=xt,0===co&&a(Wt)),o!==xt?(no=r,n=pe(n),r=n):(ro=r,r=xt)):(ro=r,r=xt)):(ro=r,r=xt),r!==xt)for(;r!==xt;)e.push(r),r=ro,n=y(),n!==xt?(i=K(),i!==xt?(59===t.charCodeAt(ro)?(o=Rt,ro++):(o=xt,0===co&&a(Wt)),o!==xt?(no=r,n=pe(n),r=n):(ro=r,r=xt)):(ro=r,r=xt)):(ro=r,r=xt);else e=xt;return e}function y(){var e,r,n,i,o,c,u;for(e=ro,r=ro,n=[],i=ro,o=b(),o!==xt?(c=K(),c!==xt?(44===t.charCodeAt(ro)?(u=Ft,ro++):(u=xt,0===co&&a(Ht)),u!==xt?(no=i,o=pe(o),i=o):(ro=i,i=xt)):(ro=i,i=xt)):(ro=i,i=xt);i!==xt;)n.push(i),i=ro,o=b(),o!==xt?(c=K(),c!==xt?(44===t.charCodeAt(ro)?(u=Ft,ro++):(u=xt,0===co&&a(Ht)),u!==xt?(no=i,o=pe(o),i=o):(ro=i,i=xt)):(ro=i,i=xt)):(ro=i,i=xt);return n!==xt?(i=ro,o=b(),o!==xt&&(no=i,o=fe(o)),i=o,i!==xt?(n=[n,i],r=n):(ro=r,r=xt)):(ro=r,r=xt),r!==xt&&(no=e,r=he(r)),e=r}function b(){var t;return t=v(),t===xt&&(t=C()),t}function v(){var e,r,n,i,o,c;return e=ro,r=ro,n=m(),n!==xt&&(no=r,n=pe(n)),r=n,r===xt&&(r=ro,n=w(),n!==xt&&(no=r,n=pe(n)),r=n,r===xt&&(r=ro,n=x(),n!==xt&&(no=r,n=pe(n)),r=n)),r!==xt?(n=ro,91===t.charCodeAt(ro)?(i=oe,ro++):(i=xt,0===co&&a(ae)),i!==xt?(o=D(),o!==xt?(93===t.charCodeAt(ro)?(c=ce,ro++):(c=xt,0===co&&a(ue)),c!==xt?(no=n,i=ge(r,o),n=i):(ro=n,n=xt)):(ro=n,n=xt)):(ro=n,n=xt),n===xt&&(n=null),n!==xt?(no=e,r=ye(r,n),e=r):(ro=e,e=xt)):(ro=e,e=xt),e}function m(){var t,e,r,n;return t=ro,e=K(),e!==xt?(r=k(),r!==xt?(n=K(),n!==xt?(no=t,e=be(r),t=e):(ro=t,t=xt)):(ro=t,t=xt)):(ro=t,t=xt),t}function x(){var t,e,r,n;return t=ro,e=K(),e!==xt?(r=_(),r!==xt?(n=K(),n!==xt?(no=t,e=be(r),t=e):(ro=t,t=xt)):(ro=t,t=xt)):(ro=t,t=xt),t}function w(){var e,r,n,i,o,c,u,s;return e=ro,r=K(),r!==xt?(n=H(),n!==xt?(i=K(),i!==xt?(o=A(),o!==xt?(c=K(),c!==xt?(u=H(),u!==xt?(s=K(),s!==xt?(no=e,r=ve(n,o,u),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=K(),r!==xt?(42===t.charCodeAt(ro)?(n=me,ro++):(n=xt,0===co&&a(xe)),n!==xt?(i=K(),i!==xt?(o=T(),o!==xt?(c=K(),c!==xt?(u=H(),u!==xt?(s=K(),s!==xt?(no=e,r=we(o,u),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=K(),r!==xt?(n=H(),n!==xt?(i=K(),i!==xt?(o=L(),o!==xt?(c=K(),c!==xt?(42===t.charCodeAt(ro)?(u=me,ro++):(u=xt,0===co&&a(xe)),u!==xt?(s=K(),s!==xt?(no=e,r=Ce(n,o),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e===xt&&(e=ro,r=K(),r!==xt?(n=H(),n!==xt?(i=K(),i!==xt?(o=E(),o!==xt?(c=K(),c!==xt?(42===t.charCodeAt(ro)?(u=me,ro++):(u=xt,0===co&&a(xe)),u!==xt?(s=K(),s!==xt?(no=e,r=Ce(n,o),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)))),e}function C(){var e,r,n,i,o,c,u,s,l,d,p,f,h,y,b,v;return e=ro,r=K(),r!==xt?(n=H(),n!==xt?(i=K(),i!==xt?(o=S(),o!==xt?(c=K(),c!==xt?(u=H(),u!==xt?(s=K(),s!==xt?(l=ro,91===t.charCodeAt(ro)?(d=oe,ro++):(d=xt,0===co&&a(ae)),d!==xt?(p=D(),p!==xt?(93===t.charCodeAt(ro)?(f=ce,ro++):(f=xt,0===co&&a(ue)),f!==xt?(no=l,d=ke(n,o,u,p),l=d):(ro=l,l=xt)):(ro=l,l=xt)):(ro=l,l=xt),l===xt&&(l=null),l!==xt?(d=K(),d!==xt?(123===t.charCodeAt(ro)?(p=kt,ro++):(p=xt,0===co&&a(_t)),p!==xt?(f=K(),f!==xt?(h=g(),h===xt&&(h=null),h!==xt?(y=K(),y!==xt?(125===t.charCodeAt(ro)?(b=At,ro++):(b=xt,0===co&&a(Et)),b!==xt?(v=K(),v!==xt?(no=e,r=_e(n,o,u,l,h),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e}function k(){var e,r;return co++,t.substr(ro,3)===Ee?(e=Ee,ro+=3):(e=xt,0===co&&a(Le)),e===xt&&(t.substr(ro,3)===Te?(e=Te,ro+=3):(e=xt,0===co&&a(Ie))),co--,e===xt&&(r=xt,0===co&&a(Ae)),e}function _(){var e,r;return co++,t.substr(ro,3)===De?(e=De,ro+=3):(e=xt,0===co&&a(Ne)),co--,e===xt&&(r=xt,0===co&&a(Se)),e}function A(){var t,e;return t=ro,e=E(),e===xt&&(e=L(),e===xt&&(e=T(),e===xt&&(e=I()))),e!==xt&&(no=t,e=je(e)),t=e}function E(){var e,r;return co++,t.substr(ro,2)===Fe?(e=Fe,ro+=2):(e=xt,0===co&&a(He)),e===xt&&(t.substr(ro,3)===Oe?(e=Oe,ro+=3):(e=xt,0===co&&a(Re)),e===xt&&(t.substr(ro,2)===We?(e=We,ro+=2):(e=xt,0===co&&a(Me)),e===xt&&(t.substr(ro,5)===Ge?(e=Ge,ro+=5):(e=xt,0===co&&a(Xe)),e===xt&&(t.substr(ro,3)===qe?(e=qe,ro+=3):(e=xt,0===co&&a(ze)),e===xt&&(t.substr(ro,2)===Ue?(e=Ue,ro+=2):(e=xt,0===co&&a(Pe)),e===xt&&(t.substr(ro,4)===Ve?(e=Ve,ro+=4):(e=xt,0===co&&a(Ke)),e===xt&&(t.substr(ro,2)===$e?(e=$e,ro+=2):(e=xt,0===co&&a(Ze)),e===xt&&(t.substr(ro,3)===Ye?(e=Ye,ro+=3):(e=xt,0===co&&a(Je)))))))))),co--,e===xt&&(r=xt,0===co&&a(Be)),e}function L(){var e,r;return co++,t.substr(ro,2)===tr?(e=tr,ro+=2):(e=xt,0===co&&a(er)),e===xt&&(t.substr(ro,3)===rr?(e=rr,ro+=3):(e=xt,0===co&&a(nr)),e===xt&&(t.substr(ro,2)===ir?(e=ir,ro+=2):(e=xt,0===co&&a(or)),e===xt&&(t.substr(ro,2)===ar?(e=ar,ro+=2):(e=xt,0===co&&a(cr)),e===xt&&(t.substr(ro,2)===ur?(e=ur,ro+=2):(e=xt,0===co&&a(sr)),e===xt&&(t.substr(ro,2).toLowerCase()===lr?(e=t.substr(ro,2),ro+=2):(e=xt,0===co&&a(dr))))))),co--,e===xt&&(r=xt,0===co&&a(Qe)),e}function T(){var e,r;return co++,t.substr(ro,2)===fr?(e=fr,ro+=2):(e=xt,0===co&&a(hr)),e===xt&&(t.substr(ro,3)===gr?(e=gr,ro+=3):(e=xt,0===co&&a(yr)),e===xt&&(t.substr(ro,2)===br?(e=br,ro+=2):(e=xt,0===co&&a(vr)),e===xt&&(t.substr(ro,2)===mr?(e=mr,ro+=2):(e=xt,0===co&&a(xr)),e===xt&&(t.substr(ro,2)===wr?(e=wr,ro+=2):(e=xt,0===co&&a(Cr)),e===xt&&(t.substr(ro,2).toLowerCase()===kr?(e=t.substr(ro,2),ro+=2):(e=xt,0===co&&a(_r))))))),co--,e===xt&&(r=xt,0===co&&a(pr)),e}function I(){var e,r;return co++,t.substr(ro,4).toLowerCase()===Er?(e=t.substr(ro,4),ro+=4):(e=xt,0===co&&a(Lr)),e===xt&&(t.substr(ro,4).toLowerCase()===Tr?(e=t.substr(ro,4),ro+=4):(e=xt,0===co&&a(Ir)),e===xt&&(t.substr(ro,4).toLowerCase()===Sr?(e=t.substr(ro,4),ro+=4):(e=xt,0===co&&a(Dr)),e===xt&&(t.substr(ro,3).toLowerCase()===Nr?(e=t.substr(ro,3),ro+=3):(e=xt,0===co&&a(jr))))),co--,e===xt&&(r=xt,0===co&&a(Ar)),e}function S(){var e,r;return co++,e=ro,t.substr(ro,3).toLowerCase()===Fr?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(Hr)),r===xt&&(t.substr(ro,4).toLowerCase()===Or?(r=t.substr(ro,4),ro+=4):(r=xt,0===co&&a(Rr)),r===xt&&(t.substr(ro,3).toLowerCase()===Wr?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(Mr)),r===xt&&(t.substr(ro,5).toLowerCase()===Gr?(r=t.substr(ro,5),ro+=5):(r=xt,0===co&&a(Xr)),r===xt&&(t.substr(ro,3).toLowerCase()===qr?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(zr)),r===xt&&(t.substr(ro,3).toLowerCase()===Ur?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(Pr)),r===xt&&(t.substr(ro,6).toLowerCase()===Vr?(r=t.substr(ro,6),ro+=6):(r=xt,0===co&&a(Kr)),r===xt&&(t.substr(ro,3).toLowerCase()===$r?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(Zr)),r===xt&&(t.substr(ro,8).toLowerCase()===Yr?(r=t.substr(ro,8),ro+=8):(r=xt,0===co&&a(Jr)),r===xt&&(t.substr(ro,6).toLowerCase()===Qr?(r=t.substr(ro,6),ro+=6):(r=xt,0===co&&a(tn)),r===xt&&(t.substr(ro,8).toLowerCase()===en?(r=t.substr(ro,8),ro+=8):(r=xt,0===co&&a(rn)),r===xt&&(t.substr(ro,6).toLowerCase()===nn?(r=t.substr(ro,6),ro+=6):(r=xt,0===co&&a(on)),r===xt&&(t.substr(ro,4).toLowerCase()===an?(r=t.substr(ro,4),ro+=4):(r=xt,0===co&&a(cn)),r===xt&&(t.substr(ro,3).toLowerCase()===un?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(sn)),r===xt&&(t.substr(ro,3).toLowerCase()===ln?(r=t.substr(ro,3),ro+=3):(r=xt,0===co&&a(dn)))))))))))))))),r!==xt&&(no=e,r=pn(r)),e=r,co--,e===xt&&(r=xt,0===co&&a(Br)),e}function D(){var e,r,n,i,o,c;for(e=ro,r=ro,n=[],i=ro,o=N(),o!==xt?(44===t.charCodeAt(ro)?(c=Ft,ro++):(c=xt,0===co&&a(Ht)),c!==xt?(no=i,o=pe(o),i=o):(ro=i,i=xt)):(ro=i,i=xt);i!==xt;)n.push(i),i=ro,o=N(),o!==xt?(44===t.charCodeAt(ro)?(c=Ft,ro++):(c=xt,0===co&&a(Ht)),c!==xt?(no=i,o=pe(o),i=o):(ro=i,i=xt)):(ro=i,i=xt);return n!==xt?(i=ro,o=N(),o!==xt&&(no=i,o=pe(o)),i=o,i!==xt?(n=[n,i],r=n):(ro=r,r=xt)):(ro=r,r=xt),r!==xt&&(no=e,r=Mt(r)),e=r}function N(){var e,r,n,i,o,c,u,s;return e=ro,r=K(),r!==xt?(n=j(),n!==xt?(i=K(),i!==xt?(61===t.charCodeAt(ro)?(o=Pt,ro++):(o=xt,0===co&&a(Vt)),o!==xt?(c=K(),c!==xt?(u=H(),u!==xt?(s=K(),s!==xt?(no=e,r=fn(n,u),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e}function j(){var e,r;return co++,t.substr(ro,5).toLowerCase()===gn?(e=t.substr(ro,5),ro+=5):(e=xt,0===co&&a(yn)),e===xt&&(t.substr(ro,5).toLowerCase()===bn?(e=t.substr(ro,5),ro+=5):(e=xt,0===co&&a(vn)),e===xt&&(t.substr(ro,2).toLowerCase()===mn?(e=t.substr(ro,2),ro+=2):(e=xt,0===co&&a(xn)),e===xt&&(t.substr(ro,3).toLowerCase()===wn?(e=t.substr(ro,3),ro+=3):(e=xt,0===co&&a(Cn)),e===xt&&(t.substr(ro,9).toLowerCase()===kn?(e=t.substr(ro,9),ro+=9):(e=xt,0===co&&a(_n)),e===xt&&(t.substr(ro,10).toLowerCase()===An?(e=t.substr(ro,10),ro+=10):(e=xt,0===co&&a(En)),e===xt&&(t.substr(ro,9).toLowerCase()===Ln?(e=t.substr(ro,9),ro+=9):(e=xt,0===co&&a(Tn)),e===xt&&(t.substr(ro,10).toLowerCase()===In?(e=t.substr(ro,10),ro+=10):(e=xt,0===co&&a(Sn)),e===xt&&(t.substr(ro,11).toLowerCase()===Dn?(e=t.substr(ro,11),ro+=11):(e=xt,0===co&&a(Nn)),e===xt&&(t.substr(ro,12).toLowerCase()===jn?(e=t.substr(ro,12),ro+=12):(e=xt,0===co&&a(Bn)),e===xt&&(t.substr(ro,12).toLowerCase()===Fn?(e=t.substr(ro,12),ro+=12):(e=xt,0===co&&a(Hn)),e===xt&&(t.substr(ro,13).toLowerCase()===On?(e=t.substr(ro,13),ro+=13):(e=xt,0===co&&a(Rn)),e===xt&&(t.substr(ro,12).toLowerCase()===Wn?(e=t.substr(ro,12),ro+=12):(e=xt,0===co&&a(Mn)),e===xt&&(t.substr(ro,13).toLowerCase()===Gn?(e=t.substr(ro,13),ro+=13):(e=xt,0===co&&a(Xn)),e===xt&&(t.substr(ro,14).toLowerCase()===qn?(e=t.substr(ro,14),ro+=14):(e=xt,0===co&&a(zn)),e===xt&&(t.substr(ro,15).toLowerCase()===Un?(e=t.substr(ro,15),ro+=15):(e=xt,0===co&&a(Pn)),e===xt&&(t.substr(ro,7).toLowerCase()===Vn?(e=t.substr(ro,7),ro+=7):(e=xt,0===co&&a(Kn)))))))))))))))))),co--,e===xt&&(r=xt,0===co&&a(hn)),e}function B(){var e,r,n,i;return co++,e=ro,34===t.charCodeAt(ro)?(r=Zn,ro++):(r=xt,0===co&&a(Yn)),r!==xt?(n=F(),n!==xt?(34===t.charCodeAt(ro)?(i=Zn,ro++):(i=xt,0===co&&a(Yn)),i!==xt?(no=e,r=Jn(n),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),co--,e===xt&&(r=xt,0===co&&a($n)),e}function F(){var e,r,n,i;for(e=[],r=ro,n=ro,co++,34===t.charCodeAt(ro)?(i=Zn,ro++):(i=xt,0===co&&a(Yn)),co--,i===xt?n=void 0:(ro=n,n=xt),n!==xt?(t.substr(ro,2)===Qn?(i=Qn,ro+=2):(i=xt,0===co&&a(ti)),i===xt&&(t.length>ro?(i=t.charAt(ro),ro++):(i=xt,0===co&&a(ei))),i!==xt?(no=r,n=ri(i),r=n):(ro=r,r=xt)):(ro=r,r=xt);r!==xt;)e.push(r),r=ro,n=ro,co++,34===t.charCodeAt(ro)?(i=Zn,ro++):(i=xt,0===co&&a(Yn)),co--,i===xt?n=void 0:(ro=n,n=xt),n!==xt?(t.substr(ro,2)===Qn?(i=Qn,ro+=2):(i=xt,0===co&&a(ti)),i===xt&&(t.length>ro?(i=t.charAt(ro),ro++):(i=xt,0===co&&a(ei))),i!==xt?(no=r,n=ri(i),r=n):(ro=r,r=xt)):(ro=r,r=xt);return e}function H(){var t,e;return co++,t=O(),t===xt&&(t=B()),co--,t===xt&&(e=xt,0===co&&a(ni)),t}function O(){var e,r,n;if(e=ro,r=[],ii.test(t.charAt(ro))?(n=t.charAt(ro),ro++):(n=xt,0===co&&a(oi)),n!==xt)for(;n!==xt;)r.push(n),ii.test(t.charAt(ro))?(n=t.charAt(ro),ro++):(n=xt,0===co&&a(oi));else r=xt;return r!==xt&&(no=e,r=ai(r)),e=r}function R(){var e,r;return co++,e=ro,ui.test(t.charAt(ro))?(r=t.charAt(ro),ro++):(r=xt,0===co&&a(si)),r!==xt&&(no=e,r=ri(r)),e=r,co--,e===xt&&(r=xt,0===co&&a(ci)),e}function W(){var e,r;return co++,e=ro,di.test(t.charAt(ro))?(r=t.charAt(ro),ro++):(r=xt,0===co&&a(pi)),r!==xt&&(no=e,r=ri(r)),e=r,co--,e===xt&&(r=xt,0===co&&a(li)),e}function M(){var e;return t.substr(ro,2)===fi?(e=fi,ro+=2):(e=xt,0===co&&a(hi)),e}function G(){var e;return t.substr(ro,2)===gi?(e=gi,ro+=2):(e=xt,0===co&&a(yi)),e}function X(){var e,r,n;return e=ro,r=ro,co++,t.substr(ro,2)===gi?(n=gi,ro+=2):(n=xt,0===co&&a(yi)),co--,n===xt?r=void 0:(ro=r,r=xt),r!==xt?(t.length>ro?(n=t.charAt(ro),ro++):(n=xt,0===co&&a(ei)),n!==xt?(no=e,r=ri(n),e=r):(ro=e,e=xt)):(ro=e,e=xt),e}function q(){var t,e,r,n;if(t=ro,e=M(),e!==xt){for(r=[],n=X();n!==xt;)r.push(n),n=X();r!==xt?(n=G(),n!==xt?(no=t,e=bi(e,r,n),t=e):(ro=t,t=xt)):(ro=t,t=xt)}else ro=t,t=xt;return t}function z(){var e;return t.substr(ro,2)===vi?(e=vi,ro+=2):(e=xt,0===co&&a(mi)),e===xt&&(35===t.charCodeAt(ro)?(e=xi,ro++):(e=xt,0===co&&a(wi))),e}function U(){var e;return Ci.test(t.charAt(ro))?(e=t.charAt(ro),ro++):(e=xt,0===co&&a(ki)),e}function P(){var t,e,r,n;if(t=ro,e=z(),e!==xt){for(r=[],n=U();n!==xt;)r.push(n),n=U();r!==xt?(no=t,e=_i(e,r),t=e):(ro=t,t=xt)}else ro=t,t=xt;return t}function V(){var t,e;return co++,t=P(),t===xt&&(t=q()),co--,t===xt&&(e=xt,0===co&&a(Ai)),t}function K(){var t,e;for(t=[],e=R(),e===xt&&(e=W(),e===xt&&(e=V()));e!==xt;)t.push(e),e=R(),e===xt&&(e=W(),e===xt&&(e=V()));return t}function $(){var t,e;return co++,t=ro,e=Z(),e!==xt&&(no=t,e=Li(e)),t=e,t===xt&&(t=ro,e=Y(),e!==xt&&(no=t,e=Ti(e)),t=e),co--,t===xt&&(e=xt,0===co&&a(Ei)),t}function Z(){var e,r,n,i;return e=ro,34===t.charCodeAt(ro)?(r=Zn,ro++):(r=xt,0===co&&a(Yn)),r!==xt?(n=Y(),n!==xt?(34===t.charCodeAt(ro)?(i=Zn,ro++):(i=xt,0===co&&a(Yn)),i!==xt?(no=e,r=Ii(n),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e}function Y(){var t;return t=Q(),t===xt&&(t=J()),t}function J(){var e,r,n;if(e=ro,r=[],Si.test(t.charAt(ro))?(n=t.charAt(ro),ro++):(n=xt,0===co&&a(Di)),n!==xt)for(;n!==xt;)r.push(n),Si.test(t.charAt(ro))?(n=t.charAt(ro),ro++):(n=xt,0===co&&a(Di));else r=xt;return r!==xt&&(no=e,r=Ni(r)),e=r}function Q(){var e,r,n,i,o;return e=ro,r=ro,n=J(),n!==xt?(46===t.charCodeAt(ro)?(i=ji,ro++):(i=xt,0===co&&a(Bi)),i!==xt?(o=J(),o!==xt?(n=[n,i,o],r=n):(ro=r,r=xt)):(ro=r,r=xt)):(ro=r,r=xt),r!==xt&&(no=e,r=Fi(r)),e=r}function tt(){var t,e;return co++,t=ro,e=et(),e!==xt&&(no=t,e=Oi(e)),t=e,t===xt&&(t=ro,e=rt(),e!==xt&&(no=t,e=Ri(e)),t=e),co--,t===xt&&(e=xt,0===co&&a(Hi)),t}function et(){var e,r,n,i;return e=ro,34===t.charCodeAt(ro)?(r=Zn,ro++):(r=xt,0===co&&a(Yn)),r!==xt?(n=rt(),n!==xt?(34===t.charCodeAt(ro)?(i=Zn,ro++):(i=xt,0===co&&a(Yn)),i!==xt?(no=e,r=Li(n),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e}function rt(){var e;return t.substr(ro,4).toLowerCase()===Wi?(e=t.substr(ro,4),ro+=4):(e=xt,0===co&&a(Mi)),e===xt&&(t.substr(ro,5).toLowerCase()===Gi?(e=t.substr(ro,5),ro+=5):(e=xt,0===co&&a(Xi)),e===xt&&(t.substr(ro,2).toLowerCase()===qi?(e=t.substr(ro,2),ro+=2):(e=xt,0===co&&a(zi)),e===xt&&(t.substr(ro,3).toLowerCase()===Ui?(e=t.substr(ro,3),ro+=3):(e=xt,0===co&&a(Pi)),e===xt&&(48===t.charCodeAt(ro)?(e=Vi,ro++):(e=xt,0===co&&a(Ki)),e===xt&&(49===t.charCodeAt(ro)?(e=$i,ro++):(e=xt,0===co&&a(Zi))))))),e}function nt(){var t,e;return co++,t=it(),t===xt&&(t=ot()),co--,t===xt&&(e=xt,0===co&&a(Yi)),t}function it(){var e,r,n,i;return e=ro,34===t.charCodeAt(ro)?(r=Zn,ro++):(r=xt,0===co&&a(Yn)),r!==xt?(n=ot(),n!==xt?(34===t.charCodeAt(ro)?(i=Zn,ro++):(i=xt,0===co&&a(Yn)),i!==xt?(no=e,r=Li(n),e=r):(ro=e,e=xt)):(ro=e,e=xt)):(ro=e,e=xt),e}function ot(){var e,r;return e=ro,r=Y(),r!==xt&&(no=e,r=Ji(r)),e=r,e===xt&&(e=ro,t.substr(ro,4).toLowerCase()===Qi?(r=t.substr(ro,4),ro+=4):(r=xt,0===co&&a(to)),r!==xt&&(no=e,r=eo(r)),e=r),e}function at(t,e){return t=t||{},e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]}),t}function ct(t){var e={};return t[0].forEach(function(t){e=at(e,t)}),at(e,t[1])}function ut(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function st(t,e){var r={};return r[t.toLowerCase()]=e,r}function lt(t,e){return void 0===e||"*"===e||t.entities.some(function(t){return t.name===e})}function dt(t){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"].indexOf(t)>-1}function pt(t,e){return"Entity '"+t+"' in arc '"+e.from+" "+e.kind+" "+e.to+"' is not defined."}function ft(t,e){this.name="EntityNotDefinedError",this.message=pt(t,e),e.location&&(this.location=e.location,this.location.start.line++,this.location.end.line++)}function ht(t,e){return t||(t={},t.entities=[]),e&&e.arcs&&e.arcs.forEach(function(e){e.forEach(function(e){if(e.from&&!lt(t,e.from))throw new ft(e.from,e);if(e.to&&!lt(t,e.to))throw new ft(e.to,e);e.location&&delete e.location,e.arcs&&ht(t,e)})}),t}function gt(t){return!(!t||!t.options)&&(!!t.options.watermark||!!t.options.width&&"auto"===t.options.width)}function yt(t){return!(!t||!t.arcs)&&t.arcs.some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})})}function bt(t,e){var r=gt(t),n=yt(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}var vt,mt=arguments.length>1?arguments[1]:{},xt={},wt={program:u},Ct=u,kt="{",_t={type:"literal",value:"{",description:'"{"'},At="}",Et={type:"literal",value:"}",description:'"}"'},Lt=function(t,e){e[1]=ht(e[1],e[2]);var r=at(e[0],at(e[1],e[2]));return r=at({meta:bt(e[0],e[2])},r),t.length>0&&(r=at({precomment:t},r)),r},Tt="msc",It={type:"literal",value:"msc",description:'"msc"'},St="xu",Dt={type:"literal",value:"xu",description:'"xu"'},Nt=function(t){return{options:t}},jt=function(t){return{entities:t}},Bt=function(t){return{arcs:t}},Ft=",",Ht={type:"literal",value:",",description:'","'},Ot=function(t){return t},Rt=";",Wt={type:"literal",value:";",description:'";"'},Mt=function(t){return ct(t)},Gt={type:"other",description:"option"},Xt="hscale",qt={type:"literal",value:"hscale",description:'"hscale"'},zt="arcgradient",Ut={type:"literal",value:"arcgradient",description:'"arcgradient"'},Pt="=",Vt={type:"literal",value:"=",description:'"="'},Kt=function(t,e){return st(t,e)},$t="width",Zt={type:"literal",value:"width",description:'"width"'},Yt="wordwraparcs",Jt={type:"literal",value:"wordwraparcs",description:'"wordwraparcs"'},Qt=function(t,e){var r={};return r[t.toLowerCase()]=ut(e),r},te="watermark",ee={type:"literal",value:"watermark",description:'"watermark"'},re=function(t){return t},ne=function(t){return t[0].push(t[1]),t[0]},ie={type:"other",description:"entity"},oe="[",ae={type:"literal",value:"[",description:'"["'},ce="]",ue={type:"literal",value:"]",description:'"]"'},se=function(t,e){return e},le=function(t,e){return at({name:t},e)},de=function(t,e){return dt(t)&&n("MscGen keywords aren't allowed as entity names (embed them in quotes if you need them)"),at({name:t},e)},pe=function(t){return t},fe=function(t){return[t]},he=function(t){return t[0].push(t[1][0]),t[0]},ge=function(t,e){return e},ye=function(t,e){return at(t,e)},be=function(t){return{kind:t}},ve=function(t,e,n){return{kind:e,from:t,to:n,location:r()}},me="*",xe={type:"literal",value:"*",description:'"*"'},we=function(t,e){return{kind:t,from:"*",to:e,location:r()}},Ce=function(t,e){return{kind:e,from:t,to:"*",location:r()}},ke=function(t,e,r,n){return n},_e=function(t,e,n,i,o){var a={kind:e,from:t,to:n,location:r(),arcs:o};return at(a,i)},Ae={type:"other",description:"empty row"},Ee="|||",Le={type:"literal",value:"|||",description:'"|||"'},Te="...",Ie={type:"literal",value:"...",description:'"..."'},Se={type:"other",description:"---"},De="---",Ne={type:"literal",value:"---",description:'"---"'},je=function(t){return t.toLowerCase()},Be={type:"other",description:"bi-directional arrow"},Fe="--",He={type:"literal",value:"--",description:'"--"'},Oe="<->",Re={type:"literal",value:"<->",description:'"<->"'},We="==",Me={type:"literal",value:"==",description:'"=="'},Ge="<<=>>",Xe={type:"literal",value:"<<=>>",description:'"<<=>>"'},qe="<=>",ze={type:"literal",value:"<=>",description:'"<=>"'},Ue="..",Pe={type:"literal",value:"..",description:'".."'},Ve="<<>>",Ke={type:"literal",value:"<<>>",description:'"<<>>"'},$e="::",Ze={type:"literal",value:"::",description:'"::"'},Ye="<:>",Je={type:"literal",value:"<:>",description:'"<:>"'},Qe={type:"other",description:"left to right arrow"},tr="->",er={type:"literal",value:"->",description:'"->"'},rr="=>>",nr={type:"literal",value:"=>>",description:'"=>>"'},ir="=>",or={type:"literal",value:"=>",description:'"=>"'},ar=">>",cr={type:"literal",value:">>",description:'">>"'},ur=":>",sr={type:"literal",value:":>",description:'":>"'},lr="-x",dr={type:"literal",value:"-x",description:'"-x"'},pr={type:"other",description:"right to left arrow"},fr="<-",hr={type:"literal",value:"<-",description:'"<-"'},gr="<<=",yr={type:"literal",value:"<<=",description:'"<<="'},br="<=",vr={type:"literal",value:"<=",description:'"<="'},mr="<<",xr={type:"literal",value:"<<",description:'"<<"'},wr="<:",Cr={type:"literal",value:"<:",description:'"<:"'},kr="x-",_r={type:"literal",value:"x-",description:'"x-"'},Ar={type:"other",description:"box"},Er="note",Lr={type:"literal",value:"note",description:'"note"'},Tr="abox",Ir={type:"literal",value:"abox",description:'"abox"'},Sr="rbox",Dr={type:"literal",value:"rbox",description:'"rbox"'},Nr="box",jr={type:"literal",value:"box",description:'"box"'},Br={type:"other",description:"inline expression"},Fr="alt",Hr={type:"literal",value:"alt",description:'"alt"'},Or="else",Rr={type:"literal",value:"else",description:'"else"'},Wr="opt",Mr={type:"literal",value:"opt",description:'"opt"'},Gr="break",Xr={type:"literal",value:"break",description:'"break"'},qr="par",zr={type:"literal",value:"par",description:'"par"'},Ur="seq",Pr={type:"literal",value:"seq",description:'"seq"'},Vr="strict",Kr={type:"literal",value:"strict",description:'"strict"'},$r="neg",Zr={type:"literal",value:"neg",description:'"neg"'},Yr="critical",Jr={type:"literal",value:"critical",description:'"critical"'},Qr="ignore",tn={type:"literal",value:"ignore",description:'"ignore"'},en="consider",rn={type:"literal",value:"consider",description:'"consider"'},nn="assert",on={type:"literal",value:"assert",description:'"assert"'},an="loop",cn={type:"literal",value:"loop",description:'"loop"'},un="ref",sn={type:"literal",value:"ref",description:'"ref"'},ln="exc",dn={type:"literal",value:"exc",description:'"exc"'},pn=function(t){return t.toLowerCase()},fn=function(t,e){var r={};return r[t.toLowerCase().replace("colour","color")]=e,r},hn={type:"other",description:"attribute name"},gn="label",yn={type:"literal",value:"label",description:'"label"'},bn="idurl",vn={type:"literal",value:"idurl",description:'"idurl"'},mn="id",xn={type:"literal",value:"id",description:'"id"'},wn="url",Cn={type:"literal",value:"url",description:'"url"'},kn="linecolor",_n={type:"literal",value:"linecolor",description:'"linecolor"'},An="linecolour",En={type:"literal",value:"linecolour",description:'"linecolour"'},Ln="textcolor",Tn={type:"literal",value:"textcolor",description:'"textcolor"'
},In="textcolour",Sn={type:"literal",value:"textcolour",description:'"textcolour"'},Dn="textbgcolor",Nn={type:"literal",value:"textbgcolor",description:'"textbgcolor"'},jn="textbgcolour",Bn={type:"literal",value:"textbgcolour",description:'"textbgcolour"'},Fn="arclinecolor",Hn={type:"literal",value:"arclinecolor",description:'"arclinecolor"'},On="arclinecolour",Rn={type:"literal",value:"arclinecolour",description:'"arclinecolour"'},Wn="arctextcolor",Mn={type:"literal",value:"arctextcolor",description:'"arctextcolor"'},Gn="arctextcolour",Xn={type:"literal",value:"arctextcolour",description:'"arctextcolour"'},qn="arctextbgcolor",zn={type:"literal",value:"arctextbgcolor",description:'"arctextbgcolor"'},Un="arctextbgcolour",Pn={type:"literal",value:"arctextbgcolour",description:'"arctextbgcolour"'},Vn="arcskip",Kn={type:"literal",value:"arcskip",description:'"arcskip"'},$n={type:"other",description:"double quoted string"},Zn='"',Yn={type:"literal",value:'"',description:'"\\""'},Jn=function(t){return t.join("")},Qn='\\"',ti={type:"literal",value:'\\"',description:'"\\\\\\""'},ei={type:"any",description:"any character"},ri=function(t){return t},ni={type:"other",description:"identifier"},ii=/^[A-Za-z_0-9]/,oi={type:"class",value:"[A-Za-z_0-9]",description:"[A-Za-z_0-9]"},ai=function(t){return t.join("")},ci={type:"other",description:"whitespace"},ui=/^[ \t]/,si={type:"class",value:"[ \\t]",description:"[ \\t]"},li={type:"other",description:"lineend"},di=/^[\r\n]/,pi={type:"class",value:"[\\r\\n]",description:"[\\r\\n]"},fi="/*",hi={type:"literal",value:"/*",description:'"/*"'},gi="*/",yi={type:"literal",value:"*/",description:'"*/"'},bi=function(t,e,r){return t+e.join("")+r},vi="//",mi={type:"literal",value:"//",description:'"//"'},xi="#",wi={type:"literal",value:"#",description:'"#"'},Ci=/^[^\r\n]/,ki={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},_i=function(t,e){return t+e.join("")},Ai={type:"other",description:"comment"},Ei={type:"other",description:"number"},Li=function(t){return t},Ti=function(t){return t.toString()},Ii=function(t){return t.toString()},Si=/^[0-9]/,Di={type:"class",value:"[0-9]",description:"[0-9]"},Ni=function(t){return parseInt(t.join(""),10)},ji=".",Bi={type:"literal",value:".",description:'"."'},Fi=function(t){return parseFloat(t.join(""))},Hi={type:"other",description:"boolean"},Oi=function(t){return t},Ri=function(t){return t.toString()},Wi="true",Mi={type:"literal",value:"true",description:'"true"'},Gi="false",Xi={type:"literal",value:"false",description:'"false"'},qi="on",zi={type:"literal",value:"on",description:'"on"'},Ui="off",Pi={type:"literal",value:"off",description:'"off"'},Vi="0",Ki={type:"literal",value:"0",description:'"0"'},$i="1",Zi={type:"literal",value:"1",description:'"1"'},Yi={type:"other",description:"size"},Ji=function(t){return t.toString()},Qi="auto",to={type:"literal",value:"auto",description:'"auto"'},eo=function(t){return t.toLowerCase()},ro=0,no=0,io=[{line:1,column:1,seenCR:!1}],oo=0,ao=[],co=0;if("startRule"in mt){if(!(mt.startRule in wt))throw new Error("Can't start parsing from rule \""+mt.startRule+'".');Ct=wt[mt.startRule]}if(vt=Ct(),vt!==xt&&ro===t.length)return vt;throw vt!==xt&&ro<t.length&&a({type:"end",description:"end of input"}),c(null,ao,oo<t.length?t.charAt(oo):null,oo<t.length?o(oo,oo+1):o(oo,oo))}return t(e,Error),{SyntaxError:e,parse:r}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,i){this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t){function r(e){var r,n,i=pi[e];if(i)return i;for(r=e-1;!pi[r];)r--;for(i=pi[r],i={line:i.line,column:i.column,seenCR:i.seenCR};r<e;)n=t.charAt(r),"\n"===n?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),r++;return pi[e]=i,i}function n(t,e){var n=r(t),i=r(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:i.line,column:i.column}}}function i(t){li<fi||(li>fi&&(fi=li,hi=[]),hi.push(t))}function o(t,r,n,i){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function a(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0100-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1000-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,i,o,a=new Array(t.length);for(o=0;o<t.length;o++)a[o]=t[o].description;return n=t.length>1?a.slice(0,-1).join(", ")+" or "+a[t.length-1]:a[0],i=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+i+" found."}return null!==r&&o(r),new e(null!==t?t:a(r,n),r,n,i)}function a(){var t,e,r,n;return t=li,e=z(),e!==ht?(r=c(),r!==ht?(n=z(),n!==ht?(di=t,e=bt(e,r),t=e):(li=t,t=ht)):(li=t,t=ht)):(li=t,t=ht),t}function c(){var t,e,r,n,i;return t=li,e=li,r=u(),r!==ht&&(di=e,r=vt(r)),e=r,e===ht&&(e=null),e!==ht?(r=li,n=l(),n!==ht&&(di=r,n=mt(n)),r=n,r===ht&&(r=null),r!==ht?(n=li,i=p(),i!==ht&&(di=n,i=xt(i)),n=i,n===ht&&(n=null),n!==ht?(e=[e,r,n],t=e):(li=t,t=ht)):(li=t,t=ht)):(li=t,t=ht),t}function u(){var e,r,n,o,a,c;for(e=li,r=li,n=[],o=li,a=s(),a!==ht?(44===t.charCodeAt(li)?(c=wt,li++):(c=ht,0===gi&&i(Ct)),c!==ht?(di=o,a=kt(a),o=a):(li=o,o=ht)):(li=o,o=ht);o!==ht;)n.push(o),o=li,a=s(),a!==ht?(44===t.charCodeAt(li)?(c=wt,li++):(c=ht,0===gi&&i(Ct)),c!==ht?(di=o,a=kt(a),o=a):(li=o,o=ht)):(li=o,o=ht);return n!==ht?(o=li,a=s(),a!==ht?(59===t.charCodeAt(li)?(c=_t,li++):(c=ht,0===gi&&i(At)),c!==ht?(di=o,a=kt(a),o=a):(li=o,o=ht)):(li=o,o=ht),o!==ht?(n=[n,o],r=n):(li=r,r=ht)):(li=r,r=ht),r!==ht&&(di=e,r=Et(r)),e=r}function s(){var e,r,n,o,a,c,u,s;return e=li,r=z(),r!==ht?(t.substr(li,6).toLowerCase()===Lt?(n=t.substr(li,6),li+=6):(n=ht,0===gi&&i(Tt)),n===ht&&(t.substr(li,11).toLowerCase()===It?(n=t.substr(li,11),li+=11):(n=ht,0===gi&&i(St))),n!==ht?(o=z(),o!==ht?(61===t.charCodeAt(li)?(a=Dt,li++):(a=ht,0===gi&&i(Nt)),a!==ht?(c=z(),c!==ht?(u=U(),u!==ht?(s=z(),s!==ht?(di=e,r=jt(n,u),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e===ht&&(e=li,r=z(),r!==ht?(t.substr(li,5).toLowerCase()===Bt?(n=t.substr(li,5),li+=5):(n=ht,0===gi&&i(Ft)),n!==ht?(o=z(),o!==ht?(61===t.charCodeAt(li)?(a=Dt,li++):(a=ht,0===gi&&i(Nt)),a!==ht?(c=z(),c!==ht?(u=Q(),u!==ht?(s=z(),s!==ht?(di=e,r=jt(n,u),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e===ht&&(e=li,r=z(),r!==ht?(t.substr(li,12).toLowerCase()===Ht?(n=t.substr(li,12),li+=12):(n=ht,0===gi&&i(Ot)),n!==ht?(o=z(),o!==ht?(61===t.charCodeAt(li)?(a=Dt,li++):(a=ht,0===gi&&i(Nt)),a!==ht?(c=z(),c!==ht?(u=Z(),u!==ht?(s=z(),s!==ht?(di=e,r=Rt(n,u),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e===ht&&(e=li,r=z(),r!==ht?(t.substr(li,9).toLowerCase()===Wt?(n=t.substr(li,9),li+=9):(n=ht,0===gi&&i(Mt)),n!==ht?(o=z(),o!==ht?(61===t.charCodeAt(li)?(a=Dt,li++):(a=ht,0===gi&&i(Nt)),a!==ht?(c=z(),c!==ht?(u=I(),u!==ht?(s=z(),s!==ht?(di=e,r=jt(n,u),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)))),e}function l(){var e,r,n,o,a,c;for(e=li,r=li,n=[],o=li,a=d(),a!==ht?(44===t.charCodeAt(li)?(c=wt,li++):(c=ht,0===gi&&i(Ct)),c!==ht?(di=o,a=Gt(a),o=a):(li=o,o=ht)):(li=o,o=ht);o!==ht;)n.push(o),o=li,a=d(),a!==ht?(44===t.charCodeAt(li)?(c=wt,li++):(c=ht,0===gi&&i(Ct)),c!==ht?(di=o,a=Gt(a),o=a):(li=o,o=ht)):(li=o,o=ht);return n!==ht?(o=li,a=d(),a!==ht?(59===t.charCodeAt(li)?(c=_t,li++):(c=ht,0===gi&&i(At)),c!==ht?(di=o,a=Gt(a),o=a):(li=o,o=ht)):(li=o,o=ht),o!==ht?(n=[n,o],r=n):(li=r,r=ht)):(li=r,r=ht),r!==ht&&(di=e,r=Xt(r)),e=r}function d(){var e,r,n,o,a,c,u,s,l;return gi++,e=li,r=z(),r!==ht?(n=j(),n!==ht?(o=z(),o!==ht?(a=li,58===t.charCodeAt(li)?(c=zt,li++):(c=ht,0===gi&&i(Ut)),c!==ht?(u=z(),u!==ht?(s=T(),s!==ht?(l=z(),l!==ht?(di=a,c=Pt(n,s),a=c):(li=a,a=ht)):(li=a,a=ht)):(li=a,a=ht)):(li=a,a=ht),a===ht&&(a=null),a!==ht?(di=e,r=Vt(n,a),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),gi--,e===ht&&(r=ht,0===gi&&i(qt)),e}function p(){var e,r,n,o,a;if(e=[],r=li,n=f(),n!==ht?(o=z(),o!==ht?(59===t.charCodeAt(li)?(a=_t,li++):(a=ht,0===gi&&i(At)),a!==ht?(di=r,n=Kt(n),r=n):(li=r,r=ht)):(li=r,r=ht)):(li=r,r=ht),r!==ht)for(;r!==ht;)e.push(r),r=li,n=f(),n!==ht?(o=z(),o!==ht?(59===t.charCodeAt(li)?(a=_t,li++):(a=ht,0===gi&&i(At)),a!==ht?(di=r,n=Kt(n),r=n):(li=r,r=ht)):(li=r,r=ht)):(li=r,r=ht);else e=ht;return e}function f(){var e,r,n,o,a,c;for(e=li,r=li,n=[],o=li,a=h(),a!==ht?(44===t.charCodeAt(li)?(c=wt,li++):(c=ht,0===gi&&i(Ct)),c!==ht?(di=o,a=Kt(a),o=a):(li=o,o=ht)):(li=o,o=ht);o!==ht;)n.push(o),o=li,a=h(),a!==ht?(44===t.charCodeAt(li)?(c=wt,li++):(c=ht,0===gi&&i(Ct)),c!==ht?(di=o,a=Kt(a),o=a):(li=o,o=ht)):(li=o,o=ht);return n!==ht?(o=li,a=h(),a!==ht&&(di=o,a=$t(a)),o=a,o!==ht?(n=[n,o],r=n):(li=r,r=ht)):(li=r,r=ht),r!==ht&&(di=e,r=Zt(r)),e=r}function h(){var t;return t=g(),t===ht&&(t=m()),t}function g(){var e,r,n,o,a,c,u;return e=li,r=li,n=y(),n!==ht&&(di=r,n=Yt(n)),r=n,r===ht&&(r=li,n=v(),n!==ht&&(di=r,n=Jt(n)),r=n,r===ht&&(r=li,n=b(),n!==ht&&(di=r,n=Qt(n)),r=n)),r!==ht?(n=li,58===t.charCodeAt(li)?(o=zt,li++):(o=ht,0===gi&&i(Ut)),o!==ht?(a=z(),a!==ht?(c=T(),c!==ht?(u=z(),u!==ht?(di=n,o=te(r,c),n=o):(li=n,n=ht)):(li=n,n=ht)):(li=n,n=ht)):(li=n,n=ht),n===ht&&(n=null),n!==ht?(di=e,r=ee(r,n),e=r):(li=e,e=ht)):(li=e,e=ht),e}function y(){var t,e,r,n;return t=li,e=z(),e!==ht?(r=x(),r!==ht?(n=z(),n!==ht?(di=t,e=re(r),t=e):(li=t,t=ht)):(li=t,t=ht)):(li=t,t=ht),t}function b(){var t,e,r,n;return t=li,e=z(),e!==ht?(r=w(),r!==ht?(n=z(),n!==ht?(di=t,e=re(r),t=e):(li=t,t=ht)):(li=t,t=ht)):(li=t,t=ht),t}function v(){var e,r,n,o,a,c,u,s;return e=li,r=z(),r!==ht?(n=j(),n!==ht?(o=z(),o!==ht?(a=C(),a!==ht?(c=z(),c!==ht?(u=j(),u!==ht?(s=z(),s!==ht?(di=e,r=ne(n,a,u),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e===ht&&(e=li,r=z(),r!==ht?(42===t.charCodeAt(li)?(n=ie,li++):(n=ht,0===gi&&i(oe)),n!==ht?(o=z(),o!==ht?(a=A(),a!==ht?(c=z(),c!==ht?(u=j(),u!==ht?(s=z(),s!==ht?(di=e,r=ae(a,u),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e===ht&&(e=li,r=z(),r!==ht?(n=j(),n!==ht?(o=z(),o!==ht?(a=_(),a!==ht?(c=z(),c!==ht?(42===t.charCodeAt(li)?(u=ie,li++):(u=ht,0===gi&&i(oe)),u!==ht?(s=z(),s!==ht?(di=e,r=ce(n,a),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e===ht&&(e=li,r=z(),r!==ht?(n=j(),n!==ht?(o=z(),o!==ht?(a=k(),a!==ht?(c=z(),c!==ht?(42===t.charCodeAt(li)?(u=ie,li++):(u=ht,0===gi&&i(oe)),u!==ht?(s=z(),s!==ht?(di=e,r=ce(n,a),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)))),e}function m(){var e,r,n,o,a,c,u,s,l,d,f,h,g,y,b;return e=li,r=z(),r!==ht?(n=j(),n!==ht?(o=z(),o!==ht?(a=L(),a!==ht?(c=z(),c!==ht?(u=j(),u!==ht?(s=z(),s!==ht?(l=li,58===t.charCodeAt(li)?(d=zt,li++):(d=ht,0===gi&&i(Ut)),d!==ht?(f=z(),f!==ht?(h=T(),h!==ht?(g=z(),g!==ht?(di=l,d=ue(n,a,u,h),l=d):(li=l,l=ht)):(li=l,l=ht)):(li=l,l=ht)):(li=l,l=ht),l===ht&&(l=null),l!==ht?(123===t.charCodeAt(li)?(d=se,li++):(d=ht,0===gi&&i(le)),d!==ht?(f=z(),f!==ht?(h=p(),h===ht&&(h=null),h!==ht?(g=z(),g!==ht?(125===t.charCodeAt(li)?(y=de,li++):(y=ht,0===gi&&i(pe)),y!==ht?(b=z(),b!==ht?(di=e,r=fe(n,a,u,l,h),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e}function x(){var e,r;return gi++,t.substr(li,3)===ge?(e=ge,li+=3):(e=ht,0===gi&&i(ye)),e===ht&&(t.substr(li,3)===be?(e=be,li+=3):(e=ht,0===gi&&i(ve))),gi--,e===ht&&(r=ht,0===gi&&i(he)),e}function w(){var e,r;return gi++,t.substr(li,3)===xe?(e=xe,li+=3):(e=ht,0===gi&&i(we)),gi--,e===ht&&(r=ht,0===gi&&i(me)),e}function C(){var t,e;return t=li,e=k(),e===ht&&(e=_(),e===ht&&(e=A(),e===ht&&(e=E()))),e!==ht&&(di=t,e=Ce(e)),t=e}function k(){var e,r;return gi++,t.substr(li,2)===_e?(e=_e,li+=2):(e=ht,0===gi&&i(Ae)),e===ht&&(t.substr(li,3)===Ee?(e=Ee,li+=3):(e=ht,0===gi&&i(Le)),e===ht&&(t.substr(li,2)===Te?(e=Te,li+=2):(e=ht,0===gi&&i(Ie)),e===ht&&(t.substr(li,5)===Se?(e=Se,li+=5):(e=ht,0===gi&&i(De)),e===ht&&(t.substr(li,3)===Ne?(e=Ne,li+=3):(e=ht,0===gi&&i(je)),e===ht&&(t.substr(li,2)===Be?(e=Be,li+=2):(e=ht,0===gi&&i(Fe)),e===ht&&(t.substr(li,4)===He?(e=He,li+=4):(e=ht,0===gi&&i(Oe)),e===ht&&(t.substr(li,2)===Re?(e=Re,li+=2):(e=ht,0===gi&&i(We)),e===ht&&(t.substr(li,3)===Me?(e=Me,li+=3):(e=ht,0===gi&&i(Ge)))))))))),gi--,e===ht&&(r=ht,0===gi&&i(ke)),e}function _(){var e,r;return gi++,t.substr(li,2)===qe?(e=qe,li+=2):(e=ht,0===gi&&i(ze)),e===ht&&(t.substr(li,3)===Ue?(e=Ue,li+=3):(e=ht,0===gi&&i(Pe)),e===ht&&(t.substr(li,2)===Ve?(e=Ve,li+=2):(e=ht,0===gi&&i(Ke)),e===ht&&(t.substr(li,2)===$e?(e=$e,li+=2):(e=ht,0===gi&&i(Ze)),e===ht&&(t.substr(li,2)===Ye?(e=Ye,li+=2):(e=ht,0===gi&&i(Je)),e===ht&&(t.substr(li,2).toLowerCase()===Qe?(e=t.substr(li,2),li+=2):(e=ht,0===gi&&i(tr))))))),gi--,e===ht&&(r=ht,0===gi&&i(Xe)),e}function A(){var e,r;return gi++,t.substr(li,2)===rr?(e=rr,li+=2):(e=ht,0===gi&&i(nr)),e===ht&&(t.substr(li,3)===ir?(e=ir,li+=3):(e=ht,0===gi&&i(or)),e===ht&&(t.substr(li,2)===ar?(e=ar,li+=2):(e=ht,0===gi&&i(cr)),e===ht&&(t.substr(li,2)===ur?(e=ur,li+=2):(e=ht,0===gi&&i(sr)),e===ht&&(t.substr(li,2)===lr?(e=lr,li+=2):(e=ht,0===gi&&i(dr)),e===ht&&(t.substr(li,2).toLowerCase()===pr?(e=t.substr(li,2),li+=2):(e=ht,0===gi&&i(fr))))))),gi--,e===ht&&(r=ht,0===gi&&i(er)),e}function E(){var e,r;return gi++,t.substr(li,4).toLowerCase()===gr?(e=t.substr(li,4),li+=4):(e=ht,0===gi&&i(yr)),e===ht&&(t.substr(li,4).toLowerCase()===br?(e=t.substr(li,4),li+=4):(e=ht,0===gi&&i(vr)),e===ht&&(t.substr(li,4).toLowerCase()===mr?(e=t.substr(li,4),li+=4):(e=ht,0===gi&&i(xr)),e===ht&&(t.substr(li,3).toLowerCase()===wr?(e=t.substr(li,3),li+=3):(e=ht,0===gi&&i(Cr))))),gi--,e===ht&&(r=ht,0===gi&&i(hr)),e}function L(){var e,r;return gi++,e=li,t.substr(li,3).toLowerCase()===_r?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Ar)),r===ht&&(t.substr(li,4).toLowerCase()===Er?(r=t.substr(li,4),li+=4):(r=ht,0===gi&&i(Lr)),r===ht&&(t.substr(li,3).toLowerCase()===Tr?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Ir)),r===ht&&(t.substr(li,5).toLowerCase()===Sr?(r=t.substr(li,5),li+=5):(r=ht,0===gi&&i(Dr)),r===ht&&(t.substr(li,3).toLowerCase()===Nr?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(jr)),r===ht&&(t.substr(li,3).toLowerCase()===Br?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Fr)),r===ht&&(t.substr(li,6).toLowerCase()===Hr?(r=t.substr(li,6),li+=6):(r=ht,0===gi&&i(Or)),r===ht&&(t.substr(li,3).toLowerCase()===Rr?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Wr)),r===ht&&(t.substr(li,8).toLowerCase()===Mr?(r=t.substr(li,8),li+=8):(r=ht,0===gi&&i(Gr)),r===ht&&(t.substr(li,6).toLowerCase()===Xr?(r=t.substr(li,6),li+=6):(r=ht,0===gi&&i(qr)),r===ht&&(t.substr(li,8).toLowerCase()===zr?(r=t.substr(li,8),li+=8):(r=ht,0===gi&&i(Ur)),r===ht&&(t.substr(li,6).toLowerCase()===Pr?(r=t.substr(li,6),li+=6):(r=ht,0===gi&&i(Vr)),r===ht&&(t.substr(li,4).toLowerCase()===Kr?(r=t.substr(li,4),li+=4):(r=ht,0===gi&&i($r)),r===ht&&(t.substr(li,3).toLowerCase()===Zr?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Yr)),r===ht&&(t.substr(li,3).toLowerCase()===Jr?(r=t.substr(li,3),li+=3):(r=ht,0===gi&&i(Qr)))))))))))))))),r!==ht&&(di=e,r=tn(r)),e=r,gi--,e===ht&&(r=ht,0===gi&&i(kr)),e}function T(){var t;return t=I(),t===ht&&(t=D()),t}function I(){var e,r,n,o;return gi++,e=li,34===t.charCodeAt(li)?(r=rn,li++):(r=ht,0===gi&&i(nn)),r!==ht?(n=S(),n!==ht?(34===t.charCodeAt(li)?(o=rn,li++):(o=ht,0===gi&&i(nn)),o!==ht?(di=e,r=on(n),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),gi--,e===ht&&(r=ht,0===gi&&i(en)),e}function S(){var e,r,n,o;for(e=[],r=li,n=li,gi++,34===t.charCodeAt(li)?(o=rn,li++):(o=ht,0===gi&&i(nn)),gi--,o===ht?n=void 0:(li=n,n=ht),n!==ht?(t.substr(li,2)===an?(o=an,li+=2):(o=ht,0===gi&&i(cn)),o===ht&&(t.length>li?(o=t.charAt(li),li++):(o=ht,0===gi&&i(un))),o!==ht?(di=r,n=sn(o),r=n):(li=r,r=ht)):(li=r,r=ht);r!==ht;)e.push(r),r=li,n=li,gi++,34===t.charCodeAt(li)?(o=rn,li++):(o=ht,0===gi&&i(nn)),gi--,o===ht?n=void 0:(li=n,n=ht),n!==ht?(t.substr(li,2)===an?(o=an,li+=2):(o=ht,0===gi&&i(cn)),o===ht&&(t.length>li?(o=t.charAt(li),li++):(o=ht,0===gi&&i(un))),o!==ht?(di=r,n=sn(o),r=n):(li=r,r=ht)):(li=r,r=ht);return e}function D(){var t,e;return t=li,e=N(),e!==ht&&(di=t,e=ln(e)),t=e}function N(){var e,r,n,o;for(e=[],r=li,n=li,gi++,44===t.charCodeAt(li)?(o=wt,li++):(o=ht,0===gi&&i(Ct)),o===ht&&(59===t.charCodeAt(li)?(o=_t,li++):(o=ht,0===gi&&i(At)),o===ht&&(123===t.charCodeAt(li)?(o=se,li++):(o=ht,0===gi&&i(le)))),gi--,o===ht?n=void 0:(li=n,n=ht),n!==ht?(t.length>li?(o=t.charAt(li),li++):(o=ht,0===gi&&i(un)),o!==ht?(di=r,n=sn(o),r=n):(li=r,r=ht)):(li=r,r=ht);r!==ht;)e.push(r),r=li,n=li,gi++,44===t.charCodeAt(li)?(o=wt,li++):(o=ht,0===gi&&i(Ct)),o===ht&&(59===t.charCodeAt(li)?(o=_t,li++):(o=ht,0===gi&&i(At)),o===ht&&(123===t.charCodeAt(li)?(o=se,li++):(o=ht,0===gi&&i(le)))),gi--,o===ht?n=void 0:(li=n,n=ht),n!==ht?(t.length>li?(o=t.charAt(li),li++):(o=ht,0===gi&&i(un)),o!==ht?(di=r,n=sn(o),r=n):(li=r,r=ht)):(li=r,r=ht);return e}function j(){var e,r,n;if(gi++,e=li,r=[],pn.test(t.charAt(li))?(n=t.charAt(li),li++):(n=ht,0===gi&&i(fn)),n!==ht)for(;n!==ht;)r.push(n),pn.test(t.charAt(li))?(n=t.charAt(li),li++):(n=ht,0===gi&&i(fn));else r=ht;return r!==ht&&(di=e,r=hn(r)),e=r,e===ht&&(e=I()),gi--,e===ht&&(r=ht,0===gi&&i(dn)),e}function B(){var e,r;return gi++,e=li,yn.test(t.charAt(li))?(r=t.charAt(li),li++):(r=ht,0===gi&&i(bn)),r!==ht&&(di=e,r=sn(r)),e=r,gi--,e===ht&&(r=ht,0===gi&&i(gn)),e}function F(){var e,r;return gi++,e=li,mn.test(t.charAt(li))?(r=t.charAt(li),li++):(r=ht,0===gi&&i(xn)),r!==ht&&(di=e,r=sn(r)),e=r,gi--,e===ht&&(r=ht,0===gi&&i(vn)),e}function H(){var e;return t.substr(li,2)===wn?(e=wn,li+=2):(e=ht,0===gi&&i(Cn)),e}function O(){var e;return t.substr(li,2)===kn?(e=kn,li+=2):(e=ht,0===gi&&i(_n)),e}function R(){var e,r,n;return e=li,r=li,gi++,t.substr(li,2)===kn?(n=kn,li+=2):(n=ht,0===gi&&i(_n)),gi--,n===ht?r=void 0:(li=r,r=ht),r!==ht?(t.length>li?(n=t.charAt(li),li++):(n=ht,0===gi&&i(un)),n!==ht?(di=e,r=sn(n),e=r):(li=e,e=ht)):(li=e,e=ht),e}function W(){var t,e,r,n;if(t=li,e=H(),e!==ht){for(r=[],n=R();n!==ht;)r.push(n),n=R();r!==ht?(n=O(),n!==ht?(di=t,e=An(e,r,n),t=e):(li=t,t=ht)):(li=t,t=ht)}else li=t,t=ht;return t}function M(){var e;return t.substr(li,2)===En?(e=En,li+=2):(e=ht,0===gi&&i(Ln)),e===ht&&(35===t.charCodeAt(li)?(e=Tn,li++):(e=ht,0===gi&&i(In))),e}function G(){var e;return Sn.test(t.charAt(li))?(e=t.charAt(li),li++):(e=ht,0===gi&&i(Dn)),e}function X(){var t,e,r,n;if(t=li,e=M(),e!==ht){for(r=[],n=G();n!==ht;)r.push(n),n=G();r!==ht?(di=t,e=Nn(e,r),t=e):(li=t,t=ht)}else li=t,t=ht;return t}function q(){var t,e;return gi++,t=X(),t===ht&&(t=W()),gi--,t===ht&&(e=ht,0===gi&&i(jn)),t}function z(){var t,e;for(t=[],e=B(),e===ht&&(e=F(),e===ht&&(e=q()));e!==ht;)t.push(e),e=B(),e===ht&&(e=F(),e===ht&&(e=q()));return t}function U(){var t,e;return gi++,t=li,e=P(),e!==ht&&(di=t,e=Fn(e)),t=e,t===ht&&(t=li,e=V(),e!==ht&&(di=t,e=Hn(e)),t=e),gi--,t===ht&&(e=ht,0===gi&&i(Bn)),t}function P(){var e,r,n,o;return e=li,34===t.charCodeAt(li)?(r=rn,li++):(r=ht,0===gi&&i(nn)),r!==ht?(n=V(),n!==ht?(34===t.charCodeAt(li)?(o=rn,li++):(o=ht,0===gi&&i(nn)),o!==ht?(di=e,r=On(n),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e}function V(){var t;return t=$(),t===ht&&(t=K()),t}function K(){var e,r,n;if(e=li,r=[],Rn.test(t.charAt(li))?(n=t.charAt(li),li++):(n=ht,0===gi&&i(Wn)),n!==ht)for(;n!==ht;)r.push(n),Rn.test(t.charAt(li))?(n=t.charAt(li),li++):(n=ht,0===gi&&i(Wn));else r=ht;return r!==ht&&(di=e,r=Mn(r)),e=r}function $(){var e,r,n,o,a;return e=li,r=li,n=K(),n!==ht?(46===t.charCodeAt(li)?(o=Gn,li++):(o=ht,0===gi&&i(Xn)),o!==ht?(a=K(),a!==ht?(n=[n,o,a],r=n):(li=r,r=ht)):(li=r,r=ht)):(li=r,r=ht),r!==ht&&(di=e,r=qn(r)),e=r}function Z(){var t,e;return gi++,t=li,e=Y(),e!==ht&&(di=t,e=Un(e)),t=e,t===ht&&(t=li,e=J(),e!==ht&&(di=t,e=Pn(e)),t=e),gi--,t===ht&&(e=ht,0===gi&&i(zn)),t}function Y(){var e,r,n,o;return e=li,34===t.charCodeAt(li)?(r=rn,li++):(r=ht,0===gi&&i(nn)),r!==ht?(n=J(),n!==ht?(34===t.charCodeAt(li)?(o=rn,li++):(o=ht,0===gi&&i(nn)),o!==ht?(di=e,r=Fn(n),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e}function J(){var e;return t.substr(li,4).toLowerCase()===Vn?(e=t.substr(li,4),li+=4):(e=ht,0===gi&&i(Kn)),e===ht&&(t.substr(li,5).toLowerCase()===$n?(e=t.substr(li,5),li+=5):(e=ht,0===gi&&i(Zn)),e===ht&&(t.substr(li,2).toLowerCase()===Yn?(e=t.substr(li,2),li+=2):(e=ht,0===gi&&i(Jn)),e===ht&&(t.substr(li,3).toLowerCase()===Qn?(e=t.substr(li,3),li+=3):(e=ht,0===gi&&i(ti)),e===ht&&(48===t.charCodeAt(li)?(e=ei,li++):(e=ht,0===gi&&i(ri)),e===ht&&(49===t.charCodeAt(li)?(e=ni,li++):(e=ht,0===gi&&i(ii))))))),e}function Q(){var t,e;return gi++,t=tt(),t===ht&&(t=et()),gi--,t===ht&&(e=ht,0===gi&&i(oi)),t}function tt(){var e,r,n,o;return e=li,34===t.charCodeAt(li)?(r=rn,li++):(r=ht,0===gi&&i(nn)),r!==ht?(n=et(),n!==ht?(34===t.charCodeAt(li)?(o=rn,li++):(o=ht,0===gi&&i(nn)),o!==ht?(di=e,r=Fn(n),e=r):(li=e,e=ht)):(li=e,e=ht)):(li=e,e=ht),e}function et(){var e,r;return e=li,r=V(),r!==ht&&(di=e,r=ai(r)),e=r,e===ht&&(e=li,t.substr(li,4).toLowerCase()===ci?(r=t.substr(li,4),li+=4):(r=ht,0===gi&&i(ui)),r!==ht&&(di=e,r=si(r)),e=r),e}function rt(t,e){return t=t||{},e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]}),t}function nt(t){var e={};return t[0].forEach(function(t){e=rt(e,t)}),rt(e,t[1])}function it(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function ot(t,e){var r={};return r[t.toLowerCase()]=e,r}function at(t,e,r){return void 0===e||"*"===e||(!!t.entities.some(function(t){return t.name===e})||r[e]===!0)}function ct(t){var e={};return e.name=t,e}function ut(t,e,r){return t||(t={},t.entities=[]),r||(r={}),e&&e.arcs&&e.arcs.forEach(function(e){e.forEach(function(e){at(t,e.from,r)||(t.entities[t.entities.length]=ct(e.from)),e.arcs&&(r[e.to]=!0,rt(t,ut(t,e,r)),delete r[e.to]),at(t,e.to,r)||(t.entities[t.entities.length]=ct(e.to))})}),t}function st(t){return!(!t||!t.options)&&(!!t.options.watermark||!!t.options.width&&"auto"===t.options.width)}function lt(t){return!(!t||!t.arcs)&&t.arcs.some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})})}function dt(t,e){var r=st(t),n=lt(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}var pt,ft=arguments.length>1?arguments[1]:{},ht={},gt={program:a},yt=a,bt=function(t,e){e[1]=ut(e[1],e[2]);var r=rt(e[0],rt(e[1],e[2]));return r=rt({meta:dt(e[0],e[2])},r),t.length>0&&(r=rt({precomment:t},r)),r},vt=function(t){return{options:t}},mt=function(t){return{entities:t}},xt=function(t){return{arcs:t}},wt=",",Ct={type:"literal",value:",",description:'","'},kt=function(t){return t},_t=";",At={type:"literal",value:";",description:'";"'},Et=function(t){return nt(t)},Lt="hscale",Tt={type:"literal",value:"hscale",description:'"hscale"'},It="arcgradient",St={type:"literal",value:"arcgradient",description:'"arcgradient"'},Dt="=",Nt={type:"literal",value:"=",description:'"="'},jt=function(t,e){return ot(t,e)},Bt="width",Ft={type:"literal",value:"width",description:'"width"'},Ht="wordwraparcs",Ot={type:"literal",value:"wordwraparcs",description:'"wordwraparcs"'},Rt=function(t,e){var r={};return r[t.toLowerCase()]=it(e),r},Wt="watermark",Mt={type:"literal",value:"watermark",description:'"watermark"'},Gt=function(t){return t},Xt=function(t){return t[0].push(t[1]),t[0]},qt={type:"other",description:"entity"},zt=":",Ut={type:"literal",value:":",description:'":"'},Pt=function(t,e){return e},Vt=function(t,e){var r={};return r.name=t,e&&(r.label=e),r},Kt=function(t){return t},$t=function(t){return[t]},Zt=function(t){return t[0].push(t[1][0]),t[0]},Yt=function(t){return t},Jt=function(t){return t},Qt=function(t){return t},te=function(t,e){return e},ee=function(t,e){return e&&(t.label=e),t},re=function(t){return{kind:t}},ne=function(t,e,r){return{kind:e,from:t,to:r}},ie="*",oe={type:"literal",value:"*",description:'"*"'},ae=function(t,e){return{kind:t,from:"*",to:e}},ce=function(t,e){return{kind:e,from:t,to:"*"}},ue=function(t,e,r,n){return n},se="{",le={type:"literal",value:"{",description:'"{"'},de="}",pe={type:"literal",value:"}",description:'"}"'},fe=function(t,e,r,n,i){var o={kind:e,from:t,to:r,arcs:i};return n&&(o.label=n),o},he={type:"other",description:"empty row"},ge="|||",ye={type:"literal",value:"|||",description:'"|||"'},be="...",ve={type:"literal",value:"...",description:'"..."'},me={type:"other",description:"---"},xe="---",we={type:"literal",value:"---",description:'"---"'},Ce=function(t){return t.toLowerCase()},ke={type:"other",description:"bi-directional arrow"},_e="--",Ae={type:"literal",value:"--",description:'"--"'},Ee="<->",Le={type:"literal",value:"<->",description:'"<->"'},Te="==",Ie={type:"literal",value:"==",description:'"=="'},Se="<<=>>",De={type:"literal",value:"<<=>>",description:'"<<=>>"'},Ne="<=>",je={type:"literal",value:"<=>",description:'"<=>"'},Be="..",Fe={type:"literal",value:"..",description:'".."'},He="<<>>",Oe={type:"literal",value:"<<>>",description:'"<<>>"'},Re="::",We={type:"literal",value:"::",description:'"::"'},Me="<:>",Ge={type:"literal",value:"<:>",description:'"<:>"'},Xe={type:"other",description:"left to right arrow"},qe="->",ze={type:"literal",value:"->",description:'"->"'},Ue="=>>",Pe={type:"literal",value:"=>>",description:'"=>>"'},Ve="=>",Ke={type:"literal",value:"=>",description:'"=>"'},$e=">>",Ze={type:"literal",value:">>",description:'">>"'},Ye=":>",Je={type:"literal",value:":>",description:'":>"'},Qe="-x",tr={type:"literal",value:"-x",description:'"-x"'},er={type:"other",description:"right to left arrow"},rr="<-",nr={type:"literal",value:"<-",description:'"<-"'},ir="<<=",or={type:"literal",value:"<<=",description:'"<<="'},ar="<=",cr={type:"literal",value:"<=",description:'"<="'},ur="<<",sr={type:"literal",value:"<<",description:'"<<"'},lr="<:",dr={type:"literal",value:"<:",description:'"<:"'},pr="x-",fr={type:"literal",value:"x-",description:'"x-"'},hr={type:"other",description:"box"},gr="note",yr={type:"literal",value:"note",description:'"note"'},br="abox",vr={type:"literal",value:"abox",description:'"abox"'},mr="rbox",xr={type:"literal",value:"rbox",description:'"rbox"'},wr="box",Cr={type:"literal",value:"box",description:'"box"'},kr={type:"other",description:"inline expression"},_r="alt",Ar={type:"literal",value:"alt",description:'"alt"'},Er="else",Lr={type:"literal",value:"else",description:'"else"'},Tr="opt",Ir={type:"literal",value:"opt",description:'"opt"'},Sr="break",Dr={type:"literal",value:"break",description:'"break"'},Nr="par",jr={type:"literal",value:"par",description:'"par"'},Br="seq",Fr={type:"literal",value:"seq",description:'"seq"'},Hr="strict",Or={type:"literal",value:"strict",description:'"strict"'},Rr="neg",Wr={type:"literal",value:"neg",description:'"neg"'},Mr="critical",Gr={type:"literal",value:"critical",description:'"critical"'},Xr="ignore",qr={type:"literal",value:"ignore",description:'"ignore"'},zr="consider",Ur={type:"literal",value:"consider",description:'"consider"'},Pr="assert",Vr={type:"literal",value:"assert",description:'"assert"'},Kr="loop",$r={type:"literal",value:"loop",description:'"loop"'},Zr="ref",Yr={type:"literal",value:"ref",description:'"ref"'},Jr="exc",Qr={type:"literal",value:"exc",description:'"exc"'},tn=function(t){return t.toLowerCase()},en={type:"other",description:"double quoted string"},rn='"',nn={type:"literal",value:'"',description:'"\\""'},on=function(t){return t.join("")},an='\\"',cn={type:"literal",value:'\\"',description:'"\\\\\\""'},un={type:"any",description:"any character"},sn=function(t){return t},ln=function(t){return t.join("").trim()},dn={type:"other",description:"identifier"},pn=/^[^;, "\t\n\r=\-><:{*]/,fn={type:"class",value:'[^;, \\"\\t\\n\\r=\\-><:\\{\\*]',description:'[^;, \\"\\t\\n\\r=\\-><:\\{\\*]'},hn=function(t){return t.join("")},gn={type:"other",description:"whitespace"},yn=/^[ \t]/,bn={type:"class",value:"[ \\t]",description:"[ \\t]"},vn={type:"other",description:"lineend"},mn=/^[\r\n]/,xn={type:"class",value:"[\\r\\n]",description:"[\\r\\n]"},wn="/*",Cn={type:"literal",value:"/*",description:'"/*"'},kn="*/",_n={type:"literal",value:"*/",description:'"*/"'},An=function(t,e,r){return t+e.join("")+r},En="//",Ln={type:"literal",value:"//",description:'"//"'},Tn="#",In={type:"literal",value:"#",description:'"#"'},Sn=/^[^\r\n]/,Dn={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},Nn=function(t,e){return t+e.join("")},jn={type:"other",description:"comment"},Bn={type:"other",description:"number"},Fn=function(t){return t},Hn=function(t){return t.toString()},On=function(t){return t.toString()},Rn=/^[0-9]/,Wn={type:"class",value:"[0-9]",description:"[0-9]"},Mn=function(t){return parseInt(t.join(""),10)},Gn=".",Xn={type:"literal",value:".",description:'"."'},qn=function(t){return parseFloat(t.join(""))},zn={type:"other",description:"boolean"},Un=function(t){return t},Pn=function(t){return t.toString()},Vn="true",Kn={type:"literal",value:"true",description:'"true"'},$n="false",Zn={type:"literal",value:"false",description:'"false"'},Yn="on",Jn={type:"literal",value:"on",description:'"on"'},Qn="off",ti={type:"literal",value:"off",description:'"off"'},ei="0",ri={type:"literal",value:"0",description:'"0"'},ni="1",ii={type:"literal",value:"1",description:'"1"'},oi={type:"other",description:"size"},ai=function(t){return t.toString()},ci="auto",ui={type:"literal",value:"auto",description:'"auto"'},si=function(t){return t.toLowerCase()},li=0,di=0,pi=[{line:1,column:1,seenCR:!1}],fi=0,hi=[],gi=0;if("startRule"in ft){if(!(ft.startRule in gt))throw new Error("Can't start parsing from rule \""+ft.startRule+'".');yt=gt[ft.startRule]}if(pt=yt(),pt!==ht&&li===t.length)return pt;throw pt!==ht&&li<t.length&&i({type:"end",description:"end of input"}),o(null,hi,fi<t.length?t.charAt(fi):null,fi<t.length?n(fi,fi+1):n(fi,fi))}return t(e,Error),{SyntaxError:e,parse:r}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(8),r(4),r(6),r(12),r(13),r(15),r(17),r(22),r(7),r(19),r(20),r(21),r(5),r(10)],i=function(t,e,r,n,i,o,a,c,u,s,l,d,p,f){"use strict";function h(t,e,n,i){var a=Object.seal(o.flatten(t)),c=i||{};c=f.defaults(c,{source:null,styleAdditions:null,mirrorEntitiesOnBottom:!1}),g(a,e,n,c),y(a),b(a);var u=e.document.getElementById(n);return u?r.webkitNamespaceBugWorkaround(u.innerHTML):r.webkitNamespaceBugWorkaround(e.document.body.innerHTML)}function g(t,e,n,o){u.setPrefix(n),Z.document=i.bootstrap(e,n,u.get(),s.getMarkerDefs(u.get(),t),o),Z.mirrorEntitiesOnBottom=Boolean(o.mirrorEntitiesOnBottom),r.init(Z.document),Z.layer=v(Z.document),Z.maxDepth=t.depth,x(Z,t.options)}function y(t){I(t.entities),c.clear(l.getDims().height,Z.arcRowHeight),j(t.arcs,t.entities),Z.mirrorEntitiesOnBottom&&T()}function b(t){var e=w(t);C(e),_(t.options,e),A(e)}function v(t){return{defs:t.getElementById(u.get("__defs")),lifeline:t.getElementById(u.get("__lifelinelayer")),sequence:t.getElementById(u.get("__sequencelayer")),notes:t.getElementById(u.get("__notelayer")),inline:t.getElementById(u.get("__arcspanlayer")),watermark:t.getElementById(u.get("__watermark"))}}function m(t,e){t.arcRowHeight=K,t.arcGradient=$,t.wordWrapArcs=!1,e&&(e.arcgradient&&(t.arcRowHeight=parseInt(e.arcgradient,10)+K,t.arcGradient=parseInt(e.arcgradient,10)+$),
t.wordWrapArcs=Boolean(e.wordwraparcs))}function x(t,e){l.init(e&&e.hscale),m(t,e)}function w(t){var e=n.determineDepthCorrection(t.depth,p.LINE_WIDTH),r=c.getLast(),i={width:t.entities.length*l.getDims().interEntitySpacing+e,height:Boolean(Z.mirrorEntitiesOnBottom)?2*l.getDims().height+r.y+r.height+2*V:r.y+r.height/2+2*V,horizontaltransform:(l.getDims().interEntitySpacing+e-l.getDims().width)/2,autoscale:!!t.options&&!!t.options.width&&"auto"===t.options.width,verticaltransform:V,scale:1};return i.x=0-i.horizontaltransform,i.y=0-i.verticaltransform,i}function C(e){Z.document.getElementById(u.get("__background")).appendChild(t.createRect(e,"bglayer"))}function k(e,r){Z.layer.watermark.appendChild(t.createDiagonalText(e,r,"watermark"))}function _(t,e){t&&(t.watermark&&k(t.watermark,e),t.width&&"auto"!==t.width&&n.scaleCanvasToWidth(t.width,e))}function A(t){var r=Z.document.getElementById(u.get()),n=Z.document.getElementById(u.get("__body"));n.setAttribute("transform","translate("+t.horizontaltransform+","+t.verticaltransform+") scale("+t.scale+","+t.scale+")"),t.autoscale&&t.autoscale===!0?e.setAttributes(r,{width:"100%",height:"100%",viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()}):e.setAttributes(r,{width:t.width.toString(),height:t.height.toString()})}function E(t){var e=t[0],n=2;return t.forEach(function(t){var r=l.getNoEntityLines(t.label);r>n&&(n=r,e=t)}),n>2?Math.max(l.getDims().height,r.getBBox(L(e)).height):l.getDims().height}function L(e,r){var n=t.createGroup(u.get(e.name)),i=l.getDims();return i.x=r?r:0,n.appendChild(t.createRect(i,"entity",e.linecolor,e.textbgcolor)),n.appendChild(d.createLabel(e,{x:i.x,y:i.height/2,width:i.width},{kind:"entity"})),n}function T(){var e=c.getLast().y+(c.getLast().height+Z.arcRowHeight)/2;Z.layer.lifeline.appendChild(t.createUse({x:0,y:e},u.get("arcrow"))),Z.layer.sequence.appendChild(t.createUse({x:0,y:e+Z.arcRowHeight/2},u.get("entities")))}function I(e){var r=0,n=t.createGroup(u.get("entities"));e&&(l.setHeight(E(e)+2*p.LINE_WIDTH),e.forEach(function(t){n.appendChild(L(t,r)),l.setX(t,r),r+=l.getDims().interEntitySpacing}),Z.layer.defs.appendChild(n),Z.layer.sequence.appendChild(t.createUse({x:0,y:0},u.get("entities")))),Z.arcEndX=r-l.getDims().interEntitySpacing+l.getDims().width}function S(t,e,r,n){var i=0,o=t.label,a=l.getX(t.from);t.label="",e.forEach(function(e,o){e.name!==t.from&&(i=l.getX(e.name),Z.layer.defs.appendChild(X(r+"bc"+o,t,a,i)),n.push({id:r+"bc"+o,layer:Z.layer.sequence}))}),t.label=o}function D(t,e,r,n){var i={};return t.from&&t.to&&("*"===t.to?(S(t,e,r,n),i=d.createLabel(t,{x:0,y:0,width:Z.arcEndX},{alignAround:!0,ownBackground:!0,wordWrapArcs:Z.wordWrapArcs},r+"_lbl"),n.push({id:r+"_lbl",layer:Z.layer.sequence})):(i=X(r,t,l.getX(t.from),l.getX(t.to)),n.push({id:r,layer:Z.layer.sequence}))),i}function N(e,n,i){var o="arcrow",s=[];e.forEach(function(t,e){var d=u.get(n.toString()+"_"+e.toString()),f={};switch(a.getAggregate(t.kind)){case"emptyarc":f=W(t,d),"..."===t.kind&&(o="arcrowomit"),s.push({id:d,layer:Z.layer.sequence});break;case"box":f=P(d,l.getOAndD(t.from,t.to),t),s.push({id:d,layer:Z.layer.notes});break;case"inline_expression":f=B(d+"_label",t),s.push({id:d+"_label",layer:Z.layer.notes}),Y.push({id:d,arc:t,rownum:n});break;default:f=D(t,i,d,s)}c.set(n,Math.max(c.get(n).height,r.getBBox(f).height+2*p.LINE_WIDTH)),Z.layer.defs.appendChild(f)});var d="arcrow_"+n.toString();Z.layer.defs.appendChild(O(i,o,c.get(n).height,u.get(d))),Z.layer.lifeline.appendChild(t.createUse({x:0,y:c.get(n).y},u.get(d))),s.forEach(function(e){e.layer.appendChild(t.createUse({x:0,y:c.get(n).y},e.id))})}function j(e,r){if(Y=[],Z.layer.defs.appendChild(O(r,"arcrow",null,u.get("arcrow"))),Z.layer.lifeline.appendChild(t.createUse({x:0,y:c.get(-1).y},u.get("arcrow"))),e){for(var n=0;n<e.length;n++)N(e[n],n,r);F(Y)}}function B(e,n){var i=l.getOAndD(n.from,n.to),o=7,a=2*Z.maxDepth*p.LINE_WIDTH,c=i.to-i.from+(l.getDims().interEntitySpacing-2*p.LINE_WIDTH)-o-p.LINE_WIDTH,u=i.from-(l.getDims().interEntitySpacing-3*p.LINE_WIDTH-a)/2-2*(Z.maxDepth-n.depth)*p.LINE_WIDTH,s=t.createGroup(e);n.label=n.kind+(n.label?": "+n.label:"");var f=d.createLabel(n,{x:u+p.LINE_WIDTH-c/2,y:Z.arcRowHeight/4,width:c},{alignLeft:!0,ownBackground:!1,wordWrapArcs:Z.wordWrapArcs}),h=r.getBBox(f),g=Math.max(h.height+2*p.LINE_WIDTH,Z.arcRowHeight/2-2*p.LINE_WIDTH),y=Math.min(h.width+2*p.LINE_WIDTH,c),b=t.createEdgeRemark({width:y-p.LINE_WIDTH+o,height:g,x:u,y:0},"box inline_expression_label",n.linecolor,n.textbgcolor,o);return s.appendChild(b),s.appendChild(f),s}function F(e){e.forEach(function(e){Z.layer.defs.appendChild(H(e)),Z.layer.inline.appendChild(t.createUse({x:0,y:c.get(e.rownum).y},e.id))})}function H(t){var e=c.get(t.rownum).y,r=c.get(t.rownum+t.arc.numberofrows+1).y,n=r-e;return t.arc.label="",U(t.id,l.getOAndD(t.arc.from,t.arc.to),t.arc,n)}function O(e,r,n,i){i||(i=r),(!n||n<Z.arcRowHeight)&&(n=Z.arcRowHeight);var o=t.createGroup(i);return e.forEach(function(e){var i=t.createLine({xFrom:l.getX(e.name),yFrom:0-n/2,xTo:l.getX(e.name),yTo:n/2},{"class":r});e.linecolor&&i.setAttribute("style","stroke:"+e.linecolor+";"),o.appendChild(i)}),o}function R(e,r,n,i,o){var c=2*(Z.arcRowHeight/5),d=l.getDims().interEntitySpacing/2,f={},h="arc "+a.getAggregateClass(e)+" "+a.getClass(e);if(i){f=t.createGroup();var g=t.createUTurn({x:r,y:c/2},n+c-2*p.LINE_WIDTH,d-2*p.LINE_WIDTH,h,"::"!==e),y=t.createUTurn({x:r,y:c/2},n+c-p.LINE_WIDTH,d),b=t.createUTurn({x:r,y:c/2},n+c,d,h,"::"!==e);Boolean(o)&&g.setAttribute("style","stroke:"+o),s.getAttributes(u.get(),e,o,r,r).forEach(function(t){y.setAttribute(t.name,t.value)}),y.setAttribute("style","stroke:transparent;"),Boolean(o)&&b.setAttribute("style","stroke:"+o),f.appendChild(g),f.appendChild(b),f.appendChild(y),f.setAttribute("class",h)}else f=t.createUTurn({x:r,y:c/2},n+c,d,h,"-x"===e),s.getAttributes(u.get(),e,o,r,r).forEach(function(t){f.setAttribute(t.name,t.value)});return f}function W(t,e){return"---"===t.kind?z(e,t,l.getOAndD(t.from,t.to)):q(e,t,l.getOAndD(t.from,t.to))}function M(t){return t.arcskip?t.arcskip*Z.arcRowHeight:0}function G(t){return"<:>"===t?"bidi ":"::"===t?"nodi ":""}function X(e,r,i,o){var c=t.createGroup(e),f="arc ";f+=G(r.kind),f+=a.getAggregateClass(r.kind)+" "+a.getClass(r.kind);var h=[":>","::","<:>"].indexOf(r.kind)>-1,g=M(r),y=0===g?Z.arcGradient:g;if(o=n.determineArcXTo(r.kind,i,o),i===o){c.appendChild(R(r.kind,i,g,h,r.linecolor));var b=2*l.getDims().interEntitySpacing/3;c.appendChild(d.createLabel(r,{x:i+1.5*p.LINE_WIDTH-b/2,y:0-Z.arcRowHeight/5-p.LINE_WIDTH/2,width:b},{alignLeft:!0,alignAbove:!0,ownBackground:!0,wordWrapArcs:Z.wordWrapArcs}))}else{var v=t.createLine({xFrom:i,yFrom:0,xTo:o,yTo:y},{"class":f,doubleLine:h});s.getAttributes(u.get(),r.kind,r.linecolor,i,o).forEach(function(t){v.setAttribute(t.name,t.value)}),c.appendChild(v),c.appendChild(d.createLabel(r,{x:i,y:0,width:o-i},{alignAround:!0,ownBackground:!0,wordWrapArcs:Z.wordWrapArcs}))}return c}function q(e,r,n){var i=0,o=Z.arcEndX,a=t.createGroup(e);return r.from&&r.to&&(i=n.from,o=n.to-n.from),a.appendChild(d.createLabel(r,{x:i,y:0,width:o},{ownBackground:!0,wordWrapArcs:Z.wordWrapArcs},e+"_lbl")),a}function z(e,r,n){var i=0,o=Z.arcEndX,a="comment",c=t.createGroup(e);if(r.from&&r.to){var u=1*Z.maxDepth*p.LINE_WIDTH,s=2*(Z.maxDepth-r.depth)*p.LINE_WIDTH;i=n.from-(l.getDims().interEntitySpacing+2*p.LINE_WIDTH)/2-(s-u),o=n.to+(l.getDims().interEntitySpacing+2*p.LINE_WIDTH)/2+(s-u),a="inline_expression_divider"}var d=t.createLine({xFrom:i,yFrom:0,xTo:o,yTo:0},{"class":a});return c.appendChild(d),c.appendChild(q(e+"_txt",r,n)),r.linecolor&&d.setAttribute("style","stroke:"+r.linecolor+";"),c}function U(e,r,n,i){var o=2*Z.maxDepth*p.LINE_WIDTH,a=r.to-r.from+l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o,c=r.from-(l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o)/2,u=t.createGroup(e),s=2*(Z.maxDepth-n.depth)*p.LINE_WIDTH;return u.appendChild(t.createRect({width:a+2*s,height:i?i:Z.arcRowHeight-2*p.LINE_WIDTH,x:c-s,y:0},"box inline_expression "+n.kind,n.linecolor,n.textbgcolor)),u}function P(e,n,i){var o=2*Z.maxDepth*p.LINE_WIDTH,a=n.to-n.from+l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o,c=n.from-(l.getDims().interEntitySpacing-2*p.LINE_WIDTH-o)/2,u=t.createGroup(e),s={},f=d.createLabel(i,{x:c,y:0,width:a}),h=r.getBBox(f),g=Math.max(h.height+2*p.LINE_WIDTH,Z.arcRowHeight-2*p.LINE_WIDTH),y={width:a,height:g,x:c,y:0-g/2};switch(i.kind){case"rbox":s=t.createRBox(y,"box rbox",i.linecolor,i.textbgcolor);break;case"abox":s=t.createABox(y,"box abox",i.linecolor,i.textbgcolor);break;case"note":s=t.createNote(y,"box note",i.linecolor,i.textbgcolor);break;default:s=t.createRect(y,"box",i.linecolor,i.textbgcolor)}return u.appendChild(s),u.appendChild(f),u}var V=3,K=38,$=0,Z=Object.seal({arcRowHeight:K,arcGradient:$,arcEndX:0,wordWrapArcs:!1,mirrorEntitiesOnBottom:!1,maxDepth:0,document:{},layer:{defs:{},lifeline:{},sequence:{},notes:{},inline:{},watermark:{}}}),Y=[];return{clean:function(t,e){Z.document=i.init(e),r.init(Z.document),r.removeRenderedSVGFromElement(t)},renderAST:function(t,e,r,n,i){return h(t,n,r,{source:e,styleAdditions:i})},renderASTNew:h}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(5)],i=function(t){"use strict";function e(t,e,r){return r&&t.setAttribute(e,r),t}function r(t,r){return r&&Object.keys(r).forEach(function(n){e(t,n,r[n])}),t}function n(e,n){return r(i.createElementNS(t.SVGNS,e),n)}var i={};return{init:function(t){i=t},setAttribute:e,setAttributes:r,createElement:n}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";return{SVGNS:"http://www.w3.org/2000/svg",XLINKNS:"http://www.w3.org/1999/xlink",LINE_WIDTH:2,FONT_SIZE:12}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(5),r(7),r(8),r(4),r(10)],i=function(t,e,r,n,i){"use strict";function o(t){var n=r.createSVG(t,e.get());return f.body.appendChild(n),n}function a(t){var e=f.getElementById(h);e=e?e:o(h),e.appendChild(t);var r=t.getBBox();return e.removeChild(t),r}function c(t){var e=1e5;return Math.abs(t.height)>e||Math.abs(t.width)>e?{height:0,width:0,x:0,y:0}:t}function u(t){return"function"==typeof t.getBBox?c(a(t)):{height:15,width:15,x:2,y:2}}function s(e){var r=f.createElementNS(t.SVGNS,"tspan");return r.appendChild(f.createTextNode(e)),r}function l(t){var e=n.createElement("text",{x:"0",y:"0"});return e.appendChild(s(t)),e}function d(){return u(l("jy9@")).height}function p(t){e.setPrefix(t);var r=f.getElementById(e.get());if(r){var n=f.getElementById(t);n?n.removeChild(r):f.body.removeChild(r)}}var f={},h=e.get("bboxer");return{init:function(t){f=t},removeRenderedSVGFromElement:p,getBBox:u,calculateTextHeight:i.memoize(d),webkitNamespaceBugWorkaround:function(t){return t.replace(/ xlink=/g," xmlns:xlink=","g").replace(/ href=/g," xlink:href=","g")}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";var t="mscgen_js-svg-",e=t;return{setPrefix:function(r){e=t+r},get:function(t){return e+(t||"")}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(5),r(4),r(9),r(10)],i=function(t,e,r,n){"use strict";function i(t,e){return t.toString()+","+e.toString()+" "}function o(t,e,r){return t+i(e,r)}function a(t,r,n,i){return u(e.createElement("path",{d:t,"class":r}),n,i)}function c(t,r){return e.createElement("polygon",{points:t,"class":r})}function u(t,r,n){var i="";return n&&(i+="fill:"+n+";"),r&&(i+="stroke:"+r+";"),e.setAttribute(t,"style",i)}function s(t,r){return e.createElement("line",{x1:t.xFrom.toString(),y1:t.yFrom.toString(),x2:t.xTo.toString(),y2:t.yTo.toString(),"class":r?r["class"]:null})}function l(e,r){var n=b.createElementNS(t.SVGNS,"a");return n.setAttributeNS(t.XLINKNS,"xlink:href",e),n.setAttributeNS(t.XLINKNS,"xlink:title",e),n.setAttributeNS(t.XLINKNS,"xlink:show","new"),n.appendChild(r),n}function d(e,r){var n=b.createElementNS(t.SVGNS,"tspan"),i=b.createTextNode(e);return n.appendChild(i),r?l(r,n):n}function p(t,r,i){var o=n.defaults(i,{"class":null,url:null,id:null,idurl:null}),a=e.createElement("text",{x:r.x.toString(),y:r.y.toString(),"class":o["class"]});if(a.appendChild(d(t,o.url)),o.id){var c=d(" ["+o.id+"]",o.idurl);c.setAttribute("style",v),a.appendChild(c)}return a}function f(e,r){var n=0;return r.indexOf("nodi")<0&&(n=e.xTo>e.xFrom?-7.5*t.LINE_WIDTH:7.5*t.LINE_WIDTH),n}function h(e,r){var n=0;return r.indexOf("nodi")<0&&r.indexOf("bidi")>-1&&(n=e.xTo>e.xFrom?7.5*t.LINE_WIDTH:-7.5*t.LINE_WIDTH),n}function g(e,n){var i=t.LINE_WIDTH,c=n?n["class"]:null,u=r.getDirection(e),s=f(e,c),l=h(e,c),d=(e.xTo-e.xFrom+s-l).toString(),p=(e.yTo-e.yFrom).toString(),g=o("l",u.signX,u.dy),y=o("l",d,p);return a(o("M",e.xFrom,e.yFrom-7.5*t.LINE_WIDTH*u.dy)+g+o("M",e.xFrom+l,e.yFrom-i)+y+o("M",e.xFrom+l,e.yFrom+i)+y+o("M",e.xTo-u.signX,e.yTo+7.5*t.LINE_WIDTH*u.dy)+g,c)}function y(t,r,n,i){return e.createElement("marker",{orient:n,id:t,"class":r,viewBox:Boolean(i)?i:"0 0 10 10",refX:"9",refY:"3",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10"})}var b={},v="vertical-align:text-top;";return v+="font-size:0.7em;text-anchor:start;",{init:function(t){b=t,e.init(t)},createSVG:function(r,n){return e.createElement("svg",{version:"1.1",id:r,"class":n,xmlns:t.SVGNS,"xmlns:xlink":t.XLINKNS,width:"0",height:"0"})},createDesc:function(t){return e.createElement("desc",{id:t})},createDefs:function(){return e.createElement("defs")},createRect:function(t,r,n,i){return u(e.createElement("rect",{width:t.width,height:t.height,x:t.x,y:t.y,"class":r}),n,i)},createRBox:function(t,r,n,i){var o=6;return u(e.createElement("rect",{width:t.width,height:t.height,x:t.x,y:t.y,rx:o,ry:o,"class":r}),n,i)},createABox:function(t,e,r,n){var i=3;return a("M"+t.x+","+(t.y+t.height/2)+"l"+i+", -"+t.height/2+"l"+(t.width-2*i)+",0l"+i+","+t.height/2+"l-"+i+","+t.height/2+"l-"+(t.width-2*i)+",0 z",e,r,n)},createNote:function(e,r,n,i){var o=Math.max(9,Math.min(4.5*t.LINE_WIDTH,e.height/2)),c=o.toString(10);return a("M"+e.x+","+e.y+"l"+(e.width-o)+",0 l0,"+c+" l"+c+",0 m-"+c+",-"+c+" l"+c+","+c+" l0,"+(e.height-o)+" l-"+e.width+",0 l0,-"+e.height+" z",r,n,i)},createEdgeRemark:function(t,e,r,n,i){var o=i?i:7;return a("M"+t.x+","+t.y+" l"+t.width+",0  l0,"+(t.height-o)+" l-"+o.toString(10)+","+o.toString(10)+" l-"+(t.width-o)+",0 ",e,r,n)},createText:p,createDiagonalText:function(t,n,i){return e.setAttributes(p(t,{x:n.width/2,y:n.height/2},{"class":i}),{transform:"rotate("+r.getDiagonalAngle(n).toString()+" "+(n.width/2).toString()+" "+(n.height/2).toString()+")"})},createLine:function(t,e){return Boolean(e)&&Boolean(e.doubleLine)?g(t,e):s(t,e)},createUTurn:function(e,r,n,c,u){var s=u?e.x+7.5*t.LINE_WIDTH:e.x;return a(o("M",e.x,-e.y)+o("C",e.x+n,e.y-7.5*t.LINE_WIDTH)+i(e.x+n,r+0)+i(s,r),c)},createGroup:function(t,r){return e.createElement("g",{id:t,"class":r})},createUse:function(r,n){var i=e.createElement("use",{x:r.x.toString(),y:r.y.toString()});return i.setAttributeNS(t.XLINKNS,"xlink:href","#"+n),i},createMarkerPath:function(t,r,n){var i=y(t,"arrow-marker","auto");return i.appendChild(e.setAttributes(a(r,"arrow-style"),{style:"stroke-dasharray:100,1;stroke:"+n||"black"})),i},createMarkerPolygon:function(t,r,n){var i=y(t,"arrow-marker","auto");return i.appendChild(e.setAttributes(c(r,"arrow-style"),{stroke:n||"black",fill:n||"black"})),i}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";function t(t){return 360*t/(2*Math.PI)}function e(t){var e=Math.abs(t.xTo-t.xFrom),r=Math.abs(t.yTo-t.yFrom);return Math.sqrt(e*e+r*r)}function r(t,r){var n=e(t);return n>0?Math.floor(n/r):0}function n(t){var e=t.xTo>t.xFrom?1:-1;return{signX:e,signY:t.yTo>t.yFrom?1:-1,dy:e*(t.yTo-t.yFrom)/(t.xTo-t.xFrom)}}function i(t){return Math.round(2*Math.random()*t)-t}function o(t,o,a){if(o<=0)throw new Error("pInterval must be > 0");o=Math.min(e(t),o);for(var c=[],u=r(t,o),s=n(t),l=s.signX*Math.sqrt(Math.pow(o,2)/(1+Math.pow(s.dy,2))),d=s.signY*(Math.abs(s.dy)===1/0?o:Math.sqrt(Math.pow(s.dy,2)*Math.pow(o,2)/(1+Math.pow(s.dy,2)))),p={},f=1;f<=u;f++)p={controlX:t.xFrom+(f-.5)*l+i(a),controlY:t.yFrom+(f-.5)*d+i(a),x:t.xFrom+f*l,y:t.yFrom+f*d},o>e({xFrom:p.x,yFrom:p.y,xTo:t.xTo,yTo:t.yTo})&&(p.x=t.xTo,p.y=t.yTo),c.push(p);return c}return{getDiagonalAngle:function(e){return 0-t(Math.atan(e.height/e.width))},getDirection:n,getLineLength:e,getNumberOfSegments:r,getBetweenPoints:o}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n;(function(t,i){(function(){function o(t,e){return t.set(e[0],e[1]),t}function a(t,e){return t.add(e),t}function c(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function u(t,e){for(var r=-1,n=t?t.length:0;++r<n&&e(t[r],r,t)!==!1;);return t}function s(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function l(t,e,r,n){var i=-1,o=t?t.length:0;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function d(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function p(t,e){return null==t?zt:t[e]}function f(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}function h(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function g(t,e){return function(r){return t(e(r))}}function y(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function b(){}function v(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function m(){this.__data__=or?or(null):{}}function x(t){return this.has(t)&&delete this.__data__[t]}function w(t){var e=this.__data__;if(or){var r=e[t];return r===Kt?zt:r}return We.call(e,t)?e[t]:zt}function C(t){var e=this.__data__;return or?e[t]!==zt:We.call(e,t)}function k(t,e){var r=this.__data__;return r[t]=or&&e===zt?Kt:e,this}function _(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function A(){this.__data__=[]}function E(t){var e=this.__data__,r=U(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ke.call(e,r,1),!0}function L(t){var e=this.__data__,r=U(e,t);return r<0?zt:e[r][1]}function T(t){return U(this.__data__,t)>-1}function I(t,e){var r=this.__data__,n=U(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}function S(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function D(){this.__data__={hash:new v,map:new(er||_),string:new v}}function N(t){return gt(this,t)["delete"](t)}function j(t){return gt(this,t).get(t)}function B(t){return gt(this,t).has(t)}function F(t,e){return gt(this,t).set(t,e),this}function H(t){this.__data__=new _(t)}function O(){this.__data__=new _}function R(t){return this.__data__["delete"](t)}function W(t){return this.__data__.get(t)}function M(t){return this.__data__.has(t)}function G(t,e){var r=this.__data__;if(r instanceof _){var n=r.__data__;if(!er||n.length<Pt-1)return n.push([t,e]),this;r=this.__data__=new S(n)}return r.set(t,e),this}function X(t,e){var r=gr(t)||Wt(t)||Nt(t)?d(t.length,String):[],n=r.length,i=!!n;for(var o in t)!e&&!We.call(t,o)||i&&("length"==o||wt(o,n))||r.push(o);return r}function q(t,e,r,n){return t===zt||Dt(t,Fe[r])&&!We.call(n,r)?e:t}function z(t,e,r){var n=t[e];We.call(t,e)&&Dt(n,r)&&(r!==zt||e in t)||(t[e]=r)}function U(t,e){for(var r=t.length;r--;)if(Dt(t[r][0],e))return r;return-1}function P(t,e){return t&&dt(e,Mt(e),t)}function V(t,e,r,n,i,o,a){var c;if(n&&(c=o?n(t,i,o,a):n(t)),c!==zt)return c;if(!Ot(t))return t;var s=gr(t);if(s){if(c=bt(t),!e)return lt(t,c)}else{var l=hr(t),d=l==ee||l==re;if(yr(t))return rt(t,e);if(l==oe||l==Zt||d&&!o){if(f(t))return o?t:{};if(c=vt(d?{}:t),!e)return pt(t,P(c,t))}else{if(!Le[l])return o?t:{};c=mt(t,l,V,e)}}a||(a=new H);var p=a.get(t);if(p)return p;if(a.set(t,c),!s)var h=r?ht(t):Mt(t);return u(h||t,function(i,o){h&&(o=i,i=t[o]),z(c,o,V(i,e,r,n,o,t,a))}),c}function K(t){return Ot(t)?Pe(t):{}}function $(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=xt),i||(i=[]);++o<a;){var c=t[o];e>0&&r(c)?e>1?$(c,e-1,r,n,i):s(i,c):n||(i[i.length]=c)}return i}function Z(t,e,r){var n=e(t);return gr(t)?n:s(n,r(t))}function Y(t){return Me.call(t)}function J(t){if(!Ot(t)||_t(t))return!1;var e=Ft(t)||f(t)?Ge:Ae;return e.test(Lt(t))}function Q(t){if(!At(t))return Je(t);var e=[];for(var r in Object(t))We.call(t,r)&&"constructor"!=r&&e.push(r);return e}function tt(t){if(!Ot(t))return Et(t);var e=At(t),r=[];for(var n in t)("constructor"!=n||!e&&We.call(t,n))&&r.push(n);return r}function et(t,e){return e=Qe(e===zt?t.length-1:e,0),function(){for(var r=arguments,n=-1,i=Qe(r.length-e,0),o=Array(i);++n<i;)o[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=o,c(t,this,a)}}function rt(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}function nt(t){var e=new t.constructor(t.byteLength);return new ze(e).set(new ze(t)),e}function it(t,e){var r=e?nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function ot(t,e,r){var n=e?r(h(t),!0):h(t);return l(n,o,new t.constructor)}function at(t){var e=new t.constructor(t.source,_e.exec(t));return e.lastIndex=t.lastIndex,e}function ct(t,e,r){var n=e?r(y(t),!0):y(t);return l(n,a,new t.constructor)}function ut(t){return pr?Object(pr.call(t)):{}}function st(t,e){var r=e?nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function lt(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function dt(t,e,r,n){r||(r={});for(var i=-1,o=e.length;++i<o;){var a=e[i],c=n?n(r[a],t[a],a,r,t):zt;z(r,a,c===zt?t[a]:c)}return r}function pt(t,e){return dt(t,fr(t),e)}function ft(t){return et(function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:zt,a=i>2?r[2]:zt;for(o=t.length>3&&"function"==typeof o?(i--,o):zt,a&&Ct(r[0],r[1],a)&&(o=i<3?zt:o,i=1),e=Object(e);++n<i;){var c=r[n];c&&t(e,c,n,o)}return e})}function ht(t){return Z(t,Mt,fr)}function gt(t,e){var r=t.__data__;return kt(e)?r["string"==typeof e?"string":"hash"]:r.map}function yt(t,e){var r=p(t,e);return J(r)?r:zt}function bt(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&We.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function vt(t){return"function"!=typeof t.constructor||At(t)?{}:K(Ue(t))}function mt(t,e,r,n){var i=t.constructor;switch(e){case pe:return nt(t);case Jt:case Qt:return new i((+t));case fe:return it(t,n);case he:case ge:case ye:case be:case ve:case me:case xe:case we:case Ce:return st(t,n);case ne:return ot(t,n,r);case ie:case se:return new i(t);case ce:return at(t);case ue:return ct(t,n,r);case le:return ut(t)}}function xt(t){return gr(t)||Nt(t)||!!($e&&t&&t[$e])}function wt(t,e){return e=null==e?$t:e,!!e&&("number"==typeof t||Ee.test(t))&&t>-1&&t%1==0&&t<e}function Ct(t,e,r){if(!Ot(r))return!1;var n=typeof e;return!!("number"==n?jt(r)&&wt(e,r.length):"string"==n&&e in r)&&Dt(r[e],t)}function kt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function _t(t){return!!Oe&&Oe in t}function At(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||Fe;return t===r}function Et(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function Lt(t){if(null!=t){try{return Re.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Tt(t){var e=t?t.length:0;return e?$(t,1):[]}function It(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(Vt);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a),a};return r.cache=new(It.Cache||S),r}function St(t){return V(t,!0,!0)}function Dt(t,e){return t===e||t!==t&&e!==e}function Nt(t){return Bt(t)&&We.call(t,"callee")&&(!Ve.call(t,"callee")||Me.call(t)==Zt)}function jt(t){return null!=t&&Ht(t.length)&&!Ft(t)}function Bt(t){return Rt(t)&&jt(t)}function Ft(t){var e=Ot(t)?Me.call(t):"";return e==ee||e==re}function Ht(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=$t}function Ot(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Rt(t){return!!t&&"object"==typeof t}function Wt(t){return"string"==typeof t||!gr(t)&&Rt(t)&&Me.call(t)==se}function Mt(t){return jt(t)?X(t):Q(t)}function Gt(t){return jt(t)?X(t,!0):tt(t)}function Xt(){return[]}function qt(){return!1}var zt,Ut="4.14.2",Pt=200,Vt="Expected a function",Kt="__lodash_hash_undefined__",$t=9007199254740991,Zt="[object Arguments]",Yt="[object Array]",Jt="[object Boolean]",Qt="[object Date]",te="[object Error]",ee="[object Function]",re="[object GeneratorFunction]",ne="[object Map]",ie="[object Number]",oe="[object Object]",ae="[object Promise]",ce="[object RegExp]",ue="[object Set]",se="[object String]",le="[object Symbol]",de="[object WeakMap]",pe="[object ArrayBuffer]",fe="[object DataView]",he="[object Float32Array]",ge="[object Float64Array]",ye="[object Int8Array]",be="[object Int16Array]",ve="[object Int32Array]",me="[object Uint8Array]",xe="[object Uint8ClampedArray]",we="[object Uint16Array]",Ce="[object Uint32Array]",ke=/[\\^$.*+?()[\]{}|]/g,_e=/\w*$/,Ae=/^\[object .+?Constructor\]$/,Ee=/^(?:0|[1-9]\d*)$/,Le={};Le[Zt]=Le[Yt]=Le[pe]=Le[fe]=Le[Jt]=Le[Qt]=Le[he]=Le[ge]=Le[ye]=Le[be]=Le[ve]=Le[ne]=Le[ie]=Le[oe]=Le[ce]=Le[ue]=Le[se]=Le[le]=Le[me]=Le[xe]=Le[we]=Le[Ce]=!0,Le[te]=Le[ee]=Le[de]=!1;var Te="object"==typeof t&&t&&t.Object===Object&&t,Ie="object"==typeof self&&self&&self.Object===Object&&self,Se=Te||Ie||Function("return this")(),De="object"==typeof e&&e&&!e.nodeType&&e,Ne=De&&"object"==typeof i&&i&&!i.nodeType&&i,je=Ne&&Ne.exports===De,Be=Array.prototype,Fe=Object.prototype,He=Se["__core-js_shared__"],Oe=function(){var t=/[^.]+$/.exec(He&&He.keys&&He.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Re=Function.prototype.toString,We=Fe.hasOwnProperty,Me=Fe.toString,Ge=RegExp("^"+Re.call(We).replace(ke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xe=je?Se.Buffer:zt,qe=Se.Symbol,ze=Se.Uint8Array,Ue=g(Object.getPrototypeOf,Object),Pe=Object.create,Ve=Fe.propertyIsEnumerable,Ke=Be.splice,$e=qe?qe.isConcatSpreadable:zt,Ze=Object.getOwnPropertySymbols,Ye=Xe?Xe.isBuffer:zt,Je=g(Object.keys,Object),Qe=Math.max,tr=yt(Se,"DataView"),er=yt(Se,"Map"),rr=yt(Se,"Promise"),nr=yt(Se,"Set"),ir=yt(Se,"WeakMap"),or=yt(Object,"create"),ar=Lt(tr),cr=Lt(er),ur=Lt(rr),sr=Lt(nr),lr=Lt(ir),dr=qe?qe.prototype:zt,pr=dr?dr.valueOf:zt;v.prototype.clear=m,v.prototype["delete"]=x,v.prototype.get=w,v.prototype.has=C,v.prototype.set=k,_.prototype.clear=A,_.prototype["delete"]=E,_.prototype.get=L,_.prototype.has=T,_.prototype.set=I,S.prototype.clear=D,S.prototype["delete"]=N,S.prototype.get=j,S.prototype.has=B,S.prototype.set=F,H.prototype.clear=O,H.prototype["delete"]=R,H.prototype.get=W,H.prototype.has=M,H.prototype.set=G;var fr=Ze?g(Ze,Object):Xt,hr=Y;(tr&&hr(new tr(new ArrayBuffer(1)))!=fe||er&&hr(new er)!=ne||rr&&hr(rr.resolve())!=ae||nr&&hr(new nr)!=ue||ir&&hr(new ir)!=de)&&(hr=function(t){var e=Me.call(t),r=e==oe?t.constructor:zt,n=r?Lt(r):zt;if(n)switch(n){case ar:return fe;case cr:return ne;case ur:return ae;case sr:return ue;case lr:return de}return e}),It.Cache=S;var gr=Array.isArray,yr=Ye||qt,br=ft(function(t,e,r,n){dt(e,Gt(e),t,n)}),vr=et(function(t){return t.push(zt,q),c(br,zt,t)});b.assignInWith=br,b.defaults=vr,b.flatten=Tt,b.keys=Mt,b.keysIn=Gt,b.memoize=It,b.extendWith=br,b.cloneDeep=St,b.eq=Dt,b.isArguments=Nt,b.isArray=gr,b.isArrayLike=jt,b.isArrayLikeObject=Bt,b.isBuffer=yr,b.isFunction=Ft,b.isLength=Ht,b.isObject=Ot,b.isObjectLike=Rt,b.isString=Wt,b.stubArray=Xt,b.stubFalse=qt,b.VERSION=Ut,Se._=b,n=function(){return b}.call(e,r,e,i),!(n!==zt&&(i.exports=n))}).call(this)}).call(e,function(){return this}(),r(11)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,r){var n,i;n=[],i=function(){"use strict";return{scaleCanvasToWidth:function(t,e){e.scale=t/e.width,e.width*=e.scale,e.height*=e.scale,e.horizontaltransform*=e.scale,e.verticaltransform*=e.scale,e.x=0-e.horizontaltransform,e.y=0-e.verticaltransform},determineDepthCorrection:function(t,e){return t?2*(2*(t+1)*e):0},determineArcXTo:function(t,e,r){return"-x"===t?e+.75*(r-e):r}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(8),r(5),r(14)],i=function(t,e,r){"use strict";function n(e,r){return r.forEach(function(r){"method"===r.type?e.appendChild(t.createMarkerPolygon(r.name,r.path,r.color)):e.appendChild(t.createMarkerPath(r.name,r.path,r.color))}),e}function i(t,e){var r=p.createElement("style");return r.setAttribute("type","text/css"),r.appendChild(p.createTextNode(d(t,e))),r}function o(e,r,o){var a=t.createDefs();return a.appendChild(i(o,e)),a=n(a,r),a.appendChild(t.createGroup(e+"__defs")),a}function a(e){var r=t.createGroup(e+"__body");return r.appendChild(t.createGroup(e+"__background")),r.appendChild(t.createGroup(e+"__arcspanlayer")),r.appendChild(t.createGroup(e+"__lifelinelayer")),r.appendChild(t.createGroup(e+"__sequencelayer")),r.appendChild(t.createGroup(e+"__notelayer")),r.appendChild(t.createGroup(e+"__watermark")),r}function c(e){return t.init(e.document),e.document}function u(e,r,n,i,u){p=c(e);var l=p.getElementById(r);null===l&&(l=p.body);var d=t.createSVG(n,n);return d.appendChild(s(e,n,u.source)),d.appendChild(o(n,i,u)),d.appendChild(a(n)),l.appendChild(d),p}function s(e,r,n){var i=t.createDesc(r+"__msc_source");return Boolean(n)&&i.appendChild(e.document.createTextNode("\n\n# Generated by mscgen_js - https://sverweij.github.io/mscgen_js\n"+n)),i}function l(t){var e="",n=[];return Boolean(t)?(Boolean(t.additionalTemplate)&&(n=r.additionalTemplates.filter(function(e){return e.name===t.additionalTemplate}),n.length>0&&(e=n[0].css)),Boolean(t.styleAdditions)&&(e+=t.styleAdditions),e):""}function d(t,n){return(r.baseTemplate+l(t)).replace(/<%=fontSize%>/g,e.FONT_SIZE).replace(/<%=lineWidth%>/g,e.LINE_WIDTH).replace(/<%=id%>/g,n)}var p={};return{bootstrap:u,init:c}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";return{baseTemplate:"svg.<%=id%>{font-family:Helvetica,sans-serif;font-size:<%=fontSize%>px;font-weight:normal;font-style:normal;text-decoration:none;background-color:white;stroke:black;stroke-width:<%=lineWidth%>;color:black}.<%=id%> path, .<%=id%> rect{fill:none;color:black;stroke:black}.<%=id%> .label-text-background{fill:white;stroke:white;stroke-width:0}.<%=id%> .bglayer{fill:white;stroke:white;stroke-width:0}.<%=id%> line{stroke:black}.<%=id%> line.return, .<%=id%> path.return, .<%=id%> line.comment{stroke-dasharray:5,3}.<%=id%> line.inline_expression_divider{stroke-dasharray:10,5}.<%=id%> text{color:inherit;stroke:none;text-anchor:middle}.<%=id%> text.entity-text{text-decoration:underline}.<%=id%> text.anchor-start{text-anchor:start}.<%=id%> .arrow-marker{overflow:visible}.<%=id%> .arrow-style{stroke-width:1}.<%=id%> .arcrow, .<%=id%> .arcrowomit, .<%=id%> .emphasised{stroke-linecap:butt}.<%=id%> line.arcrowomit{stroke-dasharray:2,2;}.<%=id%> .box, .<%=id%> .entity{fill:white;stroke-linejoin:round}.<%=id%> .inherit{stroke:inherit;color:inherit}.<%=id%> .inherit-fill{fill:inherit}.<%=id%> .watermark{stroke:black;color:black;fill:black;font-size:48pt;font-weight:bold;opacity:0.14}",additionalTemplates:[{name:"classic",css:".<%=id%> text.entity-text{text-decoration:none}.<%=id%> rect.entity{stroke:none;}.<%=id%> line,.<%=id%> rect,.<%=id%> path{stroke-width:1px}.<%=id%> .arrow-style{stroke-width:2;}.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke-width: 1px}"},{name:"cygne",css:".<%=id%> line{stroke:#00A1DE}.<%=id%> text{fill:#005B82}.<%=id%> rect.entity,.<%=id%> rect.box,.<%=id%> path.box{fill:#00A1DE;stroke:#00A1DE}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#E77B2F;stroke:white}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> path.inline_expression_label{fill:white}"
},{name:"fountainpen",css:"svg.<%=id%>{font-family:cursive;stroke-opacity:0.4;stroke-linecap:round;background-color:transparent}.<%=id%> text{fill:rgba(0,0,128,0.8)}.<%=id%> marker polygon{fill:rgba(0,0,255,0.4);stroke-linejoin:round}.<%=id%> line, .<%=id%> path, .<%=id%> rect, .<%=id%> polygon{stroke:blue !important}.<%=id%> text.entity-text{font-weight:bold;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC;}.<%=id%> .label-text-background{opacity:0}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke:black}.<%=id%> .bglayer, .<%=id%> .entity{fill:transparent;}"},{name:"grayscaled",css:"svg.<%=id%>{filter:grayscale(1);-webkit-filter:grayscale(1);}"},{name:"inverted",css:"svg.<%=id%>{filter:invert(1);-webkit-filter:invert(1);}"},{name:"lazy",css:".<%=id%> text.entity-text{font-weight:bold;text-decoration:none;}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC}.<%=id%> rect.label-text-background{opacity:0.9}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke:grey}"},{name:"pegasse",css:".<%=id%> line{stroke:rgba(0, 43, 84, 1)}.<%=id%> text{fill:rgba(0, 43, 84, 1)}.<%=id%> rect.entity,.<%=id%> rect.box,.<%=id%> path.box{fill:rgba(0, 43, 84, 1);stroke:rgba(0, 43, 84, 1)}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:rgba(255, 50, 0, 1);stroke:white}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> path.inline_expression_label{fill:white}"}]}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(16),r(17),r(10),r(18)],i=function(t,e,r,n){"use strict";function i(t){"undefined"==typeof t.label&&(t.label=t.name)}function o(t){Boolean(t.label)&&(t.label=n.unescapeString(t.label)),Boolean(t.id)&&(t.id=n.unescapeString(t.id))}function a(t){t.label=Boolean(t.label)?t.label:""}function c(t){if(t.kind&&e.getNormalizedKind(t.kind)!==t.kind){t.kind=e.getNormalizedKind(t.kind);var r=t.from;t.from=t.to,t.to=r}return t}function u(t,e){!t.linecolor&&e.arclinecolor&&(t.linecolor=e.arclinecolor),!t.textcolor&&e.arctextcolor&&(t.textcolor=e.arctextcolor),!t.textbgcolor&&e.arctextbgcolor&&(t.textbgcolor=e.arctextbgcolor)}function s(t,e){if(t&&t.from){var r=e.filter(function(e){return e.name===t.from});r.length>0&&u(t,r[0])}}function l(t){return t.arcs.reduce(function(t,e){return t+(Boolean(e[0].arcs)?l(e[0])+1:0)},t.arcs.length)}function d(t,n,i,o){var a=[],c=[],s=[];return t.forEach(function(t){if("inline_expression"===e.getAggregate(t.kind)){if(t.depth=n,Boolean(t.arcs)){var a=r.cloneDeep(t);a.numberofrows=l(a),delete a.arcs,c.push(a),t.arcs.forEach(function(t){s=s.concat(d(t,n+1,a.from,a.to)),t.forEach(function(t){u(t,a)})}),n>g&&(g=n)}else c.push(t);s.push([{kind:"|||",from:t.from,to:t.to}])}else i&&o&&"emptyarc"===e.getAggregate(t.kind)&&(t.from=i,t.to=o,t.depth=n),c.push(t)}),a.push(c),a.concat(s)}function p(t){var e={};return g=0,Boolean(t.options)&&(e.options=r.cloneDeep(t.options)),Boolean(t.entities)&&(e.entities=r.cloneDeep(t.entities)),e.arcs=[],t&&t.arcs&&t.arcs.forEach(function(t){d(t,0).forEach(function(t){e.arcs.push(t)})}),e.depth=g+1,e}function f(t,e){return t.filter(function(t){return e.from!==t.name}).map(function(t){return e.to=t.name,r.cloneDeep(e)})}function h(t){if(t.entities&&t.arcs){var e=[],n={};t.arcs.forEach(function(i,o){i.filter(function(t){return"*"===t.to}).forEach(function(a,c){n=r.cloneDeep(a),delete t.arcs[o][c],e=f(t.entities,n),i[c]=e.shift(),t.arcs[o]=i.concat(e)})})}return t}var g=0;return{swapRTLArc:c,unwind:p,explodeBroadcasts:h,flatten:function(e){return t.transform(p(e),[i,o],[c,s,o,a])},dotFlatten:function(e){return h(t.transform(e,[i],[c,s]))}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";function t(t,e){t&&e&&t.forEach(function(t){e.forEach(function(e){e(t)})})}function e(t,e,r,n){n&&n.forEach(function(n){n(r,t,e)})}function r(t,r,i){r.forEach(function(o){e(t,r,o,i),o.arcs&&n(t,o.arcs,i)})}function n(t,e,n){t&&e&&n&&e.forEach(function(e){r(t,e,n)})}return{transform:function(e,r,i){return t(e.entities,r),n(e.entities,e.arcs,i),e}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";var t={"->":"rvee","<->":"rvee","=>":"normal","<=>":"normal","-x":"oinvonormal"},e={box:"box",abox:"hexagon",rbox:"box",note:"note"},r={">>":"dashed","<<>>":"dashed","..":"dashed",":>":"bold","<:>":"bold","::":"bold",rbox:"rounded"},n={"|||":"emptyarc","...":"emptyarc","---":"emptyarc","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression","else":"inline_expression",opt:"inline_expression","break":"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"},i={"<-":"->","<=":"=>","<<=":"=>>","<<":">>","<:":":>","x-":"-x"},o={"|||":"empty-row","...":"omitted-row","---":"comment-row","->":"signal","=>":"method","=>>":"callback",">>":"return",":>":"emphasised","-x":"lost","<-":"signal","<=":"method","<<=":"callback","<<":"return","<:":"emphasised","x-":"lost","<->":"signal","<=>":"method","<<=>>":"callback","<<>>":"return","<:>":"emphasised","--":"signal","==":"method","..":"return","::":"emphasised"},a={"|||":"empty","...":"empty","---":"empty","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression","else":"inline_expression",opt:"inline_expression","break":"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"};return{getArrow:function(e){return t[e]},getShape:function(t){return e[t]},getStyle:function(t){return r[t]},getAggregate:function(t){return n[t]},getClass:function(t){return o[t]||t},getAggregateClass:function(t){return a[t]||t},getNormalizedKind:function(t){return i[t]||t}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";return{wrap:function(t,e){for(var r=0,n=[],i=0,o=0,a=0,c=0,u=t.replace(/[\t\n]+/g," ").replace(/\\n/g,"\n");c<=u.length;)c>=u.length?n.push(u.substring(i,c)):"\n"===u[c]?(r=0,a=c,n.push(u.substring(i,a)),i=a+1):r++>=e&&(a=u.substring(0,c).lastIndexOf(" "),a===-1||a<i?(r=1,a=c,o=c):(r=0,o=a+1),n.push(u.substring(i,a)),i=o),c++;return n},unescapeString:function(t){return t.replace(/\\"/g,'"')},escapeString:function(t){return t.replace(/\\"/g,'"').replace(/"/g,'\\"')}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(10),r(17)],i=function(t,e){"use strict";function r(t,e,r){return e&&r&&["<->","->"].indexOf(t)>-1?e<r?"signal":"signal-u":""}function n(t,e,r){return"<->"===t&&e<=r?"signal-l":"signal-lu"}function i(t,e,i,o,a){var c=[];return s[e]&&s[e].attributes&&(c=s[e].attributes.map(function(c){return{name:c.name,value:c.value.replace(/\{\{signal-marker-end\}\}/g,r(e,o,a)).replace(/\{\{signal-marker-start\}\}/g,n(e,o,a)).replace(/\{\{id\}\}/g,t).replace(/\{\{color\}\}/g,i||"black")}})),c}function o(t,r){return s[e.getNormalizedKind(t)].marker.name+(Boolean(r)?" "+r:" black")}function a(t,r){function n(e){a(t,e)}return Array.isArray(r)&&r.forEach(n),r.arcs&&r.arcs.forEach(n),r.kind&&s[e.getNormalizedKind(r.kind)]&&s[e.getNormalizedKind(r.kind)].marker&&t.indexOf(o(r.kind,r.linecolor))<0&&t.push(o(r.kind,r.linecolor)),t}function c(t){return{kind:t.split(" ")[0],color:t.split(" ")[1]}}function u(t){return t.arcs.reduce(a,[]).sort().map(c)}var s={"->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"}],marker:{name:"signal"}},"<->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"},{name:"marker-start",value:"url(#{{id}}{{signal-marker-start}}-{{color}})"}],marker:{name:"signal"}},"=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},">>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},"..":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"--":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"==":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"::":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},":>":{attributes:[{name:"style",value:"stroke:{{color}};"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<:>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},"-x":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}lost-{{color}})"}],marker:{name:"lost",end:""}}},l={signal:{variants:[{name:"",path:"M9,3 l-8, 2"},{name:"-u",path:"M9,3 l-8,-2"},{name:"-l",path:"M9,3 l 8, 2"},{name:"-lu",path:"M9,3 l 8,-2"}]},method:{variants:[{name:"",path:"1,1  9,3  1,5"},{name:"-l",path:"17,1 9,3 17,5"}]},callback:{variants:[{name:"",path:"M 1,1 l 8,2 l-8,2"},{name:"-l",path:"M17,1 l-8,2 l 8,2"}]},lost:{variants:[{name:"",path:"M7,0 l5,6 M7,6 l5,-6"}]}};return{getAttributes:i,getMarkerDefs:function(e,r){return t.flatten(u(r).map(function(t){return l[t.kind].variants.map(function(r){return{name:e+t.kind+r.name+"-"+t.color,path:r.path,color:t.color,type:t.kind}})}))}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(21),r(5)],i=function(t,e){"use strict";function r(t){return c[t]}var n=160,i=100,o=34,a={interEntitySpacing:n,height:o,width:i},c={};return{init:function(t){a.interEntitySpacing=n,a.height=o,a.width=i,t&&(a.interEntitySpacing=t*n,a.width=t*i),c={}},getX:r,setX:function(t,e){c[t.name]=e+a.width/2},getOAndD:function(t,e){return{from:r(r(t)<r(e)?t:e),to:r(r(e)>r(t)?e:t)}},setHeight:function(t){a.height=t},getDims:function(){return a},getNoEntityLines:function(r){return t.splitLabel(r,"box",a.width,e.FONT_SIZE).length}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(8),r(6),r(5),r(18),r(17)],i=function(t,e,r,n,i){"use strict";function o(t,e){e&&t.setAttribute("style","fill:"+e+";")}function a(t,e,r){o(t,e&&!r?"blue":r)}function c(r,n){var i=t.createRect(e.getBBox(r),"label-text-background");return n&&i.setAttribute("style","fill:"+n+"; stroke:"+n+";"),i}function u(e,r,n,i,o,a){var c={};return c=0===e?t.createText(r,{x:n,y:i},{"class":o,url:a.url,id:a.id,idurl:a.idurl}):t.createText(r,{x:n,y:i},{"class":o,url:a.url})}function s(t,e,r){var n=e||t,o=i.getClass(n),a=i.getAggregateClass(n);return o===a?o+r:a+r+o+r}function l(t,n,i,c,l,d){var p=i+(l+.25)*e.calculateTextHeight(),f="";f=s(c.kind,d&&d.kind,"-text "),d&&(d.alignLeft&&(f+="anchor-start "),d.alignAround&&(p=i+(l+.25)*(e.calculateTextHeight()+r.LINE_WIDTH)));var h=u(l,t,n,p,f,c);return o(h,c.textcolor),a(h,c.url,c.textcolor),h}function d(n,i,o,a){var u=t.createGroup(a);if(n.label){var s=i.x+i.width/2,d=f(n.label,n.kind,i.width,r.FONT_SIZE,!!o&&o.wordWrapArcs),p={};o&&o.alignAbove&&d.forEach(function(){d.push("")});var h=i.y-(d.length-1)/2*(e.calculateTextHeight()+1);o&&o.alignAround&&(1===d.length&&d.push(""),h=i.y-(d.length-1)/2*(e.calculateTextHeight()+r.LINE_WIDTH+1)),d.forEach(function(t,e){""!==t&&(p=l(t,s,h,n,e,o),o&&o.ownBackground&&u.appendChild(c(p,n.textbgcolor)),u.appendChild(p)),h++})}return u}function p(t,e){var r=Math.abs(t),n=12;return r<=160?r/(e/n*8):r<=320?r/(e/n*6.4):r<=480?r/(e/n*5.9):r/(e/n*5.6)}function f(t,e,r,o,a){return"box"===i.getAggregate(e)||"undefined"==typeof e||a?n.wrap(t,p(r,o)):t.split("\\n")}return{createLabel:d,splitLabel:f}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";function t(t){return e[t]?e[t]:{y:r+1.5*n+t*n,height:n}}var e=[],r=0,n=0;return{clear:function(t,i){e=[],r=t,n=i},get:t,getLast:function(){return t(e.length-1)},set:function(r,n){var i=t(r-1);e[r]={y:i.y+(i.height+n)/2,height:n}}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";function t(t,e,r){return t.pathname+"?lang="+r+"&msc="+encodeURIComponent(e)}function e(e,n,i){return t(e,n,i).length<r}var r=4094;return{toLocationString:function(r,n,i){var o="# source too long for an URL";return e(r,n,i)&&(o=n),t(r,o,i)}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";function t(t,e){Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]})}var e={defaultLanguage:"mscgen",parentElementPrefix:"mscgen_js-parent_",clickable:!1,clickURL:"https://sverweij.github.io/mscgen_js/",loadFromSrcAttribute:!1};return{getConfig:function(){return"undefined"!=typeof mscgen_js_config&&mscgen_js_config&&"object"==typeof mscgen_js_config&&t(e,mscgen_js_config),e}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(26)],i=function(t){"use strict";function e(t,e){for(var r=t.toString(),n=e-r.length,i=0;i<n;i++)r=" "+r;return r}function r(t,r){return e(r,3)+" "+t}function n(e,r){return e.split("").reduce(function(e,n,o){return o===r?e+t.applyTemplate(u,{"char":i(n)}):e+i(n)},"")}function i(t){return t.replace(/</g,"&lt;")}var o="<pre><div style='color: #d00'># ERROR on line {line}, column {col} - {message}</div>",a="<pre><div style='color: #d00'># ERROR {message}</div>",c="<mark>{line}\n</mark>",u="<span style='text-decoration:underline'>{char}</span>";return{formatNumber:e,deHTMLize:i,renderError:function(e,u,s){var l=Boolean(u)?t.applyTemplate(o,{message:s,line:u.start.line,col:u.start.column}):t.applyTemplate(a,{message:s});return e.split("\n").reduce(function(e,o,a){return u&&a===u.start.line-1?e+t.applyTemplate(c,{line:r(n(o,u.start.column-1),a+1)}):e+i(r(o,a+1))+"\n"},l)+"</pre>"}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";return{applyTemplate:function(t,e){var r=t;return e&&Object.keys(e).forEach(function(t){r=r.replace(new RegExp("{"+t+"}","g"),e[t])}),r}}}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[],i=function(){"use strict";return{ajax:function(t,e,r){var n=new XMLHttpRequest;n.onreadystatechange=function(t){t.target.readyState===XMLHttpRequest.DONE&&(200===n.status?e(t):r(t))},n.open("GET",t),n.responseType="text";try{n.send()}catch(i){r(i)}}}}.apply(e,n),!(void 0!==i&&(t.exports=i))}]);