(()=>{var t={785:function(t,e,r){var n,o,i;o=[r(309)],void 0===(i="function"==typeof(n=function(t){"use strict";function e(t,r,n,o){var i=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(i,e.prototype),i.expected=r,i.found=n,i.location=o,i.name="SyntaxError",i}function r(t,e,r){return r=r||" ",t.length>e?t:(e-=t.length,t+(r+=r.repeat(e)).slice(0,e))}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(e,Error),e.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n,o=null;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){o=t[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,a=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(i):i,c=this.location.source+":"+a.line+":"+a.column;if(o){var u=this.location.end,l=r("",a.line.toString().length," "),s=o[i.line-1],d=(i.line===u.line?u.column:s.length+1)-i.column||1;e+="\n --\x3e "+c+"\n"+l+" |\n"+a.line+" | "+s+"\n"+l+" | "+r("",i.column-1," ")+r("",d,"^")}else e+="\n at "+c}return e},e.buildMessage=function(t,e){var r={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e=t.parts.map((function(t){return Array.isArray(t)?i(t[0])+"-"+i(t[1]):i(t)}));return"["+(t.inverted?"^":"")+e.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function a(t){return r[t.type](t)}return"Expected "+function(t){var e,r,n=t.map(a);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."},{StartRules:["program"],SyntaxError:e,parse:function(r,n){var o,i,a,c,u={},l=(n=void 0!==n?n:{}).grammarSource,s={program:jn},d=jn,f=",",h=";",g="hscale",p="arcgradient",m="=",b="width",y="wordwraparcs",x="wordwrapentities",v="wordwrapboxes",w="watermark",C=":",_="*",k="{",S="}",E="|||",L="...",A="---",O="--",T="<->",M="==",P="<<=>>",j="<=>",D="..",F="<<>>",I="::",B="<:>",N="->",H="=>>",R="=>",W=">>",G=":>",X="-x",V="<-",z="<<=",$="<=",q="<<",U="<:",Y="x-",Z="note",K="abox",J="rbox",Q="box",tt="alt",et="else",rt="opt",nt="break",ot="par",it="seq",at="strict",ct="neg",ut="critical",lt="ignore",st="consider",dt="assert",ft="loop",ht="ref",gt="exc",pt='"',mt='\\"',bt="/*",yt="*/",xt="//",vt="#",wt=".",Ct="true",_t="false",kt="on",St="off",Et="auto",Lt=/^[,;{]/,At=/^[^;, "\t\n\r=\-><:{*]/,Ot=/^[ \t]/,Tt=/^[\r\n]/,Mt=/^[^\r\n]/,Pt=/^[0-9]/,jt=/^[0-1]/,Dt=Ln(",",!1),Ft=Ln(";",!1),It=Ln("hscale",!0),Bt=Ln("arcgradient",!0),Nt=Ln("=",!1),Ht=Ln("width",!0),Rt=Ln("wordwraparcs",!0),Wt=Ln("wordwrapentities",!0),Gt=Ln("wordwrapboxes",!0),Xt=Ln("watermark",!0),Vt=On("entity"),zt=Ln(":",!1),$t=Ln("*",!1),qt=Ln("{",!1),Ut=Ln("}",!1),Yt=On("empty row"),Zt=Ln("|||",!1),Kt=Ln("...",!1),Jt=On("---"),Qt=Ln("---",!1),te=On("bi-directional arrow"),ee=Ln("--",!1),re=Ln("<->",!1),ne=Ln("==",!1),oe=Ln("<<=>>",!1),ie=Ln("<=>",!1),ae=Ln("..",!1),ce=Ln("<<>>",!1),ue=Ln("::",!1),le=Ln("<:>",!1),se=On("left to right arrow"),de=Ln("->",!1),fe=Ln("=>>",!1),he=Ln("=>",!1),ge=Ln(">>",!1),pe=Ln(":>",!1),me=Ln("-x",!0),be=On("right to left arrow"),ye=Ln("<-",!1),xe=Ln("<<=",!1),ve=Ln("<=",!1),we=Ln("<<",!1),Ce=Ln("<:",!1),_e=Ln("x-",!0),ke=On("box"),Se=Ln("note",!0),Ee=Ln("abox",!0),Le=Ln("rbox",!0),Ae=Ln("box",!0),Oe=On("inline expression"),Te=Ln("alt",!0),Me=Ln("else",!0),Pe=Ln("opt",!0),je=Ln("break",!0),De=Ln("par",!0),Fe=Ln("seq",!0),Ie=Ln("strict",!0),Be=Ln("neg",!0),Ne=Ln("critical",!0),He=Ln("ignore",!0),Re=Ln("consider",!0),We=Ln("assert",!0),Ge=Ln("loop",!0),Xe=Ln("ref",!0),Ve=Ln("exc",!0),ze=On("double quoted string"),$e=Ln('"',!1),qe=Ln('\\"',!1),Ue={type:"any"},Ye=An([",",";","{"],!1,!1),Ze=On("identifier"),Ke=An([";",","," ",'"',"\t","\n","\r","=","-",">","<",":","{","*"],!0,!1),Je=On("whitespace"),Qe=An([" ","\t"],!1,!1),tr=On("lineend"),er=An(["\r","\n"],!1,!1),rr=Ln("/*",!1),nr=Ln("*/",!1),or=Ln("//",!1),ir=Ln("#",!1),ar=An(["\r","\n"],!0,!1),cr=On("comment"),ur=On("number"),lr=An([["0","9"]],!1,!1),sr=Ln(".",!1),dr=On("boolean"),fr=Ln("true",!0),hr=Ln("false",!0),gr=Ln("on",!0),pr=Ln("off",!0),mr=An([["0","1"]],!1,!1),br=On("size"),yr=Ln("auto",!0),xr=function(e,r){return r.entities=ao(r.entities||[],r.arcs),r={meta:t.getMetaInfo(r.options,r.arcs),...r},e.length>0&&(r={precomment:e,...r}),r},vr=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},wr=function(t){return t},Cr=function(t){return t},_r=function(t){return t[0].concat(t[1]).reduce(((t,e)=>Object.assign(t,e)),{})},kr=function(e,r){return t.nameValue2Option(e,r)},Sr=function(e,r){return t.nameValue2Option(e,r)},Er=function(e,r){return t.nameValue2Option(e,t.flattenBoolean(r))},Lr=function(e,r){return t.nameValue2Option(e,t.flattenBoolean(r))},Ar=function(e,r){return t.nameValue2Option(e,t.flattenBoolean(r))},Or=function(e,r){return t.nameValue2Option(e,r)},Tr=function(t){return t},Mr=function(t){return t},Pr=function(t){return t[0].concat(t[1])},jr=function(t,e){return e},Dr=function(t,e){var r=io(t);return e&&(r.label=e),r},Fr=function(t){return t},Ir=function(t){return t},Br=function(t){return t},Nr=function(t){return t[0].concat(t[1])},Hr=function(t){return t},Rr=function(t){return t},Wr=function(t){return t},Gr=function(t,e){return e},Xr=function(t,e){return e&&(t.label=e),t},Vr=function(t){return{kind:t}},zr=function(t){return{kind:t}},$r=function(t,e,r){return{kind:e,from:t,to:r}},qr=function(t,e){return{kind:t,from:"*",to:e}},Ur=function(t,e){return{kind:e,from:t,to:"*"}},Yr=function(t,e){return{kind:e,from:t,to:"*"}},Zr=function(t,e,r,n){return n},Kr=function(t,e,r,n,o){var i={kind:e,from:t,to:r,arcs:o};return n&&(i.label=n),i},Jr=function(t){return t.toLowerCase()},Qr=function(t){return t.toLowerCase()},tn=function(t){return t.join("")},en=function(t){return t},rn=function(t){return t.join("").trim()},nn=function(t){return t},on=function(t){return t.join("")},an=function(t){return t},cn=function(t){return t},un=function(t){return t},ln=function(t,e,r){return t+e.join("")+r},sn=function(t,e){return t+e.join("")},dn=function(t){return t},fn=function(t){return t.toString()},hn=function(t){return t.toString()},gn=function(t){return parseInt(t.join(""),10)},pn=function(t){return parseFloat(t.join(""))},mn=function(t){return t},bn=function(t){return t.toString()},yn=function(t){return t},xn=function(t){return t},vn=function(t){return t.toString()},wn=function(t){return t.toLowerCase()},Cn=0|n.peg$currPos,_n=[{line:1,column:1}],kn=Cn,Sn=n.peg$maxFailExpected||[],En=0|n.peg$silentFails;if(n.startRule){if(!(n.startRule in s))throw new Error("Can't start parsing from rule \""+n.startRule+'".');d=s[n.startRule]}function Ln(t,e){return{type:"literal",text:t,ignoreCase:e}}function An(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function On(t){return{type:"other",description:t}}function Tn(t){var e,n=_n[t];if(n)return n;if(t>=_n.length)e=_n.length-1;else for(e=t;!_n[--e];);for(n={line:(n=_n[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return _n[t]=n,n}function Mn(t,e,r){var n=Tn(t),o=Tn(e),i={source:l,start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:o.line,column:o.column}};return r&&l&&"function"==typeof l.offset&&(i.start=l.offset(i.start),i.end=l.offset(i.end)),i}function Pn(t){Cn<kn||(Cn>kn&&(kn=Cn,Sn=[]),Sn.push(t))}function jn(){var t,e;return t=Jn(),e=function(){var t,e,n;return(t=function(){var t,e,n,o,i;for(t=Cn,e=[],n=Cn,(o=Dn())!==u?(44===r.charCodeAt(Cn)?(i=f,Cn++):(i=u,0===En&&Pn(Dt)),i!==u?n=wr(o):(Cn=n,n=u)):(Cn=n,n=u);n!==u;)e.push(n),n=Cn,(o=Dn())!==u?(44===r.charCodeAt(Cn)?(i=f,Cn++):(i=u,0===En&&Pn(Dt)),i!==u?n=wr(o):(Cn=n,n=u)):(Cn=n,n=u);return n=Cn,(o=Dn())!==u?(59===r.charCodeAt(Cn)?(i=h,Cn++):(i=u,0===En&&Pn(Ft)),i!==u?n=Cr(o):(Cn=n,n=u)):(Cn=n,n=u),n!==u?t=e=[e,n]:(Cn=t,t=u),t!==u&&(t=_r(t)),t}())===u&&(t=null),(e=function(){var t,e,n,o,i;for(t=Cn,e=[],n=Cn,(o=Fn())!==u?(44===r.charCodeAt(Cn)?(i=f,Cn++):(i=u,0===En&&Pn(Dt)),i!==u?n=Tr(o):(Cn=n,n=u)):(Cn=n,n=u);n!==u;)e.push(n),n=Cn,(o=Fn())!==u?(44===r.charCodeAt(Cn)?(i=f,Cn++):(i=u,0===En&&Pn(Dt)),i!==u?n=Tr(o):(Cn=n,n=u)):(Cn=n,n=u);return n=Cn,(o=Fn())!==u?(59===r.charCodeAt(Cn)?(i=h,Cn++):(i=u,0===En&&Pn(Ft)),i!==u?n=Mr(o):(Cn=n,n=u)):(Cn=n,n=u),n!==u?t=e=[e,n]:(Cn=t,t=u),t!==u&&(t=Pr(t)),t}())===u&&(e=null),(n=In())===u&&(n=null),vr(t,e,n)}(),Jn(),xr(t,e)}function Dn(){var t,e,n,o;return t=Cn,Jn(),(e=r.substr(Cn,6)).toLowerCase()===g?Cn+=6:(e=u,0===En&&Pn(It)),e===u&&((e=r.substr(Cn,11)).toLowerCase()===p?Cn+=11:(e=u,0===En&&Pn(Bt))),e!==u?(Jn(),61===r.charCodeAt(Cn)?(n=m,Cn++):(n=u,0===En&&Pn(Nt)),n!==u?(Jn(),(o=function(){var t,e;return En++,t=Cn,(e=function(){var t,e,n,o;return t=Cn,34===r.charCodeAt(Cn)?(e=pt,Cn++):(e=u,0===En&&Pn($e)),e!==u&&(n=Qn())!==u?(34===r.charCodeAt(Cn)?(o=pt,Cn++):(o=u,0===En&&Pn($e)),o!==u?t=hn(n):(Cn=t,t=u)):(Cn=t,t=u),t}())!==u&&(e=dn(e)),(t=e)===u&&(t=Cn,(e=Qn())!==u&&(e=fn(e)),t=e),En--,t===u&&(e=u,0===En&&Pn(ur)),t}())!==u?(Jn(),t=kr(e,o)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u),t===u&&(t=Cn,Jn(),(e=r.substr(Cn,5)).toLowerCase()===b?Cn+=5:(e=u,0===En&&Pn(Ht)),e!==u?(Jn(),61===r.charCodeAt(Cn)?(n=m,Cn++):(n=u,0===En&&Pn(Nt)),n!==u?(Jn(),(o=function(){var t;return En++,(t=function(){var t,e,n,o;return t=Cn,34===r.charCodeAt(Cn)?(e=pt,Cn++):(e=u,0===En&&Pn($e)),e!==u&&(n=no())!==u?(34===r.charCodeAt(Cn)?(o=pt,Cn++):(o=u,0===En&&Pn($e)),o!==u?t=xn(n):(Cn=t,t=u)):(Cn=t,t=u),t}())===u&&(t=no()),En--,t===u&&0===En&&Pn(br),t}())!==u?(Jn(),t=Sr(e,o)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u),t===u&&(t=Cn,Jn(),(e=r.substr(Cn,12)).toLowerCase()===y?Cn+=12:(e=u,0===En&&Pn(Rt)),e!==u?(Jn(),61===r.charCodeAt(Cn)?(n=m,Cn++):(n=u,0===En&&Pn(Nt)),n!==u?(Jn(),(o=eo())!==u?(Jn(),t=Er(e,o)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u),t===u&&(t=Cn,Jn(),(e=r.substr(Cn,16)).toLowerCase()===x?Cn+=16:(e=u,0===En&&Pn(Wt)),e!==u?(Jn(),61===r.charCodeAt(Cn)?(n=m,Cn++):(n=u,0===En&&Pn(Nt)),n!==u?(Jn(),(o=eo())!==u?(Jn(),t=Lr(e,o)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u),t===u&&(t=Cn,Jn(),(e=r.substr(Cn,13)).toLowerCase()===v?Cn+=13:(e=u,0===En&&Pn(Gt)),e!==u?(Jn(),61===r.charCodeAt(Cn)?(n=m,Cn++):(n=u,0===En&&Pn(Nt)),n!==u?(Jn(),(o=eo())!==u?(Jn(),t=Ar(e,o)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u),t===u&&(t=Cn,Jn(),(e=r.substr(Cn,9)).toLowerCase()===w?Cn+=9:(e=u,0===En&&Pn(Xt)),e!==u?(Jn(),61===r.charCodeAt(Cn)?(n=m,Cn++):(n=u,0===En&&Pn(Nt)),n!==u?(Jn(),(o=Xn())!==u?(Jn(),t=Or(e,o)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u)))))),t}function Fn(){var t,e,n,o,i;return En++,t=Cn,Jn(),(e=Vn())!==u?(Jn(),n=Cn,58===r.charCodeAt(Cn)?(o=C,Cn++):(o=u,0===En&&Pn(zt)),o!==u?(Jn(),(i=Gn())!==u?(Jn(),n=jr(e,i)):(Cn=n,n=u)):(Cn=n,n=u),n===u&&(n=null),t=Dr(e,n)):(Cn=t,t=u),En--,t===u&&0===En&&Pn(Vt),t}function In(){var t,e,n,o;if(t=[],e=Cn,(n=Bn())!==u?(Jn(),59===r.charCodeAt(Cn)?(o=h,Cn++):(o=u,0===En&&Pn(Ft)),o!==u?e=Fr(n):(Cn=e,e=u)):(Cn=e,e=u),e!==u)for(;e!==u;)t.push(e),e=Cn,(n=Bn())!==u?(Jn(),59===r.charCodeAt(Cn)?(o=h,Cn++):(o=u,0===En&&Pn(Ft)),o!==u?e=Fr(n):(Cn=e,e=u)):(Cn=e,e=u);else t=u;return t}function Bn(){var t,e,n,o,i;for(t=Cn,e=[],n=Cn,(o=Nn())!==u?(44===r.charCodeAt(Cn)?(i=f,Cn++):(i=u,0===En&&Pn(Dt)),i!==u?n=Ir(o):(Cn=n,n=u)):(Cn=n,n=u);n!==u;)e.push(n),n=Cn,(o=Nn())!==u?(44===r.charCodeAt(Cn)?(i=f,Cn++):(i=u,0===En&&Pn(Dt)),i!==u?n=Ir(o):(Cn=n,n=u)):(Cn=n,n=u);return n=Cn,(o=Nn())!==u&&(o=Br(o)),(n=o)!==u?t=e=[e,n]:(Cn=t,t=u),t!==u&&(t=Nr(t)),t}function Nn(){var t;return(t=function(){var t,e,n,o,i;return t=Cn,e=Cn,(n=function(){var t,e;return t=Cn,Jn(),(e=function(){var t;return En++,r.substr(Cn,3)===E?(t=E,Cn+=3):(t=u,0===En&&Pn(Zt)),t===u&&(r.substr(Cn,3)===L?(t=L,Cn+=3):(t=u,0===En&&Pn(Kt))),En--,t===u&&0===En&&Pn(Yt),t}())!==u?(Jn(),t=Vr(e)):(Cn=t,t=u),t}())!==u&&(n=Hr(n)),(e=n)===u&&(e=Cn,(n=function(){var t,e,n,o;return t=Cn,Jn(),(e=Vn())!==u?(Jn(),(n=function(){var t;return(t=Hn())===u&&(t=Rn())===u&&(t=Wn())===u&&(t=function(){var t;return En++,(t=r.substr(Cn,4)).toLowerCase()===Z?Cn+=4:(t=u,0===En&&Pn(Se)),t===u&&((t=r.substr(Cn,4)).toLowerCase()===K?Cn+=4:(t=u,0===En&&Pn(Ee)),t===u&&((t=r.substr(Cn,4)).toLowerCase()===J?Cn+=4:(t=u,0===En&&Pn(Le)),t===u&&((t=r.substr(Cn,3)).toLowerCase()===Q?Cn+=3:(t=u,0===En&&Pn(Ae))))),En--,t===u&&0===En&&Pn(ke),t}()),t!==u&&(t=Jr(t)),t}())!==u?(Jn(),(o=Vn())!==u?(Jn(),t=$r(e,n,o)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u),t===u&&(t=Cn,Jn(),42===r.charCodeAt(Cn)?(e=_,Cn++):(e=u,0===En&&Pn($t)),e!==u?(Jn(),(n=Wn())!==u?(Jn(),(o=Vn())!==u?(Jn(),t=qr(n,o)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u),t===u&&(t=Cn,Jn(),(e=Vn())!==u?(Jn(),(n=Rn())!==u?(Jn(),42===r.charCodeAt(Cn)?(o=_,Cn++):(o=u,0===En&&Pn($t)),o!==u?(Jn(),t=Ur(e,n)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u),t===u&&(t=Cn,Jn(),(e=Vn())!==u?(Jn(),(n=Hn())!==u?(Jn(),42===r.charCodeAt(Cn)?(o=_,Cn++):(o=u,0===En&&Pn($t)),o!==u?(Jn(),t=Yr(e,n)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u)))),t}())!==u&&(n=Rr(n)),(e=n)===u&&(e=Cn,(n=function(){var t,e;return t=Cn,Jn(),(e=function(){var t;return En++,r.substr(Cn,3)===A?(t=A,Cn+=3):(t=u,0===En&&Pn(Qt)),En--,t===u&&0===En&&Pn(Jt),t}())!==u?(Jn(),t=zr(e)):(Cn=t,t=u),t}())!==u&&(n=Wr(n)),e=n)),e!==u?(n=Cn,58===r.charCodeAt(Cn)?(o=C,Cn++):(o=u,0===En&&Pn(zt)),o!==u?(Jn(),(i=Gn())!==u?(Jn(),n=Gr(e,i)):(Cn=n,n=u)):(Cn=n,n=u),n===u&&(n=null),t=Xr(e,n)):(Cn=t,t=u),t}())===u&&(t=function(){var t,e,n,o,i,a,c,l;return t=Cn,Jn(),(e=Vn())!==u?(Jn(),(n=function(){var t,e;return En++,t=Cn,(e=r.substr(Cn,3)).toLowerCase()===tt?Cn+=3:(e=u,0===En&&Pn(Te)),e===u&&((e=r.substr(Cn,4)).toLowerCase()===et?Cn+=4:(e=u,0===En&&Pn(Me)),e===u&&((e=r.substr(Cn,3)).toLowerCase()===rt?Cn+=3:(e=u,0===En&&Pn(Pe)),e===u&&((e=r.substr(Cn,5)).toLowerCase()===nt?Cn+=5:(e=u,0===En&&Pn(je)),e===u&&((e=r.substr(Cn,3)).toLowerCase()===ot?Cn+=3:(e=u,0===En&&Pn(De)),e===u&&((e=r.substr(Cn,3)).toLowerCase()===it?Cn+=3:(e=u,0===En&&Pn(Fe)),e===u&&((e=r.substr(Cn,6)).toLowerCase()===at?Cn+=6:(e=u,0===En&&Pn(Ie)),e===u&&((e=r.substr(Cn,3)).toLowerCase()===ct?Cn+=3:(e=u,0===En&&Pn(Be)),e===u&&((e=r.substr(Cn,8)).toLowerCase()===ut?Cn+=8:(e=u,0===En&&Pn(Ne)),e===u&&((e=r.substr(Cn,6)).toLowerCase()===lt?Cn+=6:(e=u,0===En&&Pn(He)),e===u&&((e=r.substr(Cn,8)).toLowerCase()===st?Cn+=8:(e=u,0===En&&Pn(Re)),e===u&&((e=r.substr(Cn,6)).toLowerCase()===dt?Cn+=6:(e=u,0===En&&Pn(We)),e===u&&((e=r.substr(Cn,4)).toLowerCase()===ft?Cn+=4:(e=u,0===En&&Pn(Ge)),e===u&&((e=r.substr(Cn,3)).toLowerCase()===ht?Cn+=3:(e=u,0===En&&Pn(Xe)),e===u&&((e=r.substr(Cn,3)).toLowerCase()===gt?Cn+=3:(e=u,0===En&&Pn(Ve)))))))))))))))),e!==u&&(e=Qr(e)),En--,(t=e)===u&&(e=u,0===En&&Pn(Oe)),t}())!==u?(Jn(),(o=Vn())!==u?(Jn(),i=Cn,58===r.charCodeAt(Cn)?(a=C,Cn++):(a=u,0===En&&Pn(zt)),a!==u?(Jn(),(c=Gn())!==u?(Jn(),i=Zr(e,n,o,c)):(Cn=i,i=u)):(Cn=i,i=u),i===u&&(i=null),123===r.charCodeAt(Cn)?(a=k,Cn++):(a=u,0===En&&Pn(qt)),a!==u?(Jn(),(c=In())===u&&(c=null),Jn(),125===r.charCodeAt(Cn)?(l=S,Cn++):(l=u,0===En&&Pn(Ut)),l!==u?(Jn(),t=Kr(e,n,o,i,c)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u)):(Cn=t,t=u),t}()),t}function Hn(){var t;return En++,r.substr(Cn,2)===O?(t=O,Cn+=2):(t=u,0===En&&Pn(ee)),t===u&&(r.substr(Cn,3)===T?(t=T,Cn+=3):(t=u,0===En&&Pn(re)),t===u&&(r.substr(Cn,2)===M?(t=M,Cn+=2):(t=u,0===En&&Pn(ne)),t===u&&(r.substr(Cn,5)===P?(t=P,Cn+=5):(t=u,0===En&&Pn(oe)),t===u&&(r.substr(Cn,3)===j?(t=j,Cn+=3):(t=u,0===En&&Pn(ie)),t===u&&(r.substr(Cn,2)===D?(t=D,Cn+=2):(t=u,0===En&&Pn(ae)),t===u&&(r.substr(Cn,4)===F?(t=F,Cn+=4):(t=u,0===En&&Pn(ce)),t===u&&(r.substr(Cn,2)===I?(t=I,Cn+=2):(t=u,0===En&&Pn(ue)),t===u&&(r.substr(Cn,3)===B?(t=B,Cn+=3):(t=u,0===En&&Pn(le)))))))))),En--,t===u&&0===En&&Pn(te),t}function Rn(){var t;return En++,r.substr(Cn,2)===N?(t=N,Cn+=2):(t=u,0===En&&Pn(de)),t===u&&(r.substr(Cn,3)===H?(t=H,Cn+=3):(t=u,0===En&&Pn(fe)),t===u&&(r.substr(Cn,2)===R?(t=R,Cn+=2):(t=u,0===En&&Pn(he)),t===u&&(r.substr(Cn,2)===W?(t=W,Cn+=2):(t=u,0===En&&Pn(ge)),t===u&&(r.substr(Cn,2)===G?(t=G,Cn+=2):(t=u,0===En&&Pn(pe)),t===u&&((t=r.substr(Cn,2)).toLowerCase()===X?Cn+=2:(t=u,0===En&&Pn(me))))))),En--,t===u&&0===En&&Pn(se),t}function Wn(){var t;return En++,r.substr(Cn,2)===V?(t=V,Cn+=2):(t=u,0===En&&Pn(ye)),t===u&&(r.substr(Cn,3)===z?(t=z,Cn+=3):(t=u,0===En&&Pn(xe)),t===u&&(r.substr(Cn,2)===$?(t=$,Cn+=2):(t=u,0===En&&Pn(ve)),t===u&&(r.substr(Cn,2)===q?(t=q,Cn+=2):(t=u,0===En&&Pn(we)),t===u&&(r.substr(Cn,2)===U?(t=U,Cn+=2):(t=u,0===En&&Pn(Ce)),t===u&&((t=r.substr(Cn,2)).toLowerCase()===Y?Cn+=2:(t=u,0===En&&Pn(_e))))))),En--,t===u&&0===En&&Pn(be),t}function Gn(){var t,e;return(t=Xn())===u&&(e=function(){var t,e,n,o;for(t=[],e=Cn,n=Cn,En++,o=r.charAt(Cn),Lt.test(o)?Cn++:(o=u,0===En&&Pn(Ye)),En--,o===u?n=void 0:(Cn=n,n=u),n!==u?(r.length>Cn?(o=r.charAt(Cn),Cn++):(o=u,0===En&&Pn(Ue)),o!==u?e=nn(o):(Cn=e,e=u)):(Cn=e,e=u);e!==u;)t.push(e),e=Cn,n=Cn,En++,o=r.charAt(Cn),Lt.test(o)?Cn++:(o=u,0===En&&Pn(Ye)),En--,o===u?n=void 0:(Cn=n,n=u),n!==u?(r.length>Cn?(o=r.charAt(Cn),Cn++):(o=u,0===En&&Pn(Ue)),o!==u?e=nn(o):(Cn=e,e=u)):(Cn=e,e=u);return t}(),t=rn(e)),t}function Xn(){var t,e,n,o;return En++,t=Cn,34===r.charCodeAt(Cn)?(e=pt,Cn++):(e=u,0===En&&Pn($e)),e!==u?(n=function(){var t,e,n,o;for(t=[],e=Cn,n=Cn,En++,34===r.charCodeAt(Cn)?(o=pt,Cn++):(o=u,0===En&&Pn($e)),En--,o===u?n=void 0:(Cn=n,n=u),n!==u?(r.substr(Cn,2)===mt?(o=mt,Cn+=2):(o=u,0===En&&Pn(qe)),o===u&&(r.length>Cn?(o=r.charAt(Cn),Cn++):(o=u,0===En&&Pn(Ue))),o!==u?e=en(o):(Cn=e,e=u)):(Cn=e,e=u);e!==u;)t.push(e),e=Cn,n=Cn,En++,34===r.charCodeAt(Cn)?(o=pt,Cn++):(o=u,0===En&&Pn($e)),En--,o===u?n=void 0:(Cn=n,n=u),n!==u?(r.substr(Cn,2)===mt?(o=mt,Cn+=2):(o=u,0===En&&Pn(qe)),o===u&&(r.length>Cn?(o=r.charAt(Cn),Cn++):(o=u,0===En&&Pn(Ue))),o!==u?e=en(o):(Cn=e,e=u)):(Cn=e,e=u);return t}(),34===r.charCodeAt(Cn)?(o=pt,Cn++):(o=u,0===En&&Pn($e)),o!==u?t=tn(n):(Cn=t,t=u)):(Cn=t,t=u),En--,t===u&&(e=u,0===En&&Pn(ze)),t}function Vn(){var t,e,n;if(En++,t=Cn,e=[],n=r.charAt(Cn),At.test(n)?Cn++:(n=u,0===En&&Pn(Ke)),n!==u)for(;n!==u;)e.push(n),n=r.charAt(Cn),At.test(n)?Cn++:(n=u,0===En&&Pn(Ke));else e=u;return e!==u&&(e=on(e)),(t=e)===u&&(t=Xn()),En--,t===u&&(e=u,0===En&&Pn(Ze)),t}function zn(){var t,e;return En++,Cn,e=r.charAt(Cn),Ot.test(e)?Cn++:(e=u,0===En&&Pn(Qe)),e!==u&&(e=an(e)),En--,(t=e)===u&&(e=u,0===En&&Pn(Je)),t}function $n(){var t,e;return En++,Cn,e=r.charAt(Cn),Tt.test(e)?Cn++:(e=u,0===En&&Pn(er)),e!==u&&(e=cn(e)),En--,(t=e)===u&&(e=u,0===En&&Pn(tr)),t}function qn(){var t,e,n;return t=Cn,e=Cn,En++,r.substr(Cn,2)===yt?(n=yt,Cn+=2):(n=u,0===En&&Pn(nr)),En--,n===u?e=void 0:(Cn=e,e=u),e!==u?(r.length>Cn?(n=r.charAt(Cn),Cn++):(n=u,0===En&&Pn(Ue)),n!==u?t=un(n):(Cn=t,t=u)):(Cn=t,t=u),t}function Un(){var t,e,n,o;if(t=Cn,(e=function(){var t;return r.substr(Cn,2)===bt?(t=bt,Cn+=2):(t=u,0===En&&Pn(rr)),t}())!==u){for(n=[],o=qn();o!==u;)n.push(o),o=qn();(o=function(){var t;return r.substr(Cn,2)===yt?(t=yt,Cn+=2):(t=u,0===En&&Pn(nr)),t}())!==u?t=ln(e,n,o):(Cn=t,t=u)}else Cn=t,t=u;return t}function Yn(){var t;return t=r.charAt(Cn),Mt.test(t)?Cn++:(t=u,0===En&&Pn(ar)),t}function Zn(){var t,e,n,o;if(t=Cn,(e=function(){var t;return r.substr(Cn,2)===xt?(t=xt,Cn+=2):(t=u,0===En&&Pn(or)),t===u&&(35===r.charCodeAt(Cn)?(t=vt,Cn++):(t=u,0===En&&Pn(ir))),t}())!==u){for(n=[],o=Yn();o!==u;)n.push(o),o=Yn();t=sn(e,n)}else Cn=t,t=u;return t}function Kn(){var t;return En++,(t=Zn())===u&&(t=Un()),En--,t===u&&0===En&&Pn(cr),t}function Jn(){var t,e;for(t=[],(e=zn())===u&&(e=$n())===u&&(e=Kn());e!==u;)t.push(e),(e=zn())===u&&(e=$n())===u&&(e=Kn());return t}function Qn(){var t,e,n,o,i;return e=Cn,(n=to())!==u?(46===r.charCodeAt(Cn)?(o=wt,Cn++):(o=u,0===En&&Pn(sr)),o!==u&&(i=to())!==u?e=n=[n,o,i]:(Cn=e,e=u)):(Cn=e,e=u),e!==u&&(e=pn(e)),(t=e)===u&&(t=to()),t}function to(){var t,e;if(t=[],e=r.charAt(Cn),Pt.test(e)?Cn++:(e=u,0===En&&Pn(lr)),e!==u)for(;e!==u;)t.push(e),e=r.charAt(Cn),Pt.test(e)?Cn++:(e=u,0===En&&Pn(lr));else t=u;return t!==u&&(t=gn(t)),t}function eo(){var t,e;return En++,t=Cn,(e=function(){var t,e,n,o;return t=Cn,34===r.charCodeAt(Cn)?(e=pt,Cn++):(e=u,0===En&&Pn($e)),e!==u&&(n=ro())!==u?(34===r.charCodeAt(Cn)?(o=pt,Cn++):(o=u,0===En&&Pn($e)),o!==u?t=yn(n):(Cn=t,t=u)):(Cn=t,t=u),t}())!==u&&(e=mn(e)),(t=e)===u&&(t=Cn,(e=ro())!==u&&(e=bn(e)),t=e),En--,t===u&&(e=u,0===En&&Pn(dr)),t}function ro(){var t;return(t=r.substr(Cn,4)).toLowerCase()===Ct?Cn+=4:(t=u,0===En&&Pn(fr)),t===u&&((t=r.substr(Cn,5)).toLowerCase()===_t?Cn+=5:(t=u,0===En&&Pn(hr)),t===u&&((t=r.substr(Cn,2)).toLowerCase()===kt?Cn+=2:(t=u,0===En&&Pn(gr)),t===u&&((t=r.substr(Cn,3)).toLowerCase()===St?Cn+=3:(t=u,0===En&&Pn(pr)),t===u&&(t=r.charAt(Cn),jt.test(t)?Cn++:(t=u,0===En&&Pn(mr)))))),t}function no(){var t,e;return t=Cn,(e=Qn())!==u&&(e=vn(e)),(t=e)===u&&(t=Cn,(e=r.substr(Cn,4)).toLowerCase()===Et?Cn+=4:(e=u,0===En&&Pn(yr)),e!==u&&(e=wn(e)),t=e),t}function oo(e,r,n){return!(t.entityExists(e,r)||!0===n[r])}function io(t){return{name:t}}function ao(t,e,r){return r||(r={}),(e||[]).forEach((function(e){e.forEach((function(e){oo(t,e.from,r)&&t.push(io(e.from)),e.arcs&&(r[e.to]=!0,Object.assign(t,ao(t,e.arcs,r)),delete r[e.to]),oo(t,e.to,r)&&t.push(io(e.to))}))})),t}if(o=d(),n.peg$library)return{peg$result:o,peg$currPos:Cn,peg$FAILED:u,peg$maxFailExpected:Sn,peg$maxFailPos:kn};if(o!==u&&Cn===r.length)return o;throw o!==u&&Cn<r.length&&Pn({type:"end"}),i=Sn,a=kn<r.length?r.charAt(kn):null,c=kn<r.length?Mn(kn,kn+1):Mn(kn,kn),new e(e.buildMessage(i,a),i,a,c)}}})?n.apply(e,o):n)||(t.exports=i)},309:(t,e)=>{"use strict";function r(t,e){return void 0===e||"*"===e||t.some((function(t){return t.name===e}))}Object.defineProperty(e,"__esModule",{value:!0}),e.EntityNotDefinedError=void 0,e.nameValue2Option=function(t,e){var r={};return r[t.toLowerCase()]=e,r},e.flattenBoolean=function(t){return["true","on","1"].includes(t.toLowerCase())},e.entityExists=r,e.isMscGenKeyword=function(t){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"].includes(t)},e.checkForUndeclaredEntities=function t(e,o){(o||[]).forEach((function(o){o.forEach((function(o){if(o.from&&!r(e,o.from))throw new n(o.from,o);if(o.to&&!r(e,o.to))throw new n(o.to,o);o.arcs&&t(e,o.arcs)}))}))},e.getMetaInfo=function(t,e){var r=function(t){return!!t&&(t.hasOwnProperty("watermark")||t.hasOwnProperty("wordwrapentities")||t.hasOwnProperty("wordwrapboxes")||t.hasOwnProperty("width")&&"auto"===t.width)}(t),n=function(t){return(t||[]).some((function(t){return t.some((function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].includes(t.kind)}))}))}(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}};var n=function(t,e){this.name="EntityNotDefinedError",this.message=function(t,e){return"Entity '".concat(t,"' in arc '").concat(e.from," ").concat(e.kind," ").concat(e.to,"' is not defined.")}(t,e)};e.EntityNotDefinedError=n},761:function(t,e,r){var n,o,i;o=[r(309)],void 0===(i="function"==typeof(n=function(t){"use strict";function e(t,r,n,o){var i=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(i,e.prototype),i.expected=r,i.found=n,i.location=o,i.name="SyntaxError",i}function r(t,e,r){return r=r||" ",t.length>e?t:(e-=t.length,t+(r+=r.repeat(e)).slice(0,e))}return function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(e,Error),e.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n,o=null;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){o=t[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,a=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(i):i,c=this.location.source+":"+a.line+":"+a.column;if(o){var u=this.location.end,l=r("",a.line.toString().length," "),s=o[i.line-1],d=(i.line===u.line?u.column:s.length+1)-i.column||1;e+="\n --\x3e "+c+"\n"+l+" |\n"+a.line+" | "+s+"\n"+l+" | "+r("",i.column-1," ")+r("",d,"^")}else e+="\n at "+c}return e},e.buildMessage=function(t,e){var r={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e=t.parts.map((function(t){return Array.isArray(t)?i(t[0])+"-"+i(t[1]):i(t)}));return"["+(t.inverted?"^":"")+e.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function a(t){return r[t.type](t)}return"Expected "+function(t){var e,r,n=t.map(a);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."},{StartRules:["program"],SyntaxError:e,parse:function(r,n){var o,i,a,c,u={},l=(n=void 0!==n?n:{}).grammarSource,s={program:Fo},d=Fo,f="{",h="}",g="msc",p="xu",m=",",b=";",y="hscale",x="arcgradient",v="=",w="width",C="wordwraparcs",_="wordwrapentities",k="wordwrapboxes",S="watermark",E="[",L="]",A="*",O="|||",T="...",M="---",P="--",j="<->",D="==",F="<<=>>",I="<=>",B="..",N="<<>>",H="::",R="<:>",W="->",G="=>>",X="=>",V=">>",z=":>",$="-x",q="<-",U="<<=",Y="<=",Z="<<",K="<:",J="x-",Q="note",tt="abox",et="rbox",rt="box",nt="alt",ot="else",it="opt",at="break",ct="par",ut="seq",lt="strict",st="neg",dt="critical",ft="ignore",ht="consider",gt="assert",pt="loop",mt="ref",bt="exc",yt="activate",xt="deactivate",vt="label",wt="idurl",Ct="id",_t="url",kt="linecolor",St="linecolour",Et="textcolor",Lt="textcolour",At="textbgcolor",Ot="textbgcolour",Tt="arclinecolor",Mt="arclinecolour",Pt="arctextcolor",jt="arctextcolour",Dt="arctextbgcolor",Ft="arctextbgcolour",It="arcskip",Bt="title",Nt="activation",Ht='"',Rt='\\"',Wt="/*",Gt="*/",Xt="//",Vt="#",zt=".",$t="true",qt="false",Ut="on",Yt="off",Zt="auto",Kt=/^[A-Za-z_0-9]/,Jt=/^[ \t]/,Qt=/^[\r\n]/,te=/^[^\r\n]/,ee=/^[0-9]/,re=/^[0-1]/,ne=Oo("{",!1),oe=Oo("}",!1),ie=Oo("msc",!0),ae=Oo("xu",!0),ce=Oo(",",!1),ue=Oo(";",!1),le=Mo("option"),se=Oo("hscale",!0),de=Oo("arcgradient",!0),fe=Oo("=",!1),he=Oo("width",!0),ge=Oo("wordwraparcs",!0),pe=Oo("wordwrapentities",!0),me=Oo("wordwrapboxes",!0),be=Oo("watermark",!0),ye=Mo("entity"),xe=Oo("[",!1),ve=Oo("]",!1),we=Oo("*",!1),Ce=Mo("empty row"),_e=Oo("|||",!1),ke=Oo("...",!1),Se=Mo("---"),Ee=Oo("---",!1),Le=Mo("bi-directional arrow"),Ae=Oo("--",!1),Oe=Oo("<->",!1),Te=Oo("==",!1),Me=Oo("<<=>>",!1),Pe=Oo("<=>",!1),je=Oo("..",!1),De=Oo("<<>>",!1),Fe=Oo("::",!1),Ie=Oo("<:>",!1),Be=Mo("left to right arrow"),Ne=Oo("->",!1),He=Oo("=>>",!1),Re=Oo("=>",!1),We=Oo(">>",!1),Ge=Oo(":>",!1),Xe=Oo("-x",!0),Ve=Mo("right to left arrow"),ze=Oo("<-",!1),$e=Oo("<<=",!1),qe=Oo("<=",!1),Ue=Oo("<<",!1),Ye=Oo("<:",!1),Ze=Oo("x-",!0),Ke=Mo("box"),Je=Oo("note",!0),Qe=Oo("abox",!0),tr=Oo("rbox",!0),er=Oo("box",!0),rr=Mo("inline expression"),nr=Oo("alt",!0),or=Oo("else",!0),ir=Oo("opt",!0),ar=Oo("break",!0),cr=Oo("par",!0),ur=Oo("seq",!0),lr=Oo("strict",!0),sr=Oo("neg",!0),dr=Oo("critical",!0),fr=Oo("ignore",!0),hr=Oo("consider",!0),gr=Oo("assert",!0),pr=Oo("loop",!0),mr=Oo("ref",!0),br=Oo("exc",!0),yr=Mo("activate or deactivate"),xr=Oo("activate",!0),vr=Oo("deactivate",!0),wr=Mo("attribute name"),Cr=Oo("label",!0),_r=Oo("idurl",!0),kr=Oo("id",!0),Sr=Oo("url",!0),Er=Oo("linecolor",!0),Lr=Oo("linecolour",!0),Ar=Oo("textcolor",!0),Or=Oo("textcolour",!0),Tr=Oo("textbgcolor",!0),Mr=Oo("textbgcolour",!0),Pr=Oo("arclinecolor",!0),jr=Oo("arclinecolour",!0),Dr=Oo("arctextcolor",!0),Fr=Oo("arctextcolour",!0),Ir=Oo("arctextbgcolor",!0),Br=Oo("arctextbgcolour",!0),Nr=Oo("arcskip",!0),Hr=Oo("title",!0),Rr=Oo("activation",!0),Wr=Mo("double quoted string"),Gr=Oo('"',!1),Xr=Oo('\\"',!1),Vr={type:"any"},zr=Mo("identifier"),$r=To([["A","Z"],["a","z"],"_",["0","9"]],!1,!1),qr=Mo("whitespace"),Ur=To([" ","\t"],!1,!1),Yr=Mo("lineend"),Zr=To(["\r","\n"],!1,!1),Kr=Oo("/*",!1),Jr=Oo("*/",!1),Qr=Oo("//",!1),tn=Oo("#",!1),en=To(["\r","\n"],!0,!1),rn=Mo("comment"),nn=Mo("number"),on=To([["0","9"]],!1,!1),an=Oo(".",!1),cn=Mo("boolean"),un=Oo("true",!0),ln=Oo("false",!0),sn=Oo("on",!0),dn=Oo("off",!0),fn=To([["0","1"]],!1,!1),hn=Mo("size"),gn=Oo("auto",!0),pn=function(e,r){return r.entities=r.entities||[],t.checkForUndeclaredEntities(r.entities,r.arcs),r={meta:t.getMetaInfo(r.options,r.arcs),...r},e.length>0&&(r={precomment:e,...r}),r},mn=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},bn=function(t){return t},yn=function(t){return t},xn=function(t){return t[0].concat(t[1]).reduce(((t,e)=>Object.assign(t,e)),{})},vn=function(e,r){return t.nameValue2Option(e,r)},wn=function(e,r){return t.nameValue2Option(e,r)},Cn=function(e,r){return t.nameValue2Option(e,t.flattenBoolean(r))},_n=function(e,r){return t.nameValue2Option(e,t.flattenBoolean(r))},kn=function(e,r){return t.nameValue2Option(e,t.flattenBoolean(r))},Sn=function(e,r){return t.nameValue2Option(e,r)},En=function(t){return t},Ln=function(t){return t},An=function(t){return t[0].concat(t[1])},On=function(t,e){return e},Tn=function(t,e){return{name:t,...e}},Mn=function(t,e){return e},Pn=function(r,n){return t.isMscGenKeyword(r)&&function(t,r){throw function(t,r){return new e(t,null,null,r)}(t,r=void 0!==r?r:jo(ko,_o))}("MscGen keywords aren't allowed as entity names (embed them in quotes if you need them)"),{name:r,...n}},jn=function(t){return t},Dn=function(t){return t},Fn=function(t){return t},In=function(t){return t[0].concat(t[1])},Bn=function(t){return t},Nn=function(t){return t},Hn=function(t){return t},Rn=function(t,e){return e},Wn=function(t,e){return{...t,...e}},Gn=function(t){return{kind:t}},Xn=function(t){return{kind:t}},Vn=function(t,e,r){return{kind:e,from:t,to:r}},zn=function(t,e){return{kind:t,from:"*",to:e}},$n=function(t,e){return{kind:e,from:t,to:"*"}},qn=function(t,e){return{kind:e,from:t,to:"*"}},Un=function(t,e,r,n){return n},Yn=function(t,e,r,n,o){return{kind:e,from:t,to:r,arcs:o,...n}},Zn=function(t){return t.toLowerCase()},Kn=function(t){return t.toLowerCase()},Jn=function(t){return t},Qn=function(t){return t},to=function(t){return t[0].concat(t[1]).reduce(((t,e)=>Object.assign(t,e)),{})},eo=function(t){return{activation:"activate"===t.toLowerCase()}},ro=function(e,r){var n={};return"activation"===e.toLowerCase()?n.activation=t.flattenBoolean(r):n[e.toLowerCase().replace("colour","color")]=r,n},no=function(t){return t.join("")},oo=function(t){return t},io=function(t){return t.join("")},ao=function(t){return t},co=function(t){return t},uo=function(t){return t},lo=function(t,e,r){return t+e.join("")+r},so=function(t,e){return t+e.join("")},fo=function(t){return t},ho=function(t){return t.toString()},go=function(t){return t.toString()},po=function(t){return parseInt(t.join(""),10)},mo=function(t){return parseFloat(t.join(""))},bo=function(t){return t},yo=function(t){return t.toString()},xo=function(t){return t},vo=function(t){return t},wo=function(t){return t.toString()},Co=function(t){return t.toLowerCase()},_o=0|n.peg$currPos,ko=_o,So=[{line:1,column:1}],Eo=_o,Lo=n.peg$maxFailExpected||[],Ao=0|n.peg$silentFails;if(n.startRule){if(!(n.startRule in s))throw new Error("Can't start parsing from rule \""+n.startRule+'".');d=s[n.startRule]}function Oo(t,e){return{type:"literal",text:t,ignoreCase:e}}function To(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function Mo(t){return{type:"other",description:t}}function Po(t){var e,n=So[t];if(n)return n;if(t>=So.length)e=So.length-1;else for(e=t;!So[--e];);for(n={line:(n=So[e]).line,column:n.column};e<t;)10===r.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return So[t]=n,n}function jo(t,e,r){var n=Po(t),o=Po(e),i={source:l,start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:o.line,column:o.column}};return r&&l&&"function"==typeof l.offset&&(i.start=l.offset(i.start),i.end=l.offset(i.end)),i}function Do(t){_o<Eo||(_o>Eo&&(Eo=_o,Lo=[]),Lo.push(t))}function Fo(){var t,e,n,o,i;return t=_o,e=ri(),function(){var t;return(t=r.substr(_o,3)).toLowerCase()===g?_o+=3:(t=u,0===Ao&&Do(ie)),t===u&&((t=r.substr(_o,2)).toLowerCase()===p?_o+=2:(t=u,0===Ao&&Do(ae))),t}()!==u?(ri(),123===r.charCodeAt(_o)?(n=f,_o++):(n=u,0===Ao&&Do(ne)),n!==u?(ri(),o=function(){var t,e,n,o;return t=_o,(e=function(){var t,e,n,o,i,a;for(t=_o,e=_o,n=[],o=_o,(i=Io())!==u?(44===r.charCodeAt(_o)?(a=m,_o++):(a=u,0===Ao&&Do(ce)),a!==u?(ko=o,o=bn(i)):(_o=o,o=u)):(_o=o,o=u);o!==u;)n.push(o),o=_o,(i=Io())!==u?(44===r.charCodeAt(_o)?(a=m,_o++):(a=u,0===Ao&&Do(ce)),a!==u?(ko=o,o=bn(i)):(_o=o,o=u)):(_o=o,o=u);return o=_o,(i=Io())!==u?(59===r.charCodeAt(_o)?(a=b,_o++):(a=u,0===Ao&&Do(ue)),a!==u?(ko=o,o=yn(i)):(_o=o,o=u)):(_o=o,o=u),o!==u?e=n=[n,o]:(_o=e,e=u),e!==u&&(ko=t,e=xn(e)),e}())===u&&(e=null),(n=function(){var t,e,n,o,i,a;for(t=_o,e=_o,n=[],o=_o,(i=Bo())!==u?(44===r.charCodeAt(_o)?(a=m,_o++):(a=u,0===Ao&&Do(ce)),a!==u?(ko=o,o=En(i)):(_o=o,o=u)):(_o=o,o=u);o!==u;)n.push(o),o=_o,(i=Bo())!==u?(44===r.charCodeAt(_o)?(a=m,_o++):(a=u,0===Ao&&Do(ce)),a!==u?(ko=o,o=En(i)):(_o=o,o=u)):(_o=o,o=u);return o=_o,(i=Bo())!==u?(59===r.charCodeAt(_o)?(a=b,_o++):(a=u,0===Ao&&Do(ue)),a!==u?(ko=o,o=Ln(i)):(_o=o,o=u)):(_o=o,o=u),o!==u?e=n=[n,o]:(_o=e,e=u),e!==u&&(ko=t,e=An(e)),e}())===u&&(n=null),(o=No())===u&&(o=null),ko=t,mn(e,n,o)}(),ri(),125===r.charCodeAt(_o)?(i=h,_o++):(i=u,0===Ao&&Do(oe)),i!==u?(ri(),ko=t,t=pn(e,o)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u),t}function Io(){var t,e,n,o;return Ao++,t=_o,ri(),(e=r.substr(_o,6)).toLowerCase()===y?_o+=6:(e=u,0===Ao&&Do(se)),e===u&&((e=r.substr(_o,11)).toLowerCase()===x?_o+=11:(e=u,0===Ao&&Do(de))),e!==u?(ri(),61===r.charCodeAt(_o)?(n=v,_o++):(n=u,0===Ao&&Do(fe)),n!==u?(ri(),(o=function(){var t,e;return Ao++,t=_o,(e=function(){var t,e,n,o;return t=_o,34===r.charCodeAt(_o)?(e=Ht,_o++):(e=u,0===Ao&&Do(Gr)),e!==u&&(n=ni())!==u?(34===r.charCodeAt(_o)?(o=Ht,_o++):(o=u,0===Ao&&Do(Gr)),o!==u?(ko=t,t=go(n)):(_o=t,t=u)):(_o=t,t=u),t}())!==u&&(ko=t,e=fo(e)),(t=e)===u&&(t=_o,(e=ni())!==u&&(ko=t,e=ho(e)),t=e),Ao--,t===u&&(e=u,0===Ao&&Do(nn)),t}())!==u?(ri(),ko=t,t=vn(e,o)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u),t===u&&(t=_o,ri(),(e=r.substr(_o,5)).toLowerCase()===w?_o+=5:(e=u,0===Ao&&Do(he)),e!==u?(ri(),61===r.charCodeAt(_o)?(n=v,_o++):(n=u,0===Ao&&Do(fe)),n!==u?(ri(),(o=function(){var t;return Ao++,(t=function(){var t,e,n,o;return t=_o,34===r.charCodeAt(_o)?(e=Ht,_o++):(e=u,0===Ao&&Do(Gr)),e!==u&&(n=ci())!==u?(34===r.charCodeAt(_o)?(o=Ht,_o++):(o=u,0===Ao&&Do(Gr)),o!==u?(ko=t,t=vo(n)):(_o=t,t=u)):(_o=t,t=u),t}())===u&&(t=ci()),Ao--,t===u&&0===Ao&&Do(hn),t}())!==u?(ri(),ko=t,t=wn(e,o)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u),t===u&&(t=_o,ri(),(e=r.substr(_o,12)).toLowerCase()===C?_o+=12:(e=u,0===Ao&&Do(ge)),e!==u?(ri(),61===r.charCodeAt(_o)?(n=v,_o++):(n=u,0===Ao&&Do(fe)),n!==u?(ri(),(o=ii())!==u?(ri(),ko=t,t=Cn(e,o)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u),t===u&&(t=_o,ri(),(e=r.substr(_o,16)).toLowerCase()===_?_o+=16:(e=u,0===Ao&&Do(pe)),e!==u?(ri(),61===r.charCodeAt(_o)?(n=v,_o++):(n=u,0===Ao&&Do(fe)),n!==u?(ri(),(o=ii())!==u?(ri(),ko=t,t=_n(e,o)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u),t===u&&(t=_o,ri(),(e=r.substr(_o,13)).toLowerCase()===k?_o+=13:(e=u,0===Ao&&Do(me)),e!==u?(ri(),61===r.charCodeAt(_o)?(n=v,_o++):(n=u,0===Ao&&Do(fe)),n!==u?(ri(),(o=ii())!==u?(ri(),ko=t,t=kn(e,o)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u),t===u&&(t=_o,ri(),(e=r.substr(_o,9)).toLowerCase()===S?_o+=9:(e=u,0===Ao&&Do(be)),e!==u?(ri(),61===r.charCodeAt(_o)?(n=v,_o++):(n=u,0===Ao&&Do(fe)),n!==u?(ri(),(o=$o())!==u?(ri(),ko=t,t=Sn(e,o)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u)))))),Ao--,t===u&&0===Ao&&Do(le),t}function Bo(){var t,e,n,o,i,a;return Ao++,t=_o,ri(),(e=$o())!==u?(ri(),n=_o,91===r.charCodeAt(_o)?(o=E,_o++):(o=u,0===Ao&&Do(xe)),o!==u&&(i=Vo())!==u?(93===r.charCodeAt(_o)?(a=L,_o++):(a=u,0===Ao&&Do(ve)),a!==u?(ko=n,n=On(e,i)):(_o=n,n=u)):(_o=n,n=u),n===u&&(n=null),o=ri(),ko=t,t=Tn(e,n)):(_o=t,t=u),t===u&&(t=_o,ri(),(e=Uo())!==u?(ri(),n=_o,91===r.charCodeAt(_o)?(o=E,_o++):(o=u,0===Ao&&Do(xe)),o!==u&&(i=Vo())!==u?(93===r.charCodeAt(_o)?(a=L,_o++):(a=u,0===Ao&&Do(ve)),a!==u?(ko=n,n=Mn(e,i)):(_o=n,n=u)):(_o=n,n=u),n===u&&(n=null),o=ri(),ko=t,t=Pn(e,n)):(_o=t,t=u)),Ao--,t===u&&0===Ao&&Do(ye),t}function No(){var t,e,n,o;if(t=[],e=_o,(n=Ho())!==u?(ri(),59===r.charCodeAt(_o)?(o=b,_o++):(o=u,0===Ao&&Do(ue)),o!==u?(ko=e,e=jn(n)):(_o=e,e=u)):(_o=e,e=u),e!==u)for(;e!==u;)t.push(e),e=_o,(n=Ho())!==u?(ri(),59===r.charCodeAt(_o)?(o=b,_o++):(o=u,0===Ao&&Do(ue)),o!==u?(ko=e,e=jn(n)):(_o=e,e=u)):(_o=e,e=u);else t=u;return t}function Ho(){var t,e,n,o,i,a;for(t=_o,e=_o,n=[],o=_o,(i=Ro())!==u?(ri(),44===r.charCodeAt(_o)?(a=m,_o++):(a=u,0===Ao&&Do(ce)),a!==u?(ko=o,o=Dn(i)):(_o=o,o=u)):(_o=o,o=u);o!==u;)n.push(o),o=_o,(i=Ro())!==u?(ri(),44===r.charCodeAt(_o)?(a=m,_o++):(a=u,0===Ao&&Do(ce)),a!==u?(ko=o,o=Dn(i)):(_o=o,o=u)):(_o=o,o=u);return o=_o,(i=Ro())!==u&&(ko=o,i=Fn(i)),(o=i)!==u?e=n=[n,o]:(_o=e,e=u),e!==u&&(ko=t,e=In(e)),e}function Ro(){var t;return(t=function(){var t,e,n,o,i,a;return t=_o,e=_o,(n=function(){var t,e;return t=_o,ri(),(e=function(){var t;return Ao++,r.substr(_o,3)===O?(t=O,_o+=3):(t=u,0===Ao&&Do(_e)),t===u&&(r.substr(_o,3)===T?(t=T,_o+=3):(t=u,0===Ao&&Do(ke))),Ao--,t===u&&0===Ao&&Do(Ce),t}())!==u?(ri(),ko=t,t=Gn(e)):(_o=t,t=u),t}())!==u&&(ko=e,n=Bn(n)),(e=n)===u&&(e=_o,(n=function(){var t,e,n,o;return t=_o,ri(),(e=qo())!==u?(ri(),(n=function(){var t,e;return t=_o,(e=Wo())===u&&(e=Go())===u&&(e=Xo())===u&&(e=function(){var t;return Ao++,(t=r.substr(_o,4)).toLowerCase()===Q?_o+=4:(t=u,0===Ao&&Do(Je)),t===u&&((t=r.substr(_o,4)).toLowerCase()===tt?_o+=4:(t=u,0===Ao&&Do(Qe)),t===u&&((t=r.substr(_o,4)).toLowerCase()===et?_o+=4:(t=u,0===Ao&&Do(tr)),t===u&&((t=r.substr(_o,3)).toLowerCase()===rt?_o+=3:(t=u,0===Ao&&Do(er))))),Ao--,t===u&&0===Ao&&Do(Ke),t}()),e!==u&&(ko=t,e=Zn(e)),e}())!==u?(ri(),(o=qo())!==u?(ri(),ko=t,t=Vn(e,n,o)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u),t===u&&(t=_o,ri(),42===r.charCodeAt(_o)?(e=A,_o++):(e=u,0===Ao&&Do(we)),e!==u?(ri(),(n=Xo())!==u?(ri(),(o=qo())!==u?(ri(),ko=t,t=zn(n,o)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u),t===u&&(t=_o,ri(),(e=qo())!==u?(ri(),(n=Go())!==u?(ri(),42===r.charCodeAt(_o)?(o=A,_o++):(o=u,0===Ao&&Do(we)),o!==u?(ri(),ko=t,t=$n(e,n)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u),t===u&&(t=_o,ri(),(e=qo())!==u?(ri(),(n=Wo())!==u?(ri(),42===r.charCodeAt(_o)?(o=A,_o++):(o=u,0===Ao&&Do(we)),o!==u?(ri(),ko=t,t=qn(e,n)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u)))),t}())!==u&&(ko=e,n=Nn(n)),(e=n)===u&&(e=_o,(n=function(){var t,e;return t=_o,ri(),(e=function(){var t;return Ao++,r.substr(_o,3)===M?(t=M,_o+=3):(t=u,0===Ao&&Do(Ee)),Ao--,t===u&&0===Ao&&Do(Se),t}())!==u?(ri(),ko=t,t=Xn(e)):(_o=t,t=u),t}())!==u&&(ko=e,n=Hn(n)),e=n)),e!==u?(n=_o,91===r.charCodeAt(_o)?(o=E,_o++):(o=u,0===Ao&&Do(xe)),o!==u&&(i=Vo())!==u?(93===r.charCodeAt(_o)?(a=L,_o++):(a=u,0===Ao&&Do(ve)),a!==u?(ko=n,n=Rn(e,i)):(_o=n,n=u)):(_o=n,n=u),n===u&&(n=null),ko=t,t=Wn(e,n)):(_o=t,t=u),t}())===u&&(t=function(){var t,e,n,o,i,a,c,l,s,d;return t=_o,ri(),(e=qo())!==u?(ri(),(n=function(){var t,e;return Ao++,t=_o,(e=r.substr(_o,3)).toLowerCase()===nt?_o+=3:(e=u,0===Ao&&Do(nr)),e===u&&((e=r.substr(_o,4)).toLowerCase()===ot?_o+=4:(e=u,0===Ao&&Do(or)),e===u&&((e=r.substr(_o,3)).toLowerCase()===it?_o+=3:(e=u,0===Ao&&Do(ir)),e===u&&((e=r.substr(_o,5)).toLowerCase()===at?_o+=5:(e=u,0===Ao&&Do(ar)),e===u&&((e=r.substr(_o,3)).toLowerCase()===ct?_o+=3:(e=u,0===Ao&&Do(cr)),e===u&&((e=r.substr(_o,3)).toLowerCase()===ut?_o+=3:(e=u,0===Ao&&Do(ur)),e===u&&((e=r.substr(_o,6)).toLowerCase()===lt?_o+=6:(e=u,0===Ao&&Do(lr)),e===u&&((e=r.substr(_o,3)).toLowerCase()===st?_o+=3:(e=u,0===Ao&&Do(sr)),e===u&&((e=r.substr(_o,8)).toLowerCase()===dt?_o+=8:(e=u,0===Ao&&Do(dr)),e===u&&((e=r.substr(_o,6)).toLowerCase()===ft?_o+=6:(e=u,0===Ao&&Do(fr)),e===u&&((e=r.substr(_o,8)).toLowerCase()===ht?_o+=8:(e=u,0===Ao&&Do(hr)),e===u&&((e=r.substr(_o,6)).toLowerCase()===gt?_o+=6:(e=u,0===Ao&&Do(gr)),e===u&&((e=r.substr(_o,4)).toLowerCase()===pt?_o+=4:(e=u,0===Ao&&Do(pr)),e===u&&((e=r.substr(_o,3)).toLowerCase()===mt?_o+=3:(e=u,0===Ao&&Do(mr)),e===u&&((e=r.substr(_o,3)).toLowerCase()===bt?_o+=3:(e=u,0===Ao&&Do(br)))))))))))))))),e!==u&&(ko=t,e=Kn(e)),Ao--,(t=e)===u&&(e=u,0===Ao&&Do(rr)),t}())!==u?(ri(),(o=qo())!==u?(ri(),i=_o,91===r.charCodeAt(_o)?(a=E,_o++):(a=u,0===Ao&&Do(xe)),a!==u&&(c=Vo())!==u?(93===r.charCodeAt(_o)?(l=L,_o++):(l=u,0===Ao&&Do(ve)),l!==u?(ko=i,i=Un(e,n,o,c)):(_o=i,i=u)):(_o=i,i=u),i===u&&(i=null),a=ri(),123===r.charCodeAt(_o)?(c=f,_o++):(c=u,0===Ao&&Do(ne)),c!==u?(l=ri(),(s=No())===u&&(s=null),ri(),125===r.charCodeAt(_o)?(d=h,_o++):(d=u,0===Ao&&Do(oe)),d!==u?(ri(),ko=t,t=Yn(e,n,o,i,s)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u),t}()),t}function Wo(){var t;return Ao++,r.substr(_o,2)===P?(t=P,_o+=2):(t=u,0===Ao&&Do(Ae)),t===u&&(r.substr(_o,3)===j?(t=j,_o+=3):(t=u,0===Ao&&Do(Oe)),t===u&&(r.substr(_o,2)===D?(t=D,_o+=2):(t=u,0===Ao&&Do(Te)),t===u&&(r.substr(_o,5)===F?(t=F,_o+=5):(t=u,0===Ao&&Do(Me)),t===u&&(r.substr(_o,3)===I?(t=I,_o+=3):(t=u,0===Ao&&Do(Pe)),t===u&&(r.substr(_o,2)===B?(t=B,_o+=2):(t=u,0===Ao&&Do(je)),t===u&&(r.substr(_o,4)===N?(t=N,_o+=4):(t=u,0===Ao&&Do(De)),t===u&&(r.substr(_o,2)===H?(t=H,_o+=2):(t=u,0===Ao&&Do(Fe)),t===u&&(r.substr(_o,3)===R?(t=R,_o+=3):(t=u,0===Ao&&Do(Ie)))))))))),Ao--,t===u&&0===Ao&&Do(Le),t}function Go(){var t;return Ao++,r.substr(_o,2)===W?(t=W,_o+=2):(t=u,0===Ao&&Do(Ne)),t===u&&(r.substr(_o,3)===G?(t=G,_o+=3):(t=u,0===Ao&&Do(He)),t===u&&(r.substr(_o,2)===X?(t=X,_o+=2):(t=u,0===Ao&&Do(Re)),t===u&&(r.substr(_o,2)===V?(t=V,_o+=2):(t=u,0===Ao&&Do(We)),t===u&&(r.substr(_o,2)===z?(t=z,_o+=2):(t=u,0===Ao&&Do(Ge)),t===u&&((t=r.substr(_o,2)).toLowerCase()===$?_o+=2:(t=u,0===Ao&&Do(Xe))))))),Ao--,t===u&&0===Ao&&Do(Be),t}function Xo(){var t;return Ao++,r.substr(_o,2)===q?(t=q,_o+=2):(t=u,0===Ao&&Do(ze)),t===u&&(r.substr(_o,3)===U?(t=U,_o+=3):(t=u,0===Ao&&Do($e)),t===u&&(r.substr(_o,2)===Y?(t=Y,_o+=2):(t=u,0===Ao&&Do(qe)),t===u&&(r.substr(_o,2)===Z?(t=Z,_o+=2):(t=u,0===Ao&&Do(Ue)),t===u&&(r.substr(_o,2)===K?(t=K,_o+=2):(t=u,0===Ao&&Do(Ye)),t===u&&((t=r.substr(_o,2)).toLowerCase()===J?_o+=2:(t=u,0===Ao&&Do(Ze))))))),Ao--,t===u&&0===Ao&&Do(Ve),t}function Vo(){var t,e,n,o,i,a;for(t=_o,e=_o,n=[],o=_o,(i=zo())!==u?(44===r.charCodeAt(_o)?(a=m,_o++):(a=u,0===Ao&&Do(ce)),a!==u?(ko=o,o=Jn(i)):(_o=o,o=u)):(_o=o,o=u);o!==u;)n.push(o),o=_o,(i=zo())!==u?(44===r.charCodeAt(_o)?(a=m,_o++):(a=u,0===Ao&&Do(ce)),a!==u?(ko=o,o=Jn(i)):(_o=o,o=u)):(_o=o,o=u);return o=_o,(i=zo())!==u&&(ko=o,i=Qn(i)),(o=i)!==u?e=n=[n,o]:(_o=e,e=u),e!==u&&(ko=t,e=to(e)),e}function zo(){var t;return(t=function(){var t,e,n,o;return t=_o,ri(),(e=function(){var t;return Ao++,(t=r.substr(_o,5)).toLowerCase()===vt?_o+=5:(t=u,0===Ao&&Do(Cr)),t===u&&((t=r.substr(_o,5)).toLowerCase()===wt?_o+=5:(t=u,0===Ao&&Do(_r)),t===u&&((t=r.substr(_o,2)).toLowerCase()===Ct?_o+=2:(t=u,0===Ao&&Do(kr)),t===u&&((t=r.substr(_o,3)).toLowerCase()===_t?_o+=3:(t=u,0===Ao&&Do(Sr)),t===u&&((t=r.substr(_o,9)).toLowerCase()===kt?_o+=9:(t=u,0===Ao&&Do(Er)),t===u&&((t=r.substr(_o,10)).toLowerCase()===St?_o+=10:(t=u,0===Ao&&Do(Lr)),t===u&&((t=r.substr(_o,9)).toLowerCase()===Et?_o+=9:(t=u,0===Ao&&Do(Ar)),t===u&&((t=r.substr(_o,10)).toLowerCase()===Lt?_o+=10:(t=u,0===Ao&&Do(Or)),t===u&&((t=r.substr(_o,11)).toLowerCase()===At?_o+=11:(t=u,0===Ao&&Do(Tr)),t===u&&((t=r.substr(_o,12)).toLowerCase()===Ot?_o+=12:(t=u,0===Ao&&Do(Mr)),t===u&&((t=r.substr(_o,12)).toLowerCase()===Tt?_o+=12:(t=u,0===Ao&&Do(Pr)),t===u&&((t=r.substr(_o,13)).toLowerCase()===Mt?_o+=13:(t=u,0===Ao&&Do(jr)),t===u&&((t=r.substr(_o,12)).toLowerCase()===Pt?_o+=12:(t=u,0===Ao&&Do(Dr)),t===u&&((t=r.substr(_o,13)).toLowerCase()===jt?_o+=13:(t=u,0===Ao&&Do(Fr)),t===u&&((t=r.substr(_o,14)).toLowerCase()===Dt?_o+=14:(t=u,0===Ao&&Do(Ir)),t===u&&((t=r.substr(_o,15)).toLowerCase()===Ft?_o+=15:(t=u,0===Ao&&Do(Br)),t===u&&((t=r.substr(_o,7)).toLowerCase()===It?_o+=7:(t=u,0===Ao&&Do(Nr)),t===u&&((t=r.substr(_o,5)).toLowerCase()===Bt?_o+=5:(t=u,0===Ao&&Do(Hr)),t===u&&((t=r.substr(_o,10)).toLowerCase()===Nt?_o+=10:(t=u,0===Ao&&Do(Rr)))))))))))))))))))),Ao--,t===u&&0===Ao&&Do(wr),t}())!==u?(ri(),61===r.charCodeAt(_o)?(n=v,_o++):(n=u,0===Ao&&Do(fe)),n!==u?(ri(),(o=qo())!==u?(ri(),ko=t,t=ro(e,o)):(_o=t,t=u)):(_o=t,t=u)):(_o=t,t=u),t}())===u&&(t=function(){var t,e;return Ao++,t=_o,ri(),(e=r.substr(_o,8)).toLowerCase()===yt?_o+=8:(e=u,0===Ao&&Do(xr)),e===u&&((e=r.substr(_o,10)).toLowerCase()===xt?_o+=10:(e=u,0===Ao&&Do(vr))),e!==u?(ri(),ko=t,t=eo(e)):(_o=t,t=u),Ao--,t===u&&0===Ao&&Do(yr),t}()),t}function $o(){var t,e,n,o;return Ao++,t=_o,34===r.charCodeAt(_o)?(e=Ht,_o++):(e=u,0===Ao&&Do(Gr)),e!==u?(n=function(){var t,e,n,o;for(t=[],e=_o,n=_o,Ao++,34===r.charCodeAt(_o)?(o=Ht,_o++):(o=u,0===Ao&&Do(Gr)),Ao--,o===u?n=void 0:(_o=n,n=u),n!==u?(r.substr(_o,2)===Rt?(o=Rt,_o+=2):(o=u,0===Ao&&Do(Xr)),o===u&&(r.length>_o?(o=r.charAt(_o),_o++):(o=u,0===Ao&&Do(Vr))),o!==u?(ko=e,e=oo(o)):(_o=e,e=u)):(_o=e,e=u);e!==u;)t.push(e),e=_o,n=_o,Ao++,34===r.charCodeAt(_o)?(o=Ht,_o++):(o=u,0===Ao&&Do(Gr)),Ao--,o===u?n=void 0:(_o=n,n=u),n!==u?(r.substr(_o,2)===Rt?(o=Rt,_o+=2):(o=u,0===Ao&&Do(Xr)),o===u&&(r.length>_o?(o=r.charAt(_o),_o++):(o=u,0===Ao&&Do(Vr))),o!==u?(ko=e,e=oo(o)):(_o=e,e=u)):(_o=e,e=u);return t}(),34===r.charCodeAt(_o)?(o=Ht,_o++):(o=u,0===Ao&&Do(Gr)),o!==u?(ko=t,t=no(n)):(_o=t,t=u)):(_o=t,t=u),Ao--,t===u&&(e=u,0===Ao&&Do(Wr)),t}function qo(){var t;return Ao++,(t=Uo())===u&&(t=$o()),Ao--,t===u&&0===Ao&&Do(zr),t}function Uo(){var t,e,n;if(t=_o,e=[],n=r.charAt(_o),Kt.test(n)?_o++:(n=u,0===Ao&&Do($r)),n!==u)for(;n!==u;)e.push(n),n=r.charAt(_o),Kt.test(n)?_o++:(n=u,0===Ao&&Do($r));else e=u;return e!==u&&(ko=t,e=io(e)),e}function Yo(){var t,e;return Ao++,t=_o,e=r.charAt(_o),Jt.test(e)?_o++:(e=u,0===Ao&&Do(Ur)),e!==u&&(ko=t,e=ao(e)),Ao--,(t=e)===u&&(e=u,0===Ao&&Do(qr)),t}function Zo(){var t,e;return Ao++,t=_o,e=r.charAt(_o),Qt.test(e)?_o++:(e=u,0===Ao&&Do(Zr)),e!==u&&(ko=t,e=co(e)),Ao--,(t=e)===u&&(e=u,0===Ao&&Do(Yr)),t}function Ko(){var t,e,n;return t=_o,e=_o,Ao++,r.substr(_o,2)===Gt?(n=Gt,_o+=2):(n=u,0===Ao&&Do(Jr)),Ao--,n===u?e=void 0:(_o=e,e=u),e!==u?(r.length>_o?(n=r.charAt(_o),_o++):(n=u,0===Ao&&Do(Vr)),n!==u?(ko=t,t=uo(n)):(_o=t,t=u)):(_o=t,t=u),t}function Jo(){var t,e,n,o;if(t=_o,(e=function(){var t;return r.substr(_o,2)===Wt?(t=Wt,_o+=2):(t=u,0===Ao&&Do(Kr)),t}())!==u){for(n=[],o=Ko();o!==u;)n.push(o),o=Ko();(o=function(){var t;return r.substr(_o,2)===Gt?(t=Gt,_o+=2):(t=u,0===Ao&&Do(Jr)),t}())!==u?(ko=t,t=lo(e,n,o)):(_o=t,t=u)}else _o=t,t=u;return t}function Qo(){var t;return t=r.charAt(_o),te.test(t)?_o++:(t=u,0===Ao&&Do(en)),t}function ti(){var t,e,n,o;if(t=_o,(e=function(){var t;return r.substr(_o,2)===Xt?(t=Xt,_o+=2):(t=u,0===Ao&&Do(Qr)),t===u&&(35===r.charCodeAt(_o)?(t=Vt,_o++):(t=u,0===Ao&&Do(tn))),t}())!==u){for(n=[],o=Qo();o!==u;)n.push(o),o=Qo();ko=t,t=so(e,n)}else _o=t,t=u;return t}function ei(){var t;return Ao++,(t=ti())===u&&(t=Jo()),Ao--,t===u&&0===Ao&&Do(rn),t}function ri(){var t,e;for(t=[],(e=Yo())===u&&(e=Zo())===u&&(e=ei());e!==u;)t.push(e),(e=Yo())===u&&(e=Zo())===u&&(e=ei());return t}function ni(){var t;return(t=function(){var t,e,n,o,i;return t=_o,e=_o,(n=oi())!==u?(46===r.charCodeAt(_o)?(o=zt,_o++):(o=u,0===Ao&&Do(an)),o!==u&&(i=oi())!==u?e=n=[n,o,i]:(_o=e,e=u)):(_o=e,e=u),e!==u&&(ko=t,e=mo(e)),e}())===u&&(t=oi()),t}function oi(){var t,e,n;if(t=_o,e=[],n=r.charAt(_o),ee.test(n)?_o++:(n=u,0===Ao&&Do(on)),n!==u)for(;n!==u;)e.push(n),n=r.charAt(_o),ee.test(n)?_o++:(n=u,0===Ao&&Do(on));else e=u;return e!==u&&(ko=t,e=po(e)),e}function ii(){var t,e;return Ao++,t=_o,(e=function(){var t,e,n,o;return t=_o,34===r.charCodeAt(_o)?(e=Ht,_o++):(e=u,0===Ao&&Do(Gr)),e!==u&&(n=ai())!==u?(34===r.charCodeAt(_o)?(o=Ht,_o++):(o=u,0===Ao&&Do(Gr)),o!==u?(ko=t,t=xo(n)):(_o=t,t=u)):(_o=t,t=u),t}())!==u&&(ko=t,e=bo(e)),(t=e)===u&&(t=_o,(e=ai())!==u&&(ko=t,e=yo(e)),t=e),Ao--,t===u&&(e=u,0===Ao&&Do(cn)),t}function ai(){var t;return(t=r.substr(_o,4)).toLowerCase()===$t?_o+=4:(t=u,0===Ao&&Do(un)),t===u&&((t=r.substr(_o,5)).toLowerCase()===qt?_o+=5:(t=u,0===Ao&&Do(ln)),t===u&&((t=r.substr(_o,2)).toLowerCase()===Ut?_o+=2:(t=u,0===Ao&&Do(sn)),t===u&&((t=r.substr(_o,3)).toLowerCase()===Yt?_o+=3:(t=u,0===Ao&&Do(dn)),t===u&&(t=r.charAt(_o),re.test(t)?_o++:(t=u,0===Ao&&Do(fn)))))),t}function ci(){var t,e;return t=_o,(e=ni())!==u&&(ko=t,e=wo(e)),(t=e)===u&&(t=_o,(e=r.substr(_o,4)).toLowerCase()===Zt?_o+=4:(e=u,0===Ao&&Do(gn)),e!==u&&(ko=t,e=Co(e)),t=e),t}if(o=d(),n.peg$library)return{peg$result:o,peg$currPos:_o,peg$FAILED:u,peg$maxFailExpected:Lo,peg$maxFailPos:Eo};if(o!==u&&_o===r.length)return o;throw o!==u&&_o<r.length&&Do({type:"end"}),i=Lo,a=Eo<r.length?r.charAt(Eo):null,c=Eo<r.length?jo(Eo,Eo+1):jo(Eo,Eo),new e(e.buildMessage(i,a),i,a,c)}}})?n.apply(e,o):n)||(t.exports=i)},605:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.freeze({"|||":"empty","...":"empty","---":"empty","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression",else:"inline_expression",opt:"inline_expression",break:"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"});e.default=function(t){return r[t]}},142:(t,e)=>{"use strict";function r(t,e,n){e.forEach((function(e){!function(t,e,n){e.forEach((function(o){!function(t,e,r,n){n.forEach((function(n){n(r,t,e)}))}(t,e,o,n),o.arcs&&r(t,o.arcs,n)}))}(t,e,n)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var o,i;return o=t.entities,i=e,o.forEach((function(t){i.forEach((function(e){e(t)}))})),t.arcs&&r(t.entities,t.arcs,n),t}},386:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.nameAsLabel=h,e.swapRTLArc=m,e.overrideColors=y,e.normalize=w,e.flatten=function(t){return w((0,c.default)(t,[h,g],[m,y,g,p]))};var c=a(r(142)),u=i(r(988)),l=a(r(605)),s=a(r(537)),d=a(r(749)),f=0;function h(t){void 0===t.label&&(t.label=t.name)}function g(t){t.label&&(t.label=u.unescapeString(t.label)),t.id&&(t.id=u.unescapeString(t.id))}function p(t){t.label=Boolean(t.label)?t.label:""}function m(t){if((0,s.default)(t.kind)!==t.kind){t.kind=(0,s.default)(t.kind);var e=t.from;t.from=t.to,t.to=e}}function b(t,e){!t.linecolor&&e.arclinecolor&&(t.linecolor=e.arclinecolor),!t.textcolor&&e.arctextcolor&&(t.textcolor=e.arctextcolor),!t.textbgcolor&&e.arctextbgcolor&&(t.textbgcolor=e.arctextbgcolor)}function y(t,e){if(void 0===e&&(e=[]),t&&t.from){var r=e.find((function(e){return e.name===t.from}));r&&b(t,r)}}function x(t){return t.arcs.reduce((function(t,e){return t+(Boolean(e[0].arcs)?x(e[0])+1:0)}),t.arcs.length)}function v(t,e,r,n){var o=[],i=[],a=[];return t.forEach((function(t){if(t.isVirtual=!1,"inline_expression"===(0,l.default)(t.kind)){if(t.depth=e,t.isVirtual=!0,t.arcs){var o=structuredClone(t);o.numberofrows=x(o),delete o.arcs,i.push(o),t.arcs.forEach((function(t){a=a.concat(v(t,e+1,o.from,o.to)),t.forEach((function(t){b(t,o)}))})),e>f&&(f=e)}else i.push(t);a.push([{kind:"|||",from:t.from,to:t.to,isVirtual:!0}])}else r&&n&&"empty"===(0,l.default)(t.kind)&&(t.from=r,t.to=n,t.depth=e),i.push(t)})),o.push(i),o.concat(a)}function w(t){return f=0,{options:(0,d.default)(t.options),entities:structuredClone(t.entities),arcs:(e=t.arcs,e?e.reduce((function(t,e){return t.concat(v(e,0))}),[]):[]),depth:f+1};var e}},537:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.freeze({"<-":"->","<=":"=>","<<=":"=>>","<<":">>","<:":":>","x-":"-x"});e.default=function(t){return r[t]||t}},749:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Object.assign({wordwraparcs:!1,wordwrapentities:!0,wordwrapboxes:!0},t||{})}},479:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={LINE_WIDTH:2,FONT_SIZE:12}},379:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Thing=void 0;var c=a(r(479)),u=i(r(183)),l=i(r(909)),s=i(r(415)),d=function(){function t(t){this.interEntitySpacing=160,this.height=34,this.width=100,this.entityXHWM=0,this.entity2x={},t&&(this.interEntitySpacing=160*t,this.width=100*t)}return t.prototype.getX=function(t){return this.entity2x[t]},t.prototype.getDims=function(){return{interEntitySpacing:this.interEntitySpacing,height:this.height,width:this.width,entityXHWM:this.entityXHWM}},t.prototype.getOAndD=function(t,e){return{from:this.getX(t)<this.getX(e)?this.getX(t):this.getX(e),to:this.getX(e)>this.getX(t)?this.getX(e):this.getX(t)}},t.prototype.renderEntities=function(t,e,r){var n=this,o=l.createGroup();return this.entityXHWM=0,this.height=this.getMaxEntityHeight(t,r)+2*c.default.LINE_WIDTH,t.forEach((function(t){o.appendChild(n.renderEntity(t,n.entityXHWM,e,r)),n.setX(t,n.entityXHWM),n.entityXHWM+=n.interEntitySpacing})),o},t.prototype.setX=function(t,e){this.entity2x[t.name]=e+this.width/2},t.prototype.getNoEntityLines=function(t,e,r){return u.splitLabel(t,"entity",this.width,e,r).length},t.prototype.sizeEntityBoxToLabel=function(t,e){var r=Math.min(s.getBBox(t).width+4*c.default.LINE_WIDTH,this.interEntitySpacing/3+e.width);return r>=e.width&&(e.x-=(r-e.width)/2,e.width=r),e},t.prototype.renderEntity=function(t,e,r,n){var o=l.createGroup(),i={x:e||0,y:r||0,width:this.width,height:this.height},a=u.createLabel(Object.assign({kind:"entity"},t),Object.assign({},i,{y:i.y+i.height/2}),n);return o.appendChild(l.createRect(this.sizeEntityBoxToLabel(a,i),{class:"entity",color:t.linecolor,bgColor:t.textbgcolor})),o.appendChild(a),o},t.prototype.getMaxEntityHeight=function(t,e){var r=this,n=t[0],o=2;return t.forEach((function(t){var i=r.getNoEntityLines(t.label,c.default.FONT_SIZE,e);i>o&&(o=i,n=t)})),o>2?Math.max(this.height,s.getBBox(this.renderEntity(n,0,0,e)).height):this.height},t}();e.Thing=d},978:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setPrefix=function(t){n=r+t},e.get=function(t){return n+(t||"")};var r="mscgenjs",n=r},348:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getClass=function(t){return i[t]||t},e.getAggregateClass=function(t){return(0,o.default)(t)||t};var o=n(r(605)),i=Object.freeze({"|||":"empty-row","...":"omitted-row","---":"comment-row","->":"signal","=>":"method","=>>":"callback",">>":"return",":>":"emphasised","-x":"lost","<-":"signal","<=":"method","<<=":"callback","<<":"return","<:":"emphasised","x-":"lost","<->":"signal","<=>":"method","<<=>>":"callback","<<>>":"return","<:>":"emphasised","--":"signal","==":"method","..":"return","::":"emphasised"})},139:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getAttributes=function(t,e,r,n,o){var a=[];return i[e]&&i[e].attributes&&(a=i[e].attributes.map((function(i){return{name:i.name,value:i.value.replace(/\{\{signal-marker-end\}\}/g,c(e,n,o)).replace(/\{\{signal-marker-start\}\}/g,u(e,n,o)).replace(/\{\{id\}\}/g,t).replace(/\{\{color\}\}/g,r||"black")}}))),a},e.getMarkerDefs=function(t,e){return function(t){return t.arcs.reduce(s,[]).sort().map(d)}(e).map((function(e){return a[e.kind].variants.map((function(r){return{name:"".concat(t+e.kind+r.name,"-").concat(e.color),path:r.path,color:e.color,type:e.kind}}))})).flat(1/0)};var o=n(r(537)),i={"->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"}],marker:{name:"signal"}},"<->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"},{name:"marker-start",value:"url(#{{id}}{{signal-marker-start}}-{{color}})"}],marker:{name:"signal"}},"=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},">>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},"..":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"--":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"==":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"::":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},":>":{attributes:[{name:"style",value:"stroke:{{color}};"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<:>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},"-x":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}lost-{{color}})"}],marker:{name:"lost",end:""}}},a={signal:{variants:[{name:"",path:"M9,3 l-8, 2"},{name:"-u",path:"M9,3 l-8,-2"},{name:"-l",path:"M9,3 l 8, 2"},{name:"-lu",path:"M9,3 l 8,-2"}]},method:{variants:[{name:"",path:"1,1  9,3  1,5"},{name:"-l",path:"17,1 9,3 17,5"}]},callback:{variants:[{name:"",path:"M 1,1 l 8,2 l-8,2"},{name:"-l",path:"M17,1 l-8,2 l 8,2"}]},lost:{variants:[{name:"",path:"M7,0 l5,6 M7,6 l5,-6"}]}};function c(t,e,r){return e&&r&&["<->","->"].includes(t)?e<r?"signal":"signal-u":""}function u(t,e,r){return"<->"===t&&e<=r?"signal-l":"signal-lu"}function l(t,e){return i[(0,o.default)(t)].marker.name+(Boolean(e)?" "+e:" black")}function s(t,e){function r(e){s(t,e)}return Array.isArray(e)&&e.forEach(r),e.arcs&&e.arcs.forEach(r),e.kind&&i[(0,o.default)(e.kind)]&&i[(0,o.default)(e.kind)].marker&&!t.includes(l(e.kind,e.linecolor))&&t.push(l(e.kind,e.linecolor)),t}function d(t){return{kind:t.split(" ")[0],color:t.split(" ")[1]}}},378:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.clean=void 0,e.render=function(t,e,r,n){var o=Object.freeze((0,u.flatten)(t)),i=function(t,e){return t.document.getElementById(e)||t.document.body}(e,r);return d.setPrefix(r),function(t,e,r,n){var o;k.document=p.bootstrap(e,r,d.get(),h.getMarkerDefs(d.get(),t),n),k.mirrorEntitiesOnBottom=n.mirrorEntitiesOnBottom,k.regularArcTextVerticalAlignment=n.regularArcTextVerticalAlignment,x.init(k.document),k.layers={lifeline:(o=k.document).getElementById(d.get("_lifelines")),sequence:o.getElementById(d.get("_sequence")),notes:o.getElementById(d.get("_notes")),inline:o.getElementById(d.get("_arcspans")),watermark:o.getElementById(d.get("_watermark"))},k.maxDepth=t.depth,function(t,e){v=new s.Thing(e&&e.hscale),function(t,e){t.arcRowHeight=C,t.arcGradient=_,t.wordWrapArcs=!1,e.arcgradient&&(t.arcRowHeight=parseInt(e.arcgradient,10)+C,t.arcGradient=parseInt(e.arcgradient,10)+_),t.wordWrapArcs=Boolean(e.wordwraparcs)}(t,e)}(k,t.options)}(o,e,i,n||{}),function(t){var e,r,n;E(t.entities,0,t.options),b.clear(v.getDims().height,k.arcRowHeight),function(t,e,r){S=[],T(e,"arcrow",k.arcRowHeight,b.get(-1).y).forEach((function(t){k.layers.lifeline.appendChild(t)})),function(t,e,r){var n=0;t.forEach((function(t,o){t.every((function(t){return t.isVirtual}))?b.set(o,Math.max(b.get(o).height,A(t,e,r))):(b.set(o,Math.max(b.get(o).height,A(t,e,r)),n),n++)}))}(t,e,r),t.forEach((function(t,n){!function(t,e,r,n){var o="arcrow",i=[];t.forEach((function(t){var a={};switch((0,c.default)(t.kind)){case"empty":a=M(t,b.get(e).y),"..."===t.kind&&(o="arcrowomit"),i.push({layer:k.layers.sequence,element:a});break;case"box":a=D(v.getOAndD(t.from,t.to),t,b.get(e).y,n),i.push({title:t.title,layer:k.layers.notes,element:a});break;case"inline_expression":a=O(t,b.get(e).y),i.push({layer:k.layers.notes,element:a}),S.push({arc:t,rownum:e});break;default:a=L(t,r,i,e,n)}})),T(r,o,b.get(e).height,b.get(e).y).forEach((function(t){k.layers.lifeline.appendChild(t)})),i.forEach((function(t){t.element&&(t.title&&t.element.appendChild(y.createTitle(t.title)),t.layer.appendChild(t.element))}))}(t,n,e,r)})),S.forEach((function(t){var e,r,n,o;k.layers.inline.appendChild((e=t,r=b.get(t.rownum).y,n=b.get(e.rownum).y,o=b.get(e.rownum+e.arc.numberofrows+1).y-n,e.arc.label="",function(t,e,r,n){var o=2*k.maxDepth*l.default.LINE_WIDTH,i=t.to-t.from+v.getDims().interEntitySpacing-2*l.default.LINE_WIDTH-o,a=t.from-(v.getDims().interEntitySpacing-2*l.default.LINE_WIDTH-o)/2,c=2*(k.maxDepth-e.depth)*l.default.LINE_WIDTH;return y.createRect({width:i+2*c,height:r||k.arcRowHeight-2*l.default.LINE_WIDTH,x:a-c,y:n},{class:"box inline_expression ".concat(e.kind),color:e.linecolor,bgColor:e.textbgcolor})}(v.getOAndD(e.arc.from,e.arc.to),e.arc,o,r)))}))}(t.arcs,t.entities,t.options),k.mirrorEntitiesOnBottom&&(e=t.entities,r=t.options,n=b.getLast().y+(b.getLast().height+k.arcRowHeight)/2,T(e,"arcrow",k.arcRowHeight,n).forEach((function(t){k.layers.lifeline.appendChild(t)})),E(e,n+k.arcRowHeight/2,r))}(o),function(t){var e,r,n=function(t){var e=m.determineDepthCorrection(t.depth,l.default.LINE_WIDTH),r=b.getLast(),n={width:t.entities.length*v.getDims().interEntitySpacing+e,height:Boolean(k.mirrorEntitiesOnBottom)?2*v.getDims().height+r.y+r.height+2*w:r.y+r.height/2+2*w,horizontaltransform:(v.getDims().interEntitySpacing+e-v.getDims().width)/2,autoscale:!!t.options&&!!t.options.width&&"auto"===t.options.width,verticaltransform:w,scale:1};return n.x=0-n.horizontaltransform,n.y=0-n.verticaltransform,n}(t);e=n,(r=k.document.getElementById(d.get("_background")))&&r.appendChild(y.createRect(e,{class:"bglayer"})),function(t){var e=k.document.getElementById(d.get()),r=k.document.getElementById(d.get("_body"));r&&e&&(r.setAttribute("transform","translate(".concat(t.horizontaltransform,",").concat(t.verticaltransform,") ")+"scale(".concat(t.scale,",").concat(t.scale,")")),t.autoscale&&!0===t.autoscale?y.updateSVG(e,{width:"100%",height:"100%",viewBox:"0 0 ".concat(t.width.toString()," ").concat(t.height.toString())}):y.updateSVG(e,{width:t.width.toString(),height:t.height.toString(),viewBox:"0 0 ".concat(t.width.toString()," ").concat(t.height.toString())}))}(n=function(t,e){return t.watermark&&function(t,e){k.layers.watermark.appendChild(y.createDiagonalText(t,e,"watermark"))}(t.watermark,e),t.width&&"auto"!==t.width&&(e=m.scaleCanvasToWidth(t.width,e)),e}(t.options,n))}(o),x.webkitNamespaceBugWorkaround(i.innerHTML)};var c=a(r(605)),u=r(386),l=a(r(479)),s=r(379),d=i(r(978)),f=i(r(348)),h=i(r(139)),g=i(r(183)),p=i(r(339)),m=i(r(7)),b=i(r(305)),y=i(r(909)),x=i(r(415)),v=new s.Thing(0),w=3,C=38,_=0,k=Object.seal({arcRowHeight:C,arcGradient:_,arcEndX:0,wordWrapArcs:!1,mirrorEntitiesOnBottom:!1,regularArcTextVerticalAlignment:"middle",maxDepth:0,document:{},layers:{lifeline:{},sequence:{},notes:{},inline:{},watermark:{}}}),S=[];function E(t,e,r){k.layers.sequence.appendChild(v.renderEntities(t,e,r)),k.arcEndX=v.getDims().entityXHWM-v.getDims().interEntitySpacing+v.getDims().width}function L(t,e,r,n,o){var i=y.createGroup();return t.from&&t.to&&("*"===t.to?(function(t,e,r,n,o){var i=0,a=t.label,c=v.getX(t.from);t.label="",e.forEach((function(e){var a={};e.name!==t.from&&(i=v.getX(e.name),a=P(t,c,i,n,o),r.push({layer:k.layers.sequence,element:a}))})),t.label=a}(t,e,r,n,o),i=g.createLabel(t,{x:0,y:b.get(n).y,width:k.arcEndX},Object.assign({alignAround:!0,ownBackground:!0},structuredClone(o))),r.push({title:t.title,layer:k.layers.sequence,element:i})):(i=P(t,v.getX(t.from),v.getX(t.to),n,o),r.push({title:t.title,layer:k.layers.sequence,element:i}))),i}function A(t,e,r){var n=0;return t.forEach((function(t){var o;switch((0,c.default)(t.kind)){case"empty":o=M(t,0);break;case"box":o=D(v.getOAndD(t.from,t.to),t,0,r);break;case"inline_expression":o=O(t,0);break;default:var i=structuredClone(t);i.arcskip=0,o=L(i,e,[],0,r)}n=Math.max(n,x.getBBox(o).height+2*l.default.LINE_WIDTH)})),n}function O(t,e){var r=v.getOAndD(t.from,t.to),n=e>0,o=2*k.maxDepth*l.default.LINE_WIDTH,i=r.to-r.from+(v.getDims().interEntitySpacing-2*l.default.LINE_WIDTH)-7-l.default.LINE_WIDTH,a=r.from-(v.getDims().interEntitySpacing-3*l.default.LINE_WIDTH-o)/2-2*(k.maxDepth-t.depth)*l.default.LINE_WIDTH,c=y.createGroup();n||(t.label=t.kind+(t.label?": "+t.label:""));var u=g.createLabel(t,{x:a+l.default.LINE_WIDTH-i/2,y:e+k.arcRowHeight/4,width:i},{alignLeft:!0,ownBackground:!1,wordwraparcs:k.wordWrapArcs}),s=x.getBBox(u),d=Math.max(s.height+2*l.default.LINE_WIDTH,k.arcRowHeight/2-2*l.default.LINE_WIDTH),f=Math.min(s.width+2*l.default.LINE_WIDTH,i),h=y.createEdgeRemark({width:f-l.default.LINE_WIDTH+7,height:d,x:a,y:e},{class:"box inline_expression_label",color:t.linecolor,bgColor:t.textbgcolor,foldSize:7});return c.appendChild(h),c.appendChild(u),c}function T(t,e,r,n){return r<k.arcRowHeight&&(r=k.arcRowHeight),t.map((function(t){var o=y.createLine({xFrom:v.getX(t.name),yFrom:0-r/2+(n||0),xTo:v.getX(t.name),yTo:r/2+(n||0)},{class:e});return t.linecolor&&o.setAttribute("style","stroke:".concat(t.linecolor,";")),o}))}function M(t,e){return"---"===t.kind?function(t,e,r){var n=0,o=k.arcEndX,i="comment",a=y.createGroup();if(t.from&&t.to){var c=1*k.maxDepth*l.default.LINE_WIDTH,u=2*(k.maxDepth-t.depth)*l.default.LINE_WIDTH;n=e.from-(v.getDims().interEntitySpacing+2*l.default.LINE_WIDTH)/2-(u-c),o=e.to+(v.getDims().interEntitySpacing+2*l.default.LINE_WIDTH)/2+(u-c),i="inline_expression_divider"}var s=y.createLine({xFrom:n,yFrom:r,xTo:o,yTo:r},{class:i});return a.appendChild(s),a.appendChild(j(t,e,r)),t.linecolor&&s.setAttribute("style","stroke:".concat(t.linecolor,";")),a}(t,v.getOAndD(t.from,t.to),e):j(t,v.getOAndD(t.from,t.to),e)}function P(t,e,r,n,o){var i,a=y.createGroup(),c="arc ";c+="<:>"===(i=t.kind)?"bidi ":"::"===i?"nodi ":"",c+="".concat(f.getAggregateClass(t.kind)," ").concat(f.getClass(t.kind));var u=[":>","::","<:>"].includes(t.kind),s=function(t,e,r){var n=b.get(t).y+e;if(r){var o=Math.floor(r),i=r-o,a=b.get(t).realRowNumber;n=b.getByRealRowNumber(a+o).y+i*(b.getByRealRowNumber(a+o+1).y-b.getByRealRowNumber(a+o).y)}return n}(n,k.arcGradient,t.arcskip);if(e===(r=m.determineArcXTo(t.kind,e,r))){a.appendChild(function(t,e,r,n,o,i){var a=k.arcRowHeight/5*2,c=v.getDims().interEntitySpacing/2,u={},s="arc ".concat(f.getAggregateClass(t)," ").concat(f.getClass(t));if(n){u=y.createGroup();var g=y.createUTurn({x:e,y:o,width:c-2*l.default.LINE_WIDTH,height:a},o+r+a-2*l.default.LINE_WIDTH,{class:s,dontHitHome:"::"!==t,lineWidth:l.default.LINE_WIDTH}),p=y.createUTurn({x:e,y:o,width:c,height:a},o+r+a-l.default.LINE_WIDTH,{lineWidth:l.default.LINE_WIDTH}),m=y.createUTurn({x:e,y:o,width:c,height:a},o+r+a,{class:s,dontHitHome:"::"!==t,lineWidth:l.default.LINE_WIDTH});i&&g.setAttribute("style","stroke:".concat(i)),h.getAttributes(d.get(),t,i,e,e).forEach((function(t){p.setAttribute(t.name,t.value)})),p.setAttribute("style","stroke:transparent;"),Boolean(i)&&m.setAttribute("style","stroke:".concat(i)),u.appendChild(g),u.appendChild(m),u.appendChild(p),u.setAttribute("class",s)}else u=y.createUTurn({x:e,y:o,width:c,height:a},o+r+a,{class:s,dontHitHome:"-x"===t,lineWidth:l.default.LINE_WIDTH}),h.getAttributes(d.get(),t,i,e,e).forEach((function(t){u.setAttribute(t.name,t.value)}));return u}(t.kind,e,s-b.get(n).y-k.arcGradient,u,b.get(n).y,t.linecolor));var p=2*v.getDims().interEntitySpacing/3;a.appendChild(g.createLabel(t,{x:e+1.5*l.default.LINE_WIDTH-p/2,y:b.get(n).y-k.arcRowHeight/5-l.default.LINE_WIDTH/2,width:p},Object.assign({alignLeft:!0,alignAbove:!0,ownBackground:!0},structuredClone(o))))}else{var x=y.createLine({xFrom:e,yFrom:b.get(n).y,xTo:r,yTo:s},{class:c,doubleLine:u});h.getAttributes(d.get(),t.kind,t.linecolor,e,r).forEach((function(t){x.setAttribute(t.name,t.value)})),a.appendChild(x),a.appendChild(g.createLabel(t,{x:e,y:b.get(n).y+(s-b.get(n).y)/2,width:r-e},Object.assign({alignAround:!0,alignAbove:"above"===k.regularArcTextVerticalAlignment,ownBackground:!0},structuredClone(o))))}return a}function j(t,e,r){var n=0,o=k.arcEndX;return t.from&&t.to&&(n=e.from,o=e.to-e.from),g.createLabel(t,{x:n,y:r,width:o},{ownBackground:!0,wordwraparcs:k.wordWrapArcs})}function D(t,e,r,n){var o,i=2*k.maxDepth*l.default.LINE_WIDTH,a=t.to-t.from+v.getDims().interEntitySpacing-2*l.default.LINE_WIDTH-i,c=t.from-(v.getDims().interEntitySpacing-2*l.default.LINE_WIDTH-i)/2,u=y.createGroup(),s=g.createLabel(e,{x:c,y:r,width:a},n),d=x.getBBox(s),f=Math.max(d.height+2*l.default.LINE_WIDTH,k.arcRowHeight-2*l.default.LINE_WIDTH),h={width:a,height:f,x:c,y:r-f/2};switch(e.kind){case"rbox":o=y.createRBox(h,{class:"box rbox",color:e.linecolor,bgColor:e.textbgcolor});break;case"abox":o=y.createABox(h,{class:"box abox",color:e.linecolor,bgColor:e.textbgcolor});break;case"note":o=y.createNote(h,{class:"box note",color:e.linecolor,bgColor:e.textbgcolor,lineWidth:l.default.LINE_WIDTH});break;default:o=y.createRect(h,{class:"box",color:e.linecolor,bgColor:e.textbgcolor})}return u.appendChild(o),u.appendChild(s),u}e.clean=function(t,e){k.document=p.init(e),x.init(k.document),x.removeRenderedSVGFromElement(t)}},183:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.createLabel=function(t,e,r,n){var o=d.createGroup(n);if(r=r||{},t.label){var i=e.x+e.width/2,a=function(t,e){return e.alignAbove&&t.forEach((function(){t.push("")})),e.alignAround&&1===t.length&&t.push(""),t}(g(t.label,t.kind,e.width,l.default.FONT_SIZE,r),r),c=function(t,e,r){return r.alignAround?e.y-(t.length-1)/2*(f.calculateTextHeight()+l.default.LINE_WIDTH+1):e.y-(t.length-1)/2*(f.calculateTextHeight()+1)}(a,e,r);a.forEach((function(e,n){if(""!==e){var a=function(t,e,r,n,o,i){var a,c,u,g=r+(o+1/4)*f.calculateTextHeight(),p=function(t,e){var r=t,n=s.getClass(r),o=s.getAggregateClass(r);return n===o?n+e:o+e+n+e}(n.kind,"-text ");return i.alignLeft&&(p+="anchor-start "),i.alignAround&&(g=r+(o+1/4)*(f.calculateTextHeight()+l.default.LINE_WIDTH)),a=h(function(t,e,r,n,o){var i=0===e?{class:n,url:o.url,id:o.id,idurl:o.idurl}:{class:n,url:o.url};return d.createText(t,r,i)}(t,o,{x:e,y:g},p,n),n.textcolor),c=n.url,u=n.textcolor,h(a,c&&!u?"blue":u)}(e,i,c,t,n,r);r.ownBackground&&o.appendChild((u=a,g=t.textbgcolor,p=d.createRect(f.getBBox(u),{class:"label-text-background"}),g&&p.setAttribute("style","fill:".concat(g,"; stroke:").concat(g,";")),p)),o.appendChild(a)}var u,g,p;c++}))}return o},e.splitLabel=g;var c=a(r(605)),u=a(r(727)),l=a(r(479)),s=i(r(348)),d=i(r(909)),f=i(r(415));function h(t,e){return e&&t.setAttribute("style","fill:".concat(e,";")),t}function g(t,e,r,n,o){return function(t,e){return function(t,e){return"box"===(0,c.default)(t)&&e}(t,e.wordwrapboxes)||function(t,e){return"entity"===t&&e}(t,e.wordwrapentities)||function(t,e){return"box"!==(0,c.default)(t)&&"entity"!==t&&e}(t,e.wordwraparcs)||void 0===t}(e,o)?(0,u.default)(t,function(t,e){var r=Math.abs(t);return r<=160?r/(e/12*8):r<=320?r/(e/12*6.4):r<=480?r/(e/12*5.9):r/(e/12*5.6)}(r,n)):t.split("\\n")}},339:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.init=d,e.bootstrap=function(t,e,r,n,o){s=d(t);var i,a,h=c.createSVG(r,r,function(t){var e="",r=f(t.additionalTemplate);return Boolean(r)&&(e=r.renderMagic),e}(o));return Boolean(o.source)&&h.appendChild(function(t,e){var r=c.createDesc();return r.appendChild(t.document.createTextNode("\n\n# Generated by mscgen_js - https://sverweij.github.io/mscgen_js\n".concat(e))),r}(t,o.source)),h.appendChild(function(t,e,r){var n=c.createDefs();return n.appendChild(function(t,e){var r=s.createElement("style");return r.setAttribute("type","text/css"),r.appendChild(s.createTextNode(function(t,e){return(r=f(t.additionalTemplate)||{},n=t.styleAdditions,(r.cssBefore||"")+l.baseTemplate+(r.cssAfter||"")+(n||"")).replace(/<%=fontSize%>/g,u.default.FONT_SIZE).replace(/<%=lineWidth%>/g,u.default.LINE_WIDTH).replace(/<%=id%>/g,e);var r,n}(t,e))),r}(r,t)),function(t,e){return e.forEach((function(e){"method"===e.type?t.appendChild(c.createMarkerPolygon(e.name,e.path,e.color)):t.appendChild(c.createMarkerPath(e.name,e.path,e.color))})),t}(n,e)}(r,n,o)),h.appendChild((i=r,(a=c.createGroup("".concat(i,"_body"))).appendChild(c.createGroup("".concat(i,"_background"))),a.appendChild(c.createGroup("".concat(i,"_arcspans"))),a.appendChild(c.createGroup("".concat(i,"_lifelines"))),a.appendChild(c.createGroup("".concat(i,"_sequence"))),a.appendChild(c.createGroup("".concat(i,"_notes"))),a.appendChild(c.createGroup("".concat(i,"_watermark"))),a)),e.appendChild(h),s};var c=i(r(909)),u=a(r(479)),l=r(745),s={};function d(t){return c.init(t.document,{LINE_WIDTH:u.default.LINE_WIDTH,FONT_SIZE:u.default.FONT_SIZE}),t.document}function f(t){return l.namedStyles.find((function(e){return e.name===t}))}},7:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.scaleCanvasToWidth=function(t,e){var r=structuredClone(e);return r.scale=t/r.width,r.width*=r.scale,r.height*=r.scale,r.horizontaltransform*=r.scale,r.verticaltransform*=r.scale,r.x=0-r.horizontaltransform,r.y=0-r.verticaltransform,r},e.determineDepthCorrection=function(t,e){return t?2*(t+1)*e*2:0},e.determineArcXTo=function(t,e,r){return"-x"===t?e+3/4*(r-e):r}},305:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.get=i,e.getLast=a,e.clear=function(t,e){r=[],n=t,o=e},e.getByRealRowNumber=function(t){var e=r.find((function(e){return e.realRowNumber===t}));return void 0===e&&(e=a()),e},e.set=function(t,e,n){void 0===n&&(n=-1);var o=i(t-1);r[t]={y:o.y+(o.height+e)/2,height:e,realRowNumber:n}};var r=[],n=0,o=0;function i(t){return r[t]?r[t]:{y:n+1.5*o+t*o,height:o,realRowNumber:r.length-1}}function a(){return i(r.length-1)}},539:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XLINKNS=e.SVGNS=void 0,e.setAttribute=n,e.setAttributeNS=o,e.setAttributes=i,e.setAttributesNS=function(t,e,r){return Object.keys(r||{}).forEach((function(n){o(t,e,n,r[n])})),t},e.createElement=function(t,n){return i(r.createElementNS(e.SVGNS,t),n)},e.createTextNode=function(t){return r.createTextNode(t)},e.init=function(t){r=t},e.SVGNS="http://www.w3.org/2000/svg",e.XLINKNS="http://www.w3.org/1999/xlink";var r={};function n(t,e,r){return Boolean(r)&&t.setAttribute(e,r),t}function o(t,e,r,n){return Boolean(n)&&t.setAttributeNS(e,r,n),t}function i(t,e){return Object.keys(e||{}).forEach((function(r){n(t,r,e[r])})),t}},919:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return 0-360*Math.atan(t.height/t.width)/(2*Math.PI)}},909:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.createMarkerPolygon=e.createMarkerPath=e.createGroup=e.createUTurn=e.createDiagonalText=e.createText=e.createNote=e.createABox=e.createRBox=e.createRect=e.createTSpan=e.createDefs=e.createDesc=e.createTitle=e.updateSVG=void 0,e.init=function(t,e){c.init(t),s=Object.assign({LINE_WIDTH:2,FONT_SIZE:12},e)},e.createSVG=function(t,e,r){return l=function(t){return Boolean(t)?"wobbly"===t?u:a:l}(r),c.createSVG(t,e)},e.createEdgeRemark=function(t,e){return l.createEdgeRemark(t,{class:e.class,color:e.color,bgColor:e.bgColor,foldSize:e.foldSize,lineWidth:s.LINE_WIDTH})},e.createLine=function(t,e){return Boolean(e)&&Boolean(e.doubleLine)?(e.lineWidth||(e.lineWidth=s.LINE_WIDTH),l.createDoubleLine(t,e)):l.createSingleLine(t,e)};var a=i(r(896)),c=i(r(13)),u=i(r(243)),l=a,s={};e.updateSVG=c.updateSVG,e.createTitle=c.createTitle,e.createDesc=c.createDesc,e.createDefs=c.createDefs,e.createTSpan=c.createTSpan,e.createRect=function(t,e){return l.createRect(t,e)},e.createRBox=function(t,e){return l.createRBox(t,e)},e.createABox=function(t,e){return l.createABox(t,e)},e.createNote=function(t,e){return l.createNote(t,e)},e.createText=c.createText,e.createDiagonalText=c.createDiagonalText,e.createUTurn=c.createUTurn,e.createGroup=c.createGroup,e.createMarkerPath=c.createMarkerPath,e.createMarkerPolygon=c.createMarkerPolygon},921:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return e?Math.round(t*Math.pow(10,e))/Math.pow(10,e):Math.round(t)}},896:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.createRect=e.createSingleLine=void 0,e.createDoubleLine=function(t,e){var r=e.lineWidth||1,n=r,o=e?e.class:"",i=c.getDirection(t),u=c.determineEndCorrection(t,o,r),l=c.determineStartCorrection(t,o,r),s=(t.xTo-t.xFrom+u-l).toString(),d=(t.yTo-t.yFrom).toString(),f=a.pathPoint2String("l",i.signX,i.dy),h=a.pathPoint2String("l",s,d);return a.createPath(a.pathPoint2String("M",t.xFrom,t.yFrom-7.5*r*i.dy)+f+a.pathPoint2String("M",t.xFrom+l,t.yFrom-n)+h+a.pathPoint2String("M",t.xFrom+l,t.yFrom+n)+h+a.pathPoint2String("M",t.xTo-i.signX,t.yTo+7.5*r*i.dy)+f,e)},e.createNote=function(t,e){var r=e&&e.lineWidth||1,n=Math.max(9,Math.min(4.5*r,t.height/2)),o=n.toString(10);return a.createPath(a.pathPoint2String("M",t.x,t.y)+a.pathPoint2String("l",t.width-n,0)+a.pathPoint2String("l",0,o)+a.pathPoint2String("l",o,0)+a.pathPoint2String("m",-o,-o)+a.pathPoint2String("l",o,o)+a.pathPoint2String("l",0,t.height-n)+a.pathPoint2String("l",-t.width,0)+a.pathPoint2String("l",0,-t.height)+"z",e)},e.createRBox=function(t,e){var r=Object.assign({rx:6,ry:6},e);return a.createRect(t,r)},e.createABox=function(t,e){return a.createPath(a.pathPoint2String("M",t.x,t.y+t.height/2)+a.pathPoint2String("l",3,-t.height/2)+a.pathPoint2String("l",t.width-6,0)+a.pathPoint2String("l",3,t.height/2)+a.pathPoint2String("l",-3,t.height/2)+a.pathPoint2String("l",-(t.width-6),0)+"z",e)},e.createEdgeRemark=function(t,e){var r=e&&e.foldSize?e.foldSize:7,n=Object.assign({class:null,color:null,bgColor:null},e);return a.createPath(a.pathPoint2String("M",t.x,t.y)+a.pathPoint2String("l",t.width,0)+a.pathPoint2String("l",0,t.height-r)+a.pathPoint2String("l",-r,r)+a.pathPoint2String("l",-(t.width-r),0),n)};var a=i(r(13)),c=i(r(79));e.createSingleLine=a.createSingleLine,e.createRect=a.createRect},13:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.updateSVG=e.init=void 0,e.point2String=d,e.pathPoint2String=f,e.createTSpan=p,e.createText=m,e.createPath=b,e.createSingleLine=function(t,e){return c.createElement("line",{x1:(0,l.default)(t.xFrom,s).toString(),y1:(0,l.default)(t.yFrom,s).toString(),x2:(0,l.default)(t.xTo,s).toString(),y2:(0,l.default)(t.yTo,s).toString(),class:e?e.class:null})},e.createRect=function(t,e){var r=Object.assign({class:null,color:null,bgColor:null,rx:null,ry:null},e);return y(c.createElement("rect",{width:(0,l.default)(t.width,s),height:(0,l.default)(t.height,s),x:(0,l.default)(t.x,s),y:(0,l.default)(t.y,s),rx:(0,l.default)(r.rx||0,s),ry:(0,l.default)(r.ry||0,s),class:r.class}),r.color,r.bgColor)},e.createUTurn=function(t,e,r){var n=Object.assign({class:null,dontHitHome:!1,lineWidth:1},r),o=n.dontHitHome?t.x+7.5*(n.lineWidth||1):t.x;return b(f("M",t.x,t.y-t.height/2)+f("C",t.x+t.width,t.y-7.5*(n.lineWidth||1)/2)+d({x:t.x+t.width,y:e+0})+d({x:o,y:e}),{class:n.class})},e.createGroup=function(t,e){return c.createElement("g",{id:t,class:e})},e.createMarkerPath=function(t,e,r){var n=h(t,"arrow-marker","auto");return n.appendChild(b(e,{class:"arrow-style",style:"stroke-dasharray:100,1;stroke:".concat(r)||0})),n},e.createMarkerPolygon=function(t,e,r){var n=h(t,"arrow-marker","auto");return n.appendChild(c.createElement("polygon",{points:e,class:"arrow-style",stroke:r||"black",fill:r||"black"})),n},e.createTitle=function(t){var e=c.createElement("title"),r=c.createTextNode(t);return e.appendChild(r),e},e.createDiagonalText=function(t,e,r){return c.setAttributes(m(t,{x:e.width/2,y:e.height/2},{class:r}),{transform:"rotate(".concat((0,l.default)((0,u.default)(e),s).toString()," ")+"".concat((0,l.default)(e.width/2,s).toString()," ")+"".concat((0,l.default)(e.height/2,s).toString(),")")})},e.createDesc=function(){return c.createElement("desc")},e.createDefs=function(){return c.createElement("defs")},e.createSVG=function(t,e){return c.createElement("svg",{version:"1.1",id:t,class:e,xmlns:c.SVGNS,"xmlns:xlink":c.XLINKNS,width:"0",height:"0"})};var c=i(r(539)),u=a(r(919)),l=a(r(921)),s=2;function d(t){return"".concat((0,l.default)(t.x,s).toString(),",").concat((0,l.default)(t.y,s).toString()," ")}function f(t,e,r){return t+d({x:e,y:r})}function h(t,e,r,n){return c.createElement("marker",{orient:r,id:t,class:e,viewBox:Boolean(n)?n:"0 0 10 10",refX:"9",refY:"3",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10"})}var g="vertical-align:text-top;";function p(t,e){var r=c.createElement("tspan"),n=c.createTextNode(t);return r.appendChild(n),e?function(t,e){var r=c.createElement("a");return c.setAttributesNS(r,c.XLINKNS,{"xlink:href":t,"xlink:title":t}),r.appendChild(e),r}(e,r):r}function m(t,e,r){var n=Object.assign({class:null,url:null,id:null,idurl:null},r),o=c.createElement("text",{x:(0,l.default)(e.x,s).toString(),y:(0,l.default)(e.y,s).toString(),class:n.class});if(o.appendChild(p(t,n.url)),n.id){var i=p(" [".concat(n.id,"]"),n.idurl);i.setAttribute("style",g),o.appendChild(i)}return o}function b(t,e){var r=Object.assign({class:null,style:null,color:null,bgColor:null},e);return y(c.createElement("path",{d:t,class:r.class,style:r.style}),r.color,r.bgColor)}function y(t,e,r){var n="";return r&&(n+="fill:".concat(r,";")),e&&(n+="stroke:".concat(e,";")),c.setAttribute(t,"style",n)}g+="font-size:0.7em;text-anchor:start;",e.init=c.init,e.updateSVG=c.setAttributes},79:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.determineStartCorrection=function(t,e,r){var n=0;return!e.includes("nodi")&&e.includes("bidi")&&(n=t.xTo>t.xFrom?7.5*r:-7.5*r),n},e.determineEndCorrection=function(t,e,r){var n=0;return e.includes("nodi")||(n=t.xTo>t.xFrom?-7.5*r:7.5*r),n},e.getDirection=function(t){var e=t.xTo>t.xFrom?1:-1;return{signX:e,signY:t.yTo>t.yFrom?1:-1,dy:e*(t.yTo-t.yFrom)/(t.xTo-t.xFrom)}}},623:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.renderNotePathString=function(t,e){return a.pathPoint2String("M",t.x,t.y)+(0,u.line2CurveString)({xFrom:t.x,yFrom:t.y,xTo:t.x+t.width-e,yTo:t.y})+a.pathPoint2String("L",t.x+t.width-e,t.y)+(0,u.line2CurveString)({xFrom:t.x+t.width-e,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+e})+a.pathPoint2String("L",t.x+t.width,t.y+e)+(0,u.line2CurveString)({xFrom:t.x+t.width,yFrom:t.y+e,xTo:t.x+t.width,yTo:t.y+t.height})+a.pathPoint2String("L",t.x+t.width,t.y+t.height)+(0,u.line2CurveString)({xFrom:t.x+t.width,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height})+a.pathPoint2String("L",t.x,t.y+t.height)+(0,u.line2CurveString)({xFrom:t.x,yFrom:t.y+t.height,xTo:t.x,yTo:t.y})+a.pathPoint2String("L",t.x,t.y)+"z"},e.renderNoteCornerString=function(t,e){return a.pathPoint2String("M",t.x+t.width-e,t.y)+(0,u.line2CurveString)({xFrom:t.x+t.width-e,yFrom:t.y,xTo:t.x+t.width-e,yTo:t.y+e})+a.pathPoint2String("L",t.x+t.width-e,t.y+e)+(0,u.line2CurveString)({xFrom:t.x+t.width-e,yFrom:t.y+e,xTo:t.x+t.width,yTo:t.y+e})+a.pathPoint2String("L",t.x+t.width,t.y+e)},e.abox2CurveString=function(t,e){return a.pathPoint2String("M",t.x,t.y+t.height/2)+(0,u.line2CurveString)({xFrom:t.x,yFrom:t.y+t.height/2,xTo:t.x+e,yTo:t.y})+a.pathPoint2String("L",t.x+e,t.y)+(0,u.line2CurveString)({xFrom:t.x+e,yFrom:t.y,xTo:t.x+t.width-e,yTo:t.y})+a.pathPoint2String("L",t.x+t.width-e,t.y)+(0,u.line2CurveString)({xFrom:t.x+t.width-e,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height/2})+a.pathPoint2String("L",t.x+t.width,t.y+t.height/2)+(0,u.line2CurveString)({xFrom:t.x+t.width,yFrom:t.y+t.height/2,xTo:t.x+t.width-e,yTo:t.y+t.height})+a.pathPoint2String("L",t.x+t.width-e,t.y+t.height)+(0,u.line2CurveString)({xFrom:t.x+t.width-e,yFrom:t.y+t.height,xTo:t.x+e,yTo:t.y+t.height})+a.pathPoint2String("L",t.x+e,t.y+t.height)+(0,u.line2CurveString)({xFrom:t.x+e,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height/2})+"z"},e.rbox2CurveString=function(t,e){return a.pathPoint2String("M",t.x,t.y+e)+(0,u.points2CurveString)([{controlX:t.x,controlY:t.y,x:t.x+e,y:t.y}])+(0,u.line2CurveString)({xFrom:t.x+e,yFrom:t.y,xTo:t.x+t.width-e,yTo:t.y})+a.pathPoint2String("L",t.x+t.width-e,t.y)+(0,u.points2CurveString)([{controlX:t.x+t.width,controlY:t.y,x:t.x+t.width,y:t.y+e}])+(0,u.line2CurveString)({xFrom:t.x+t.width,yFrom:t.y+e,xTo:t.x+t.width,yTo:t.y+t.height-e})+a.pathPoint2String("L",t.x+t.width,t.y+t.height-e)+(0,u.points2CurveString)([{controlX:t.x+t.width,controlY:t.y+t.height,x:t.x+t.width-e,y:t.y+t.height}])+(0,u.line2CurveString)({xFrom:t.x+t.width-e,yFrom:t.y+t.height,xTo:t.x+e,yTo:t.y+t.height})+a.pathPoint2String("L",t.x+e,t.y+t.height)+(0,u.points2CurveString)([{controlX:t.x,controlY:t.y+t.height,x:t.x,y:t.y+t.height-e}])+(0,u.line2CurveString)({xFrom:t.x,yFrom:t.y+t.height-e,xTo:t.x,yTo:t.y+e})+"z"},e.doubleLine2CurveString=function(t,e){var r=e.lineWidth||1,n=r,o=e?e.class:"",i=c.getDirection(t),l=c.determineEndCorrection(t,o,r),s=c.determineStartCorrection(t,o,r);return a.pathPoint2String("M",t.xFrom,t.yFrom-7.5*r*i.dy)+a.pathPoint2String("l",i.signX,i.dy)+a.pathPoint2String("M",t.xFrom+s,t.yFrom-n)+(0,u.line2CurveString)({xFrom:t.xFrom+s,yFrom:t.yFrom-n,xTo:t.xTo+l,yTo:t.yTo-n})+a.pathPoint2String("M",t.xFrom+s,t.yFrom+n)+(0,u.line2CurveString)({xFrom:t.xFrom+s,yFrom:t.yFrom+n,xTo:t.xTo+l,yTo:t.yTo+n})+a.pathPoint2String("M",t.xTo-i.signX,t.yTo+7.5*r*i.dy)+a.pathPoint2String("l",i.signX,i.dy)},e.edgeRemark2CurveString=function(t,e){return a.pathPoint2String("M",t.x+t.width,t.y)+(0,u.line2CurveString)({xFrom:t.x+t.width,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height-e})+a.pathPoint2String("L",t.x+t.width,t.y+t.height-e)+(0,u.line2CurveString)({xFrom:t.x+t.width,yFrom:t.y+t.height-e,xTo:t.x+t.width-e,yTo:t.y+t.height})+a.pathPoint2String("L",t.x+t.width-e,t.y+t.height)+(0,u.line2CurveString)({xFrom:t.x+t.width-e,yFrom:t.y+t.height,xTo:t.x-1,yTo:t.y+t.height})+a.pathPoint2String("L",t.x-1,t.y+t.height)};var a=i(r(13)),c=i(r(79)),u=r(930)},930:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.points2CurveString=f,e.line2CurveString=function(t){return f(b(t,s,d))},e.getLineLength=h,e.getNumberOfSegments=g,e.getBetweenPoints=b;var c=a(r(921)),u=i(r(13)),l=i(r(79)),s=70,d=3;function f(t){return t.map((function(t){return"".concat(u.pathPoint2String("S",t.controlX,t.controlY)," ")+"".concat(u.point2String(t))})).join(" ")}function h(t){var e=Math.abs(t.xTo-t.xFrom),r=Math.abs(t.yTo-t.yFrom);return Math.sqrt(e*e+r*r)}function g(t,e){var r=h(t);return r>0?Math.floor(r/e):0}function p(t){return Math.round(2*Math.random()*t)-t}var m=2;function b(t,e,r){e=function(t,e){if(t<=0)throw new Error("pInterval must be > 0");return Math.min(h(e),t)}(e,t);for(var n,o=[],i=g(t,e),a=l.getDirection(t),u=a.signX*Math.sqrt(Math.pow(e,2)/(1+Math.pow(a.dy,2))),s=a.signY*(Math.abs(a.dy)===1/0?e:Math.sqrt(Math.pow(a.dy,2)*Math.pow(e,2)/(1+Math.pow(a.dy,2)))),d=1;d<=i;d++)e>h({xFrom:(n={controlX:(0,c.default)(t.xFrom+(d-.5)*u+p(r),m),controlY:(0,c.default)(t.yFrom+(d-.5)*s+p(r),m),x:(0,c.default)(t.xFrom+d*u,m),y:(0,c.default)(t.yFrom+d*s,m)}).x,yFrom:n.y,xTo:t.xTo,yTo:t.yTo})&&(n.x=t.xTo,n.y=t.yTo),o.push(n);return o}},243:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.createSingleLine=function(t,e){void 0===e&&(e={});var r=d.getDirection(t);return s.createPath(s.pathPoint2String("M",t.xFrom,t.yFrom)+s.pathPoint2String("L",(0,l.default)(t.xFrom+r.signX*Math.sqrt(1/(1+Math.pow(r.dy,2))),2),t.yFrom+r.signY*(Math.abs(r.dy)===1/0?1:(0,l.default)(Math.sqrt(Math.pow(r.dy,2)/(1+Math.pow(r.dy,2))),2)))+(0,u.line2CurveString)(t),e)},e.createNote=function(t,e){var r=e&&e.lineWidth||1,n=Math.max(9,Math.min(4.5*r,t.height/2)),o=s.createGroup();return o.appendChild(s.createPath((0,c.renderNotePathString)(t,n),e)),e.bgColor="transparent",o.appendChild(s.createPath((0,c.renderNoteCornerString)(t,n),e)),o},e.createRect=function(t,e){return s.createPath((0,c.rbox2CurveString)(t,0),e)},e.createABox=function(t,e){return s.createPath((0,c.abox2CurveString)(t,3),e)},e.createRBox=function(t,e){return s.createPath((0,c.rbox2CurveString)(t,6),e)},e.createEdgeRemark=function(t,e){var r=e&&e.lineWidth||1,n=s.createGroup(),o=e&&e.foldSize?e.foldSize:7,i=e&&e.color?e.color:"black";e.color="transparent!important";var a=s.createPath(s.pathPoint2String("M",t.x,t.y+r/2)+s.pathPoint2String("L",t.x+t.width,t.y+r/2)+s.pathPoint2String("L",t.x+t.width,t.y+t.height-o)+s.pathPoint2String("L",t.x+t.width-o,t.y+t.height)+s.pathPoint2String("L",t.x,t.y+t.height)+"z",e);e.bgColor="transparent",e.color=i;var u=s.createPath((0,c.edgeRemark2CurveString)(t,o),e);return n.appendChild(a),n.appendChild(u),n},e.createDoubleLine=function(t,e){return s.createPath((0,c.doubleLine2CurveString)(t,e),{class:e.class})};var c=r(623),u=r(930),l=a(r(921)),s=i(r(13)),d=i(r(79))},415:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.webkitNamespaceBugWorkaround=e.init=void 0,e.getBBox=d,e.calculateTextHeight=function(){return 0!==s?s:s=d(c.createText("ÁjyÎ9ƒ@💩",{x:0,y:0})).height},e.removeRenderedSVGFromElement=function(t){a.setPrefix(t);var e=u.getElementById(a.get());if(Boolean(e)){var r=u.getElementById(t);r?r.removeChild(e):u.body.removeChild(e)}};var a=i(r(978)),c=i(r(909)),u={},l=a.get("bboxer"),s=0;function d(t){return"function"==typeof t.getBBox?(e=function(t){var e=u.getElementById(l);(e=e||function(t){var e=c.createSVG(t,a.get());return u.body.appendChild(e),e}(l)).appendChild(t);var r=t.getBBox();return e.removeChild(t),r}(t),r=1e5,Math.abs(e.height)>r||Math.abs(e.width)>r?{height:0,width:0,x:0,y:0}:e):{height:15,width:15,x:2,y:2};var e,r}e.init=function(t){u=t},e.webkitNamespaceBugWorkaround=function(t){return t.replace(/ xlink=/g," xmlns:xlink=").replace(/ href=/g," xlink:href=")}},988:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unescapeString=function(t){return t.replace(/\\"/g,'"')},e.escapeString=function(t){return t.replace(/\\"/g,'"').replace(/"/g,'\\"')}},727:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var r=0,n=[],o=0,i=0,a=0,c=0,u=t.replace(/[\t\n]+/g," ").replace(/\\n/g,"\n");c<=u.length;)c>=u.length?n.push(u.substring(o,c)):"\n"===u[c]?(r=0,a=c,n.push(u.substring(o,a)),o=a+1):r++>=e&&(-1===(a=u.substring(0,c).lastIndexOf(" "))||a<o?(r=1,a=c,i=c):(r=0,i=a+1),n.push(u.substring(o,a)),o=i),c++;return n}},946:t=>{let e={defaultLanguage:"mscgen",parentElementPrefix:"mscgen_js-parent_",clickable:!1,clickURL:"https://sverweij.github.io/mscgen_js/",loadFromSrcAttribute:!1};t.exports={getConfig(){var t,r;return"undefined"!=typeof mscgen_js_config&&mscgen_js_config&&"object"==typeof mscgen_js_config&&(t=e,r=mscgen_js_config,Object.getOwnPropertyNames(r).forEach((e=>{t[e]=r[e]}))),e}}},925:(t,e,r)=>{const n=r(552);function o(t,e){let r=t.toString(),n=e-r.length;for(let t=0;t<n;t++)r=` ${r}`;return r}function i(t,e){return`${o(e,3)} ${t}`}function a(t){return t.replace(/</g,"&lt;")}function c(t,e){return[...t].reduce(((t,r,o)=>o===e?t+n.applyTemplate("<span style='text-decoration:underline'>{char}</span>",{char:a(r)}):t+a(r)),"")}t.exports={formatNumber:o,deHTMLize:a,renderError:function(t,e,r){let o=e?n.applyTemplate("<pre><div style='color: #d00'># ERROR on line {line}, column {col} - {message}</div>",{message:r,line:e.start.line,col:e.start.column}):n.applyTemplate("<pre><div style='color: #d00'># ERROR {message}</div>",{message:r});return`${t.split("\n").reduce(((t,r,o)=>Boolean(e)&&o===e.start.line-1?t+n.applyTemplate("<mark>{line}\n</mark>",{line:i(c(r,e.start.column-1),o+1)}):`${t+a(i(r,o+1))}\n`),o)}</pre>`}}},875:t=>{function e(t,e,r){return`${t.pathname}?lang=${r}&msc=${encodeURIComponent(e)}`}t.exports={toLocationString(t,r,n){let o="# source too long for an URL";return function(t,r,n){return e(t,r,n).length<4094}(t,r,n)&&(o=r),e(t,o,n)}}},552:t=>{t.exports={applyTemplate:function(t,e){let r=t;return e&&Object.keys(e).forEach((t=>{r=r.replace(new RegExp(`{${t}}`,"g"),e[t])})),r}}},745:t=>{"use strict";t.exports=JSON.parse('{"baseTemplate":"svg.<%=id%>{font-family:Helvetica,sans-serif;font-size:<%=fontSize%>px;font-weight:normal;font-style:normal;text-decoration:none;background-color:white;stroke:black;stroke-width:<%=lineWidth%>}.<%=id%> path, .<%=id%> rect{fill:none}.<%=id%> .label-text-background{fill:white;stroke:white;stroke-width:0}.<%=id%> .bglayer{fill:white;stroke:white;stroke-width:0}.<%=id%> line{}.<%=id%> .return, .<%=id%> .comment{stroke-dasharray:5,3}.<%=id%> .inline_expression_divider{stroke-dasharray:10,5}.<%=id%> text{color:inherit;stroke:none;text-anchor:middle}.<%=id%> text.anchor-start{text-anchor:start}.<%=id%> .arrow-marker{overflow:visible}.<%=id%> .arrow-style{stroke-width:1}.<%=id%> .arcrow, .<%=id%> .arcrowomit, .<%=id%> .emphasised{stroke-linecap:butt}.<%=id%> .arcrowomit{stroke-dasharray:2,2}.<%=id%> .box, .<%=id%> .entity{fill:white;stroke-linejoin:round}.<%=id%> .inherit{stroke:inherit;color:inherit}.<%=id%> .inherit-fill{fill:inherit}.<%=id%> .watermark{font-size:48pt;font-weight:bold;opacity:0.14}","namedStyles":[{"name":"basic","description":"Basic","experimental":false,"deprecated":false,"renderMagic":"straight","cssBefore":"","cssAfter":".<%=id%> text.entity-text{text-decoration:underline;}"},{"name":"lazy","description":"Lazy","experimental":false,"deprecated":false,"renderMagic":"straight","cssBefore":"","cssAfter":".<%=id%> text.entity-text{font-weight:bold;}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC}.<%=id%> rect.label-text-background{opacity:0.9}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke:grey}"},{"name":"classic","description":"Classic","experimental":false,"deprecated":false,"renderMagic":"straight","cssBefore":"","cssAfter":".<%=id%> text.entity-text{text-decoration:none}.<%=id%> .entity{stroke:none;}.<%=id%> line,.<%=id%> rect,.<%=id%> path{stroke-width:1px}.<%=id%> .arrow-style{stroke-width:2;}.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke-width: 1px}"},{"name":"fountainpen","description":"Fountain pen","experimental":true,"deprecated":false,"renderMagic":"wobbly","cssBefore":"@import \'https://fonts.googleapis.com/css?family=Gochi+Hand\';","cssAfter":"svg.<%=id%>{font-family:\'Gochi Hand\', cursive;font-size:14px;stroke-opacity:0.4;stroke-linecap:round;background-color:transparent}.<%=id%> text{fill:rgba(0,0,128,0.7)}.<%=id%> marker polygon{fill:rgba(0,0,255,0.4);stroke-linejoin:round}.<%=id%> line, .<%=id%> path, .<%=id%> rect, .<%=id%> polygon{stroke:blue !important}.<%=id%> text.entity-text{font-weight:bold;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC;}.<%=id%> .label-text-background{opacity:0}"},{"name":"cygne","description":"Cygne (best with msgenny)","experimental":true,"deprecated":true,"renderMagic":"straight","cssBefore":"","cssAfter":".<%=id%> line, .<%=id%> path{stroke:#00A1DE}.<%=id%> text{fill:#005B82}.<%=id%> .entity,.<%=id%> .box{fill:#00A1DE;stroke:#00A1DE}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#E77B2F;stroke:white}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{fill:white}"},{"name":"pegasse","description":"Pégase (best with msgenny)","experimental":false,"deprecated":true,"renderMagic":"straight","cssBefore":"","cssAfter":".<%=id%> line, .<%=id%> path{stroke:rgba(0, 43, 84, 1)}.<%=id%> text{fill:rgba(0, 43, 84, 1)}.<%=id%> .entity,.<%=id%> .box{fill:rgba(0, 43, 84, 1);stroke:rgba(0, 43, 84, 1)}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:rgba(255, 50, 0, 1);stroke:white}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{fill:white}"},{"name":"grayscaled","description":"Grayscaled (not in IE or Safari)","experimental":true,"deprecated":false,"renderMagic":"straight","cssBefore":"","cssAfter":"svg.<%=id%>{filter:grayscale(1);-webkit-filter:grayscale(1);}"},{"name":"inverted","description":"Inverted (not in IE or Safari)","experimental":true,"deprecated":false,"renderMagic":"straight","cssBefore":"","cssAfter":"svg.<%=id%>{filter:invert(1);-webkit-filter:invert(1);}"},{"name":"noentityboxes","description":"No entity boxes","experimental":false,"deprecated":false,"renderMagic":"straight","cssBefore":"","cssAfter":".<%=id%> .entity{fill:none;stroke:none;}.<%=id%> text.entity-text{text-decoration:underline;}"}]}')}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}const n=r(761),o=r(785),i=r(378),a=r(946),c=r(925),u=r(875),l="ERROR: Won't load the chart specified,\nbecause loading from separate files is switched off in the mscgen_js configuration. \n\nSee https://sverweij.github.io/mscgen_js/embed.html#loading-from-separate-files how to enable it.",s=Object.freeze({"text/x-mscgen":"mscgen","text/x-msgenny":"msgenny","text/x-xu":"xu"});function d(t,e){const r=document.createElement("pre");r.setAttribute("style","color: #d00"),r.textContent=e,t.replaceChildren(r)}function f(t){let e=t.dataset.mirrorEntities;return e&&"true"===e}function h(t){return t.dataset.regularArcTextVerticalAlignment||"middle"}function g(t,e,r=t){let l=function(t){let e=t.dataset.language||s[t.getAttribute("type")];return e||(e=a.getConfig().defaultLanguage),e}(r),d=function(t,e){let r={};try{r="msgenny"===e?o.parse(t):"json"===e?JSON.parse(t):n.parse(t)}catch(t){return t}return r}(e,l);var g;d.entities?function(t,e,r){let n=document.getElementById(e);n.innerHTML="",!0===a.getConfig().clickable&&(n.append(function(t,e,r){let n=document.createElement("a");return n.setAttribute("href",a.getConfig().clickURL+u.toLocationString({pathname:"index.html"},t,e)),n.setAttribute("id",`${r}link`),n.setAttribute("style","text-decoration: none;"),n.setAttribute("title","click to edit in the mscgen_js interpreter"),n}(r.source,r.language,e)),e+="link"),i.clean(e,window),i.render(t,window,e,{source:r.source,additionalTemplate:r.namedStyle,mirrorEntitiesOnBottom:r.mirrorEntities,regularArcTextVerticalAlignment:r.regularArcTextVerticalAlignment})}(d,t.id,{source:e,language:l,mirrorEntities:f(r),namedStyle:(g=r,g.dataset.namedStyle||"basic"),regularArcTextVerticalAlignment:h(r)}):t.innerHTML=c.renderError(e,d.location,d.message)}function p(t){return t.ok?Promise.resolve(t):Promise.reject(new Error(`ERROR: ${t.statusText}`))}function m(t){return t.text()}function b(t){return t.dataset.src||t.getAttribute("src")}function y(t,e,r=t){t.dataset.renderedby="mscgen_js",!a.getConfig().loadFromSrcAttribute&&Boolean(b(t))?d(r,l):(function(t,e){t.id||(t.id=a.getConfig().parentElementPrefix+e.toString())}(r,e),function(t){const e=b(t);return e?fetch(e).then(p).then(m):new Promise(((e,r)=>{t.textContent?e(t.textContent):r(new Error("ERROR: this element doesn't contain any text"))}))}(t).then((e=>{g(r,e,t)})).catch((t=>{d(r,t.message)})))}function x(t,e){if(!t.dataset.renderedby)if("SCRIPT"===t.tagName){let r=document.createElement("span");t.after(r),y(t,e,r)}else y(t,e)}function v(){return Math.round(1e9*Math.random())}const w=[...document.querySelectorAll(".mscgen_js"),...[...document.scripts].filter((t=>Boolean(s[t.type]))),...document.querySelectorAll("mscgen")],C=new IntersectionObserver((function(t){t.forEach((t=>{t.isIntersecting&&x(t.target.nextElementSibling,v())}))}),{rootMargin:"100% 0% 100% 0%"});w.forEach((t=>{const e=document.createElement("mscgenjs-marker");t.before(e),C.observe(e)})),window.addEventListener("beforeprint",(()=>{w.forEach((t=>{x(t,v())}))}))})();
//# sourceMappingURL=mscgen-inpage.js.map