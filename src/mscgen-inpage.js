/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/*
 This file is part of mscgen_js.

 mscgen_js is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 mscgen_js is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
 */

/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="umd" include="memoize,cloneDeep,flatten,defaults" --development --output lib/lodash/lodash.custom.js`
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/*
This file is part of mscgen_js.

mscgen_js is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

mscgen_js is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
*/

!function(){var t,e,r;!function(n){function o(t,e){return w.call(t,e)}function i(t,e){var r,n,o,i,a,c,s,u,l,f,d,h,g=e&&e.split("/"),p=y.map,m=p&&p["*"]||{};if(t){for(t=t.split("/"),a=t.length-1,y.nodeIdCompat&&k.test(t[a])&&(t[a]=t[a].replace(k,"")),"."===t[0].charAt(0)&&g&&(h=g.slice(0,g.length-1),t=h.concat(t)),l=0;l<t.length;l++)if(d=t[l],"."===d)t.splice(l,1),l-=1;else if(".."===d){if(0===l||1===l&&".."===t[2]||".."===t[l-1])continue;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}if((g||m)&&p){for(r=t.split("/"),l=r.length;l>0;l-=1){if(n=r.slice(0,l).join("/"),g)for(f=g.length;f>0;f-=1)if(o=p[g.slice(0,f).join("/")],o&&(o=o[n])){i=o,c=l;break}if(i)break;!s&&m&&m[n]&&(s=m[n],u=l)}!i&&s&&(i=s,c=u),i&&(r.splice(0,c,i),t=r.join("/"))}return t}function a(t,e){return function(){var r=C.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),g.apply(n,r.concat([t,e]))}}function c(t){return function(e){return i(e,t)}}function s(t){return function(e){b[t]=e}}function u(t){if(o(x,t)){var e=x[t];delete x[t],v[t]=!0,h.apply(n,e)}if(!o(b,t)&&!o(v,t))throw new Error("No "+t);return b[t]}function l(t){var e,r=t?t.indexOf("!"):-1;return r>-1&&(e=t.substring(0,r),t=t.substring(r+1,t.length)),[e,t]}function f(t){return t?l(t):[]}function d(t){return function(){return y&&y.config&&y.config[t]||{}}}var h,g,p,m,b={},x={},y={},v={},w=Object.prototype.hasOwnProperty,C=[].slice,k=/\.js$/;p=function(t,e){var r,n=l(t),o=n[0],a=e[1];return t=n[1],o&&(o=i(o,a),r=u(o)),o?t=r&&r.normalize?r.normalize(t,c(a)):i(t,a):(t=i(t,a),n=l(t),o=n[0],t=n[1],o&&(r=u(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:r}},m={require:function(t){return a(t)},exports:function(t){var e=b[t];return"undefined"!=typeof e?e:b[t]={}},module:function(t){return{id:t,uri:"",exports:b[t],config:d(t)}}},h=function(t,e,r,i){var c,l,d,h,g,y,w,C=[],k=typeof r;if(i=i||t,y=f(i),"undefined"===k||"function"===k){for(e=!e.length&&r.length?["require","exports","module"]:e,g=0;g<e.length;g+=1)if(h=p(e[g],y),l=h.f,"require"===l)C[g]=m.require(t);else if("exports"===l)C[g]=m.exports(t),w=!0;else if("module"===l)c=C[g]=m.module(t);else if(o(b,l)||o(x,l)||o(v,l))C[g]=u(l);else{if(!h.p)throw new Error(t+" missing "+l);h.p.load(h.n,a(i,!0),s(l),{}),C[g]=b[l]}d=r?r.apply(b[t],C):void 0,t&&(c&&c.exports!==n&&c.exports!==b[t]?b[t]=c.exports:d===n&&w||(b[t]=d))}else t&&(b[t]=r)},t=e=g=function(t,e,r,o,i){if("string"==typeof t)return m[t]?m[t](e):u(p(t,f(e)).f);if(!t.splice){if(y=t,y.deps&&g(y.deps,y.callback),!e)return;e.splice?(t=e,e=r,r=null):t=n}return e=e||function(){},"function"==typeof r&&(r=o,o=i),o?h(n,t,e,r):setTimeout(function(){h(n,t,e,r)},4),g},g.config=function(t){return g(t)},t._defined=b,r=function(t,e,r){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(r=e,e=[]),o(b,t)||o(x,t)||(x[t]=[t,e,r])},r.amd={jQuery:!0}}(),r("../node_modules/almond/almond",function(){}),function(t,e){"function"==typeof r&&r.amd?r("lib/mscgenjs-core/parse/xuparser",[],e):"object"==typeof module&&module.exports&&(module.exports=e())}(this,function(){"use strict";function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,o){this.message=t,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t,r){function n(){return f(li,ui)}function o(t,e){throw e=void 0!==e?e:f(li,ui),h(t,e)}function i(t,e){return{type:"literal",text:t,ignoreCase:e}}function a(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function c(){return{type:"any"}}function s(){return{type:"end"}}function u(t){return{type:"other",description:t}}function l(e){var r,n=fi[e];if(n)return n;for(r=e-1;!fi[r];)r--;for(n=fi[r],n={line:n.line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return fi[e]=n,n}function f(t,e){var r=l(t),n=l(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function d(t){ui<di||(ui>di&&(di=ui,hi=[]),hi.push(t))}function h(t,r){return new e(t,null,null,r)}function g(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function p(){var e,r,n,o,i,a,c,s,u,l;return e=ui,r=et(),r!==Tt?(n=m(),n!==Tt?(o=et(),o!==Tt?(123===t.charCodeAt(ui)?(i=Et,ui++):(i=Tt,0===gi&&d(jt)),i!==Tt?(a=et(),a!==Tt?(c=b(),c!==Tt?(s=et(),s!==Tt?(125===t.charCodeAt(ui)?(u=Ft,ui++):(u=Tt,0===gi&&d(Pt)),u!==Tt?(l=et(),l!==Tt?(li=e,r=Bt(r,c),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e}function m(){var e;return t.substr(ui,3).toLowerCase()===Dt?(e=t.substr(ui,3),ui+=3):(e=Tt,0===gi&&d(It)),e===Tt&&(t.substr(ui,2).toLowerCase()===Mt?(e=t.substr(ui,2),ui+=2):(e=Tt,0===gi&&d(Nt))),e}function b(){var t,e,r,n;return t=ui,e=x(),e===Tt&&(e=null),e!==Tt?(r=v(),r===Tt&&(r=null),r!==Tt?(n=C(),n===Tt&&(n=null),n!==Tt?(li=t,e=Ot(e,r,n),t=e):(ui=t,t=Tt)):(ui=t,t=Tt)):(ui=t,t=Tt),t}function x(){var e,r,n,o,i,a;for(e=ui,r=ui,n=[],o=ui,i=y(),i!==Tt?(44===t.charCodeAt(ui)?(a=Ht,ui++):(a=Tt,0===gi&&d(Wt)),a!==Tt?(li=o,i=Rt(i),o=i):(ui=o,o=Tt)):(ui=o,o=Tt);o!==Tt;)n.push(o),o=ui,i=y(),i!==Tt?(44===t.charCodeAt(ui)?(a=Ht,ui++):(a=Tt,0===gi&&d(Wt)),a!==Tt?(li=o,i=Rt(i),o=i):(ui=o,o=Tt)):(ui=o,o=Tt);return n!==Tt?(o=ui,i=y(),i!==Tt?(59===t.charCodeAt(ui)?(a=zt,ui++):(a=Tt,0===gi&&d(Gt)),a!==Tt?(li=o,i=Rt(i),o=i):(ui=o,o=Tt)):(ui=o,o=Tt),o!==Tt?(n=[n,o],r=n):(ui=r,r=Tt)):(ui=r,r=Tt),r!==Tt&&(li=e,r=qt(r)),e=r}function y(){var e,r,n,o,i,a,c,s;return gi++,e=ui,r=et(),r!==Tt?(t.substr(ui,6).toLowerCase()===Ut?(n=t.substr(ui,6),ui+=6):(n=Tt,0===gi&&d(Vt)),n===Tt&&(t.substr(ui,11).toLowerCase()===Kt?(n=t.substr(ui,11),ui+=11):(n=Tt,0===gi&&d(Yt))),n!==Tt?(o=et(),o!==Tt?(61===t.charCodeAt(ui)?(i=Zt,ui++):(i=Tt,0===gi&&d($t)),i!==Tt?(a=et(),a!==Tt?(c=rt(),c!==Tt?(s=et(),s!==Tt?(li=e,r=Jt(n,c),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e===Tt&&(e=ui,r=et(),r!==Tt?(t.substr(ui,5).toLowerCase()===Qt?(n=t.substr(ui,5),ui+=5):(n=Tt,0===gi&&d(te)),n!==Tt?(o=et(),o!==Tt?(61===t.charCodeAt(ui)?(i=Zt,ui++):(i=Tt,0===gi&&d($t)),i!==Tt?(a=et(),a!==Tt?(c=lt(),c!==Tt?(s=et(),s!==Tt?(li=e,r=Jt(n,c),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e===Tt&&(e=ui,r=et(),r!==Tt?(t.substr(ui,12).toLowerCase()===ee?(n=t.substr(ui,12),ui+=12):(n=Tt,0===gi&&d(re)),n!==Tt?(o=et(),o!==Tt?(61===t.charCodeAt(ui)?(i=Zt,ui++):(i=Tt,0===gi&&d($t)),i!==Tt?(a=et(),a!==Tt?(c=ct(),c!==Tt?(s=et(),s!==Tt?(li=e,r=ne(n,c),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e===Tt&&(e=ui,r=et(),r!==Tt?(t.substr(ui,9).toLowerCase()===oe?(n=t.substr(ui,9),ui+=9):(n=Tt,0===gi&&d(ie)),n!==Tt?(o=et(),o!==Tt?(61===t.charCodeAt(ui)?(i=Zt,ui++):(i=Tt,0===gi&&d($t)),i!==Tt?(a=et(),a!==Tt?(c=R(),c!==Tt?(s=et(),s!==Tt?(li=e,r=Jt(n,c),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)))),gi--,e===Tt&&(r=Tt,0===gi&&d(Xt)),e}function v(){var e,r,n,o,i,a;for(e=ui,r=ui,n=[],o=ui,i=w(),i!==Tt?(44===t.charCodeAt(ui)?(a=Ht,ui++):(a=Tt,0===gi&&d(Wt)),a!==Tt?(li=o,i=ae(i),o=i):(ui=o,o=Tt)):(ui=o,o=Tt);o!==Tt;)n.push(o),o=ui,i=w(),i!==Tt?(44===t.charCodeAt(ui)?(a=Ht,ui++):(a=Tt,0===gi&&d(Wt)),a!==Tt?(li=o,i=ae(i),o=i):(ui=o,o=Tt)):(ui=o,o=Tt);return n!==Tt?(o=ui,i=w(),i!==Tt?(59===t.charCodeAt(ui)?(a=zt,ui++):(a=Tt,0===gi&&d(Gt)),a!==Tt?(li=o,i=ae(i),o=i):(ui=o,o=Tt)):(ui=o,o=Tt),o!==Tt?(n=[n,o],r=n):(ui=r,r=Tt)):(ui=r,r=Tt),r!==Tt&&(li=e,r=ce(r)),e=r}function w(){var e,r,n,o,i,a,c,s;return gi++,e=ui,r=et(),r!==Tt?(n=R(),n!==Tt?(o=et(),o!==Tt?(i=ui,91===t.charCodeAt(ui)?(a=ue,ui++):(a=Tt,0===gi&&d(le)),a!==Tt?(c=O(),c!==Tt?(93===t.charCodeAt(ui)?(s=fe,ui++):(s=Tt,0===gi&&d(de)),s!==Tt?(li=i,a=he(n,c),i=a):(ui=i,i=Tt)):(ui=i,i=Tt)):(ui=i,i=Tt),i===Tt&&(i=null),i!==Tt?(a=et(),a!==Tt?(li=e,r=ge(n,i),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e===Tt&&(e=ui,r=et(),r!==Tt?(n=q(),n!==Tt?(o=et(),o!==Tt?(i=ui,91===t.charCodeAt(ui)?(a=ue,ui++):(a=Tt,0===gi&&d(le)),a!==Tt?(c=O(),c!==Tt?(93===t.charCodeAt(ui)?(s=fe,ui++):(s=Tt,0===gi&&d(de)),s!==Tt?(li=i,a=he(n,c),i=a):(ui=i,i=Tt)):(ui=i,i=Tt)):(ui=i,i=Tt),i===Tt&&(i=null),i!==Tt?(a=et(),a!==Tt?(li=e,r=pe(n,i),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)),gi--,e===Tt&&(r=Tt,0===gi&&d(se)),e}function C(){var e,r,n,o,i;if(e=[],r=ui,n=k(),n!==Tt?(o=et(),o!==Tt?(59===t.charCodeAt(ui)?(i=zt,ui++):(i=Tt,0===gi&&d(Gt)),i!==Tt?(li=r,n=me(n),r=n):(ui=r,r=Tt)):(ui=r,r=Tt)):(ui=r,r=Tt),r!==Tt)for(;r!==Tt;)e.push(r),r=ui,n=k(),n!==Tt?(o=et(),o!==Tt?(59===t.charCodeAt(ui)?(i=zt,ui++):(i=Tt,0===gi&&d(Gt)),i!==Tt?(li=r,n=me(n),r=n):(ui=r,r=Tt)):(ui=r,r=Tt)):(ui=r,r=Tt);else e=Tt;return e}function k(){var e,r,n,o,i,a,c;for(e=ui,r=ui,n=[],o=ui,i=A(),i!==Tt?(a=et(),a!==Tt?(44===t.charCodeAt(ui)?(c=Ht,ui++):(c=Tt,0===gi&&d(Wt)),c!==Tt?(li=o,i=me(i),o=i):(ui=o,o=Tt)):(ui=o,o=Tt)):(ui=o,o=Tt);o!==Tt;)n.push(o),o=ui,i=A(),i!==Tt?(a=et(),a!==Tt?(44===t.charCodeAt(ui)?(c=Ht,ui++):(c=Tt,0===gi&&d(Wt)),c!==Tt?(li=o,i=me(i),o=i):(ui=o,o=Tt)):(ui=o,o=Tt)):(ui=o,o=Tt);return n!==Tt?(o=ui,i=A(),i!==Tt&&(li=o,i=me(i)),o=i,o!==Tt?(n=[n,o],r=n):(ui=r,r=Tt)):(ui=r,r=Tt),r!==Tt&&(li=e,r=be(r)),e=r}function A(){var t;return t=_(),t===Tt&&(t=E()),t}function _(){var e,r,n,o,i,a;return e=ui,r=ui,n=T(),n!==Tt&&(li=r,n=me(n)),r=n,r===Tt&&(r=ui,n=L(),n!==Tt&&(li=r,n=me(n)),r=n,r===Tt&&(r=ui,n=S(),n!==Tt&&(li=r,n=me(n)),r=n)),r!==Tt?(n=ui,91===t.charCodeAt(ui)?(o=ue,ui++):(o=Tt,0===gi&&d(le)),o!==Tt?(i=O(),i!==Tt?(93===t.charCodeAt(ui)?(a=fe,ui++):(a=Tt,0===gi&&d(de)),a!==Tt?(li=n,o=xe(r,i),n=o):(ui=n,n=Tt)):(ui=n,n=Tt)):(ui=n,n=Tt),n===Tt&&(n=null),n!==Tt?(li=e,r=ye(r,n),e=r):(ui=e,e=Tt)):(ui=e,e=Tt),e}function T(){var t,e,r,n;return t=ui,e=et(),e!==Tt?(r=j(),r!==Tt?(n=et(),n!==Tt?(li=t,e=ve(r),t=e):(ui=t,t=Tt)):(ui=t,t=Tt)):(ui=t,t=Tt),t}function S(){var t,e,r,n;return t=ui,e=et(),e!==Tt?(r=F(),r!==Tt?(n=et(),n!==Tt?(li=t,e=ve(r),t=e):(ui=t,t=Tt)):(ui=t,t=Tt)):(ui=t,t=Tt),t}function L(){var e,r,n,o,i,a,c,s;return e=ui,r=et(),r!==Tt?(n=G(),n!==Tt?(o=et(),o!==Tt?(i=P(),i!==Tt?(a=et(),a!==Tt?(c=G(),c!==Tt?(s=et(),s!==Tt?(li=e,r=we(n,i,c),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e===Tt&&(e=ui,r=et(),r!==Tt?(42===t.charCodeAt(ui)?(n=Ce,ui++):(n=Tt,0===gi&&d(ke)),n!==Tt?(o=et(),o!==Tt?(i=I(),i!==Tt?(a=et(),a!==Tt?(c=G(),c!==Tt?(s=et(),s!==Tt?(li=e,r=Ae(i,c),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e===Tt&&(e=ui,r=et(),r!==Tt?(n=G(),n!==Tt?(o=et(),o!==Tt?(i=D(),i!==Tt?(a=et(),a!==Tt?(42===t.charCodeAt(ui)?(c=Ce,ui++):(c=Tt,0===gi&&d(ke)),c!==Tt?(s=et(),s!==Tt?(li=e,r=_e(n,i),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e===Tt&&(e=ui,r=et(),r!==Tt?(n=G(),n!==Tt?(o=et(),o!==Tt?(i=B(),i!==Tt?(a=et(),a!==Tt?(42===t.charCodeAt(ui)?(c=Ce,ui++):(c=Tt,0===gi&&d(ke)),c!==Tt?(s=et(),s!==Tt?(li=e,r=_e(n,i),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)))),e}function E(){var e,r,n,o,i,a,c,s,u,l,f,h,g,p,m,b;return e=ui,r=et(),r!==Tt?(n=G(),n!==Tt?(o=et(),o!==Tt?(i=N(),i!==Tt?(a=et(),a!==Tt?(c=G(),c!==Tt?(s=et(),s!==Tt?(u=ui,91===t.charCodeAt(ui)?(l=ue,ui++):(l=Tt,0===gi&&d(le)),l!==Tt?(f=O(),f!==Tt?(93===t.charCodeAt(ui)?(h=fe,ui++):(h=Tt,0===gi&&d(de)),h!==Tt?(li=u,l=Te(n,i,c,f),u=l):(ui=u,u=Tt)):(ui=u,u=Tt)):(ui=u,u=Tt),u===Tt&&(u=null),u!==Tt?(l=et(),l!==Tt?(123===t.charCodeAt(ui)?(f=Et,ui++):(f=Tt,0===gi&&d(jt)),f!==Tt?(h=et(),h!==Tt?(g=C(),g===Tt&&(g=null),g!==Tt?(p=et(),p!==Tt?(125===t.charCodeAt(ui)?(m=Ft,ui++):(m=Tt,0===gi&&d(Pt)),m!==Tt?(b=et(),b!==Tt?(li=e,r=Se(n,i,c,u,g),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e}function j(){var e,r;return gi++,t.substr(ui,3)===Ee?(e=Ee,ui+=3):(e=Tt,0===gi&&d(je)),e===Tt&&(t.substr(ui,3)===Fe?(e=Fe,ui+=3):(e=Tt,0===gi&&d(Pe))),gi--,e===Tt&&(r=Tt,0===gi&&d(Le)),e}function F(){var e,r;return gi++,t.substr(ui,3)===De?(e=De,ui+=3):(e=Tt,0===gi&&d(Ie)),gi--,e===Tt&&(r=Tt,0===gi&&d(Be)),e}function P(){var t,e;return t=ui,e=B(),e===Tt&&(e=D(),e===Tt&&(e=I(),e===Tt&&(e=M()))),e!==Tt&&(li=t,e=Me(e)),t=e}function B(){var e,r;return gi++,t.substr(ui,2)===Oe?(e=Oe,ui+=2):(e=Tt,0===gi&&d(He)),e===Tt&&(t.substr(ui,3)===We?(e=We,ui+=3):(e=Tt,0===gi&&d(Re)),e===Tt&&(t.substr(ui,2)===ze?(e=ze,ui+=2):(e=Tt,0===gi&&d(Ge)),e===Tt&&(t.substr(ui,5)===qe?(e=qe,ui+=5):(e=Tt,0===gi&&d(Xe)),e===Tt&&(t.substr(ui,3)===Ue?(e=Ue,ui+=3):(e=Tt,0===gi&&d(Ve)),e===Tt&&(t.substr(ui,2)===Ke?(e=Ke,ui+=2):(e=Tt,0===gi&&d(Ye)),e===Tt&&(t.substr(ui,4)===Ze?(e=Ze,ui+=4):(e=Tt,0===gi&&d($e)),e===Tt&&(t.substr(ui,2)===Je?(e=Je,ui+=2):(e=Tt,0===gi&&d(Qe)),e===Tt&&(t.substr(ui,3)===tr?(e=tr,ui+=3):(e=Tt,0===gi&&d(er)))))))))),gi--,e===Tt&&(r=Tt,0===gi&&d(Ne)),e}function D(){var e,r;return gi++,t.substr(ui,2)===nr?(e=nr,ui+=2):(e=Tt,0===gi&&d(or)),e===Tt&&(t.substr(ui,3)===ir?(e=ir,ui+=3):(e=Tt,0===gi&&d(ar)),e===Tt&&(t.substr(ui,2)===cr?(e=cr,ui+=2):(e=Tt,0===gi&&d(sr)),e===Tt&&(t.substr(ui,2)===ur?(e=ur,ui+=2):(e=Tt,0===gi&&d(lr)),e===Tt&&(t.substr(ui,2)===fr?(e=fr,ui+=2):(e=Tt,0===gi&&d(dr)),e===Tt&&(t.substr(ui,2).toLowerCase()===hr?(e=t.substr(ui,2),ui+=2):(e=Tt,0===gi&&d(gr))))))),gi--,e===Tt&&(r=Tt,0===gi&&d(rr)),e}function I(){var e,r;return gi++,t.substr(ui,2)===mr?(e=mr,ui+=2):(e=Tt,0===gi&&d(br)),e===Tt&&(t.substr(ui,3)===xr?(e=xr,ui+=3):(e=Tt,0===gi&&d(yr)),e===Tt&&(t.substr(ui,2)===vr?(e=vr,ui+=2):(e=Tt,0===gi&&d(wr)),e===Tt&&(t.substr(ui,2)===Cr?(e=Cr,ui+=2):(e=Tt,0===gi&&d(kr)),e===Tt&&(t.substr(ui,2)===Ar?(e=Ar,ui+=2):(e=Tt,0===gi&&d(_r)),e===Tt&&(t.substr(ui,2).toLowerCase()===Tr?(e=t.substr(ui,2),ui+=2):(e=Tt,0===gi&&d(Sr))))))),gi--,e===Tt&&(r=Tt,0===gi&&d(pr)),e}function M(){var e,r;return gi++,t.substr(ui,4).toLowerCase()===Er?(e=t.substr(ui,4),ui+=4):(e=Tt,0===gi&&d(jr)),e===Tt&&(t.substr(ui,4).toLowerCase()===Fr?(e=t.substr(ui,4),ui+=4):(e=Tt,0===gi&&d(Pr)),e===Tt&&(t.substr(ui,4).toLowerCase()===Br?(e=t.substr(ui,4),ui+=4):(e=Tt,0===gi&&d(Dr)),e===Tt&&(t.substr(ui,3).toLowerCase()===Ir?(e=t.substr(ui,3),ui+=3):(e=Tt,0===gi&&d(Mr))))),gi--,e===Tt&&(r=Tt,0===gi&&d(Lr)),e}function N(){var e,r;return gi++,e=ui,t.substr(ui,3).toLowerCase()===Or?(r=t.substr(ui,3),ui+=3):(r=Tt,0===gi&&d(Hr)),r===Tt&&(t.substr(ui,4).toLowerCase()===Wr?(r=t.substr(ui,4),ui+=4):(r=Tt,0===gi&&d(Rr)),r===Tt&&(t.substr(ui,3).toLowerCase()===zr?(r=t.substr(ui,3),ui+=3):(r=Tt,0===gi&&d(Gr)),r===Tt&&(t.substr(ui,5).toLowerCase()===qr?(r=t.substr(ui,5),ui+=5):(r=Tt,0===gi&&d(Xr)),r===Tt&&(t.substr(ui,3).toLowerCase()===Ur?(r=t.substr(ui,3),ui+=3):(r=Tt,0===gi&&d(Vr)),r===Tt&&(t.substr(ui,3).toLowerCase()===Kr?(r=t.substr(ui,3),ui+=3):(r=Tt,0===gi&&d(Yr)),r===Tt&&(t.substr(ui,6).toLowerCase()===Zr?(r=t.substr(ui,6),ui+=6):(r=Tt,0===gi&&d($r)),r===Tt&&(t.substr(ui,3).toLowerCase()===Jr?(r=t.substr(ui,3),ui+=3):(r=Tt,0===gi&&d(Qr)),r===Tt&&(t.substr(ui,8).toLowerCase()===tn?(r=t.substr(ui,8),ui+=8):(r=Tt,0===gi&&d(en)),r===Tt&&(t.substr(ui,6).toLowerCase()===rn?(r=t.substr(ui,6),ui+=6):(r=Tt,0===gi&&d(nn)),r===Tt&&(t.substr(ui,8).toLowerCase()===on?(r=t.substr(ui,8),ui+=8):(r=Tt,0===gi&&d(an)),r===Tt&&(t.substr(ui,6).toLowerCase()===cn?(r=t.substr(ui,6),ui+=6):(r=Tt,0===gi&&d(sn)),r===Tt&&(t.substr(ui,4).toLowerCase()===un?(r=t.substr(ui,4),ui+=4):(r=Tt,0===gi&&d(ln)),r===Tt&&(t.substr(ui,3).toLowerCase()===fn?(r=t.substr(ui,3),ui+=3):(r=Tt,0===gi&&d(dn)),r===Tt&&(t.substr(ui,3).toLowerCase()===hn?(r=t.substr(ui,3),ui+=3):(r=Tt,0===gi&&d(gn)))))))))))))))),r!==Tt&&(li=e,r=pn(r)),e=r,gi--,e===Tt&&(r=Tt,0===gi&&d(Nr)),e}function O(){var e,r,n,o,i,a;for(e=ui,r=ui,n=[],o=ui,i=H(),i!==Tt?(44===t.charCodeAt(ui)?(a=Ht,ui++):(a=Tt,0===gi&&d(Wt)),a!==Tt?(li=o,i=me(i),o=i):(ui=o,o=Tt)):(ui=o,o=Tt);o!==Tt;)n.push(o),o=ui,i=H(),i!==Tt?(44===t.charCodeAt(ui)?(a=Ht,ui++):(a=Tt,0===gi&&d(Wt)),a!==Tt?(li=o,i=me(i),o=i):(ui=o,o=Tt)):(ui=o,o=Tt);return n!==Tt?(o=ui,i=H(),i!==Tt&&(li=o,i=me(i)),o=i,o!==Tt?(n=[n,o],r=n):(ui=r,r=Tt)):(ui=r,r=Tt),r!==Tt&&(li=e,r=mn(r)),e=r}function H(){var e,r,n,o,i,a,c,s;return e=ui,r=et(),r!==Tt?(n=W(),n!==Tt?(o=et(),o!==Tt?(61===t.charCodeAt(ui)?(i=Zt,ui++):(i=Tt,0===gi&&d($t)),i!==Tt?(a=et(),a!==Tt?(c=G(),c!==Tt?(s=et(),s!==Tt?(li=e,r=bn(n,c),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e}function W(){var e,r;return gi++,t.substr(ui,5).toLowerCase()===yn?(e=t.substr(ui,5),ui+=5):(e=Tt,0===gi&&d(vn)),e===Tt&&(t.substr(ui,5).toLowerCase()===wn?(e=t.substr(ui,5),ui+=5):(e=Tt,0===gi&&d(Cn)),e===Tt&&(t.substr(ui,2).toLowerCase()===kn?(e=t.substr(ui,2),ui+=2):(e=Tt,0===gi&&d(An)),e===Tt&&(t.substr(ui,3).toLowerCase()===_n?(e=t.substr(ui,3),ui+=3):(e=Tt,0===gi&&d(Tn)),e===Tt&&(t.substr(ui,9).toLowerCase()===Sn?(e=t.substr(ui,9),ui+=9):(e=Tt,0===gi&&d(Ln)),e===Tt&&(t.substr(ui,10).toLowerCase()===En?(e=t.substr(ui,10),ui+=10):(e=Tt,0===gi&&d(jn)),e===Tt&&(t.substr(ui,9).toLowerCase()===Fn?(e=t.substr(ui,9),ui+=9):(e=Tt,0===gi&&d(Pn)),e===Tt&&(t.substr(ui,10).toLowerCase()===Bn?(e=t.substr(ui,10),ui+=10):(e=Tt,0===gi&&d(Dn)),e===Tt&&(t.substr(ui,11).toLowerCase()===In?(e=t.substr(ui,11),ui+=11):(e=Tt,0===gi&&d(Mn)),e===Tt&&(t.substr(ui,12).toLowerCase()===Nn?(e=t.substr(ui,12),ui+=12):(e=Tt,0===gi&&d(On)),e===Tt&&(t.substr(ui,12).toLowerCase()===Hn?(e=t.substr(ui,12),ui+=12):(e=Tt,0===gi&&d(Wn)),e===Tt&&(t.substr(ui,13).toLowerCase()===Rn?(e=t.substr(ui,13),ui+=13):(e=Tt,0===gi&&d(zn)),e===Tt&&(t.substr(ui,12).toLowerCase()===Gn?(e=t.substr(ui,12),ui+=12):(e=Tt,0===gi&&d(qn)),e===Tt&&(t.substr(ui,13).toLowerCase()===Xn?(e=t.substr(ui,13),ui+=13):(e=Tt,0===gi&&d(Un)),e===Tt&&(t.substr(ui,14).toLowerCase()===Vn?(e=t.substr(ui,14),ui+=14):(e=Tt,0===gi&&d(Kn)),e===Tt&&(t.substr(ui,15).toLowerCase()===Yn?(e=t.substr(ui,15),ui+=15):(e=Tt,0===gi&&d(Zn)),e===Tt&&(t.substr(ui,7).toLowerCase()===$n?(e=t.substr(ui,7),ui+=7):(e=Tt,0===gi&&d(Jn)),e===Tt&&(t.substr(ui,5).toLowerCase()===Qn?(e=t.substr(ui,5),ui+=5):(e=Tt,0===gi&&d(to))))))))))))))))))),gi--,e===Tt&&(r=Tt,0===gi&&d(xn)),e}function R(){var e,r,n,o;return gi++,e=ui,34===t.charCodeAt(ui)?(r=ro,ui++):(r=Tt,0===gi&&d(no)),r!==Tt?(n=z(),n!==Tt?(34===t.charCodeAt(ui)?(o=ro,ui++):(o=Tt,0===gi&&d(no)),o!==Tt?(li=e,r=oo(n),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),gi--,e===Tt&&(r=Tt,0===gi&&d(eo)),e}function z(){var e,r,n,o;for(e=[],r=ui,n=ui,gi++,34===t.charCodeAt(ui)?(o=ro,ui++):(o=Tt,0===gi&&d(no)),gi--,o===Tt?n=void 0:(ui=n,n=Tt),n!==Tt?(t.substr(ui,2)===io?(o=io,ui+=2):(o=Tt,0===gi&&d(ao)),o===Tt&&(t.length>ui?(o=t.charAt(ui),ui++):(o=Tt,0===gi&&d(co))),o!==Tt?(li=r,n=so(o),r=n):(ui=r,r=Tt)):(ui=r,r=Tt);r!==Tt;)e.push(r),r=ui,n=ui,gi++,34===t.charCodeAt(ui)?(o=ro,ui++):(o=Tt,0===gi&&d(no)),gi--,o===Tt?n=void 0:(ui=n,n=Tt),n!==Tt?(t.substr(ui,2)===io?(o=io,ui+=2):(o=Tt,0===gi&&d(ao)),o===Tt&&(t.length>ui?(o=t.charAt(ui),ui++):(o=Tt,0===gi&&d(co))),o!==Tt?(li=r,n=so(o),r=n):(ui=r,r=Tt)):(ui=r,r=Tt);return e}function G(){var t,e;return gi++,t=q(),t===Tt&&(t=R()),gi--,t===Tt&&(e=Tt,0===gi&&d(uo)),t}function q(){var e,r,n;if(e=ui,r=[],lo.test(t.charAt(ui))?(n=t.charAt(ui),ui++):(n=Tt,0===gi&&d(fo)),n!==Tt)for(;n!==Tt;)r.push(n),lo.test(t.charAt(ui))?(n=t.charAt(ui),ui++):(n=Tt,0===gi&&d(fo));else r=Tt;return r!==Tt&&(li=e,r=ho(r)),e=r}function X(){var e,r;return gi++,e=ui,po.test(t.charAt(ui))?(r=t.charAt(ui),ui++):(r=Tt,0===gi&&d(mo)),r!==Tt&&(li=e,r=so(r)),e=r,gi--,e===Tt&&(r=Tt,0===gi&&d(go)),e}function U(){var e,r;return gi++,e=ui,xo.test(t.charAt(ui))?(r=t.charAt(ui),ui++):(r=Tt,0===gi&&d(yo)),r!==Tt&&(li=e,r=so(r)),e=r,gi--,e===Tt&&(r=Tt,0===gi&&d(bo)),e}function V(){var e;return t.substr(ui,2)===vo?(e=vo,ui+=2):(e=Tt,0===gi&&d(wo)),e}function K(){var e;return t.substr(ui,2)===Co?(e=Co,ui+=2):(e=Tt,0===gi&&d(ko)),e}function Y(){var e,r,n;return e=ui,r=ui,gi++,t.substr(ui,2)===Co?(n=Co,ui+=2):(n=Tt,0===gi&&d(ko)),gi--,n===Tt?r=void 0:(ui=r,r=Tt),r!==Tt?(t.length>ui?(n=t.charAt(ui),ui++):(n=Tt,0===gi&&d(co)),n!==Tt?(li=e,r=so(n),e=r):(ui=e,e=Tt)):(ui=e,e=Tt),e}function Z(){var t,e,r,n;if(t=ui,e=V(),e!==Tt){for(r=[],n=Y();n!==Tt;)r.push(n),n=Y();r!==Tt?(n=K(),n!==Tt?(li=t,e=Ao(e,r,n),t=e):(ui=t,t=Tt)):(ui=t,t=Tt)}else ui=t,t=Tt;return t}function $(){var e;return t.substr(ui,2)===_o?(e=_o,ui+=2):(e=Tt,0===gi&&d(To)),e===Tt&&(35===t.charCodeAt(ui)?(e=So,ui++):(e=Tt,0===gi&&d(Lo))),e}function J(){var e;return Eo.test(t.charAt(ui))?(e=t.charAt(ui),ui++):(e=Tt,0===gi&&d(jo)),e}function Q(){var t,e,r,n;if(t=ui,e=$(),e!==Tt){for(r=[],n=J();n!==Tt;)r.push(n),n=J();r!==Tt?(li=t,e=Fo(e,r),t=e):(ui=t,t=Tt)}else ui=t,t=Tt;return t}function tt(){var t,e;return gi++,t=Q(),t===Tt&&(t=Z()),gi--,t===Tt&&(e=Tt,0===gi&&d(Po)),t}function et(){var t,e;for(t=[],e=X(),e===Tt&&(e=U(),e===Tt&&(e=tt()));e!==Tt;)t.push(e),e=X(),e===Tt&&(e=U(),e===Tt&&(e=tt()));return t}function rt(){var t,e;return gi++,t=ui,e=nt(),e!==Tt&&(li=t,e=Do(e)),t=e,t===Tt&&(t=ui,e=ot(),e!==Tt&&(li=t,e=Io(e)),t=e),gi--,t===Tt&&(e=Tt,0===gi&&d(Bo)),t}function nt(){var e,r,n,o;return e=ui,34===t.charCodeAt(ui)?(r=ro,ui++):(r=Tt,0===gi&&d(no)),r!==Tt?(n=ot(),n!==Tt?(34===t.charCodeAt(ui)?(o=ro,ui++):(o=Tt,0===gi&&d(no)),o!==Tt?(li=e,r=Mo(n),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e}function ot(){var t;return t=at(),t===Tt&&(t=it()),t}function it(){var e,r,n;if(e=ui,r=[],No.test(t.charAt(ui))?(n=t.charAt(ui),ui++):(n=Tt,0===gi&&d(Oo)),n!==Tt)for(;n!==Tt;)r.push(n),No.test(t.charAt(ui))?(n=t.charAt(ui),ui++):(n=Tt,0===gi&&d(Oo));else r=Tt;return r!==Tt&&(li=e,r=Ho(r)),e=r}function at(){var e,r,n,o,i;return e=ui,r=ui,n=it(),n!==Tt?(46===t.charCodeAt(ui)?(o=Wo,ui++):(o=Tt,0===gi&&d(Ro)),o!==Tt?(i=it(),i!==Tt?(n=[n,o,i],r=n):(ui=r,r=Tt)):(ui=r,r=Tt)):(ui=r,r=Tt),r!==Tt&&(li=e,r=zo(r)),e=r}function ct(){var t,e;return gi++,t=ui,e=st(),e!==Tt&&(li=t,e=qo(e)),t=e,t===Tt&&(t=ui,e=ut(),e!==Tt&&(li=t,e=Xo(e)),t=e),gi--,t===Tt&&(e=Tt,0===gi&&d(Go)),t}function st(){var e,r,n,o;return e=ui,34===t.charCodeAt(ui)?(r=ro,ui++):(r=Tt,0===gi&&d(no)),r!==Tt?(n=ut(),n!==Tt?(34===t.charCodeAt(ui)?(o=ro,ui++):(o=Tt,0===gi&&d(no)),o!==Tt?(li=e,r=Do(n),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e}function ut(){var e;return t.substr(ui,4).toLowerCase()===Uo?(e=t.substr(ui,4),ui+=4):(e=Tt,0===gi&&d(Vo)),e===Tt&&(t.substr(ui,5).toLowerCase()===Ko?(e=t.substr(ui,5),ui+=5):(e=Tt,0===gi&&d(Yo)),e===Tt&&(t.substr(ui,2).toLowerCase()===Zo?(e=t.substr(ui,2),ui+=2):(e=Tt,0===gi&&d($o)),e===Tt&&(t.substr(ui,3).toLowerCase()===Jo?(e=t.substr(ui,3),ui+=3):(e=Tt,0===gi&&d(Qo)),e===Tt&&(48===t.charCodeAt(ui)?(e=ti,ui++):(e=Tt,0===gi&&d(ei)),e===Tt&&(49===t.charCodeAt(ui)?(e=ri,ui++):(e=Tt,0===gi&&d(ni))))))),e}function lt(){var t,e;return gi++,t=ft(),t===Tt&&(t=dt()),gi--,t===Tt&&(e=Tt,0===gi&&d(oi)),t}function ft(){var e,r,n,o;return e=ui,34===t.charCodeAt(ui)?(r=ro,ui++):(r=Tt,0===gi&&d(no)),r!==Tt?(n=dt(),n!==Tt?(34===t.charCodeAt(ui)?(o=ro,ui++):(o=Tt,0===gi&&d(no)),o!==Tt?(li=e,r=Do(n),e=r):(ui=e,e=Tt)):(ui=e,e=Tt)):(ui=e,e=Tt),e}function dt(){var e,r;return e=ui,r=ot(),r!==Tt&&(li=e,r=ii(r)),e=r,e===Tt&&(e=ui,t.substr(ui,4).toLowerCase()===ai?(r=t.substr(ui,4),ui+=4):(r=Tt,0===gi&&d(ci)),r!==Tt&&(li=e,r=si(r)),e=r),e}function ht(t,e){return t=t||{},e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]}),t}function gt(t){var e={};return t.forEach(function(t){e=ht(e,t)}),e}function pt(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function mt(t,e){var r={};return r[t.toLowerCase()]=e,r}function bt(t,e){return void 0===e||"*"===e||t.some(function(t){return t.name===e})}function xt(t){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"].indexOf(t)>-1}function yt(t,e){return"Entity '"+t+"' in arc '"+e.from+" "+e.kind+" "+e.to+"' is not defined."}function vt(t,e){this.name="EntityNotDefinedError",this.message=yt(t,e),e.location&&(this.location=e.location,this.location.start.line++,this.location.end.line++)}function wt(t,e){return t||(t=[]),e&&e.forEach(function(e){e.forEach(function(e){if(e.from&&!bt(t,e.from))throw new vt(e.from,e);if(e.to&&!bt(t,e.to))throw new vt(e.to,e);e.location&&delete e.location,e.arcs&&wt(t,e.arcs)})}),t}function Ct(t){return!!t&&(!!t.watermark||!!t.width&&"auto"===!!t.width)}function kt(t){return!!t&&t.some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})})}function At(t,e){var r=Ct(t),n=kt(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}r=void 0!==r?r:{};var _t,Tt={},St={program:p},Lt=p,Et="{",jt=i("{",!1),Ft="}",Pt=i("}",!1),Bt=function(t,e){e.entities=wt(e.entities,e.arcs);var r=e;return r=ht({meta:At(e.options,e.arcs)},r),t.length>0&&(r=ht({precomment:t},r)),r},Dt="msc",It=i("msc",!0),Mt="xu",Nt=i("xu",!0),Ot=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},Ht=",",Wt=i(",",!1),Rt=function(t){return t},zt=";",Gt=i(";",!1),qt=function(t){return gt(t[0].concat(t[1]))},Xt=u("option"),Ut="hscale",Vt=i("hscale",!0),Kt="arcgradient",Yt=i("arcgradient",!0),Zt="=",$t=i("=",!1),Jt=function(t,e){return mt(t,e)},Qt="width",te=i("width",!0),ee="wordwraparcs",re=i("wordwraparcs",!0),ne=function(t,e){return mt(t,pt(e))},oe="watermark",ie=i("watermark",!0),ae=function(t){return t},ce=function(t){return t[0].concat(t[1])},se=u("entity"),ue="[",le=i("[",!1),fe="]",de=i("]",!1),he=function(t,e){return e},ge=function(t,e){return ht({name:t},e)},pe=function(t,e){return xt(t)&&o("MscGen keywords aren't allowed as entity names (embed them in quotes if you need them)"),ht({name:t},e)},me=function(t){return t},be=function(t){return t[0].concat(t[1])},xe=function(t,e){return e},ye=function(t,e){return ht(t,e)},ve=function(t){return{kind:t}},we=function(t,e,r){return{kind:e,from:t,to:r,location:n()}},Ce="*",ke=i("*",!1),Ae=function(t,e){return{kind:t,from:"*",to:e,location:n()}},_e=function(t,e){return{kind:e,from:t,to:"*",location:n()}},Te=function(t,e,r,n){return n},Se=function(t,e,r,o,i){return ht({kind:e,from:t,to:r,location:n(),arcs:i},o)},Le=u("empty row"),Ee="|||",je=i("|||",!1),Fe="...",Pe=i("...",!1),Be=u("---"),De="---",Ie=i("---",!1),Me=function(t){return t.toLowerCase()},Ne=u("bi-directional arrow"),Oe="--",He=i("--",!1),We="<->",Re=i("<->",!1),ze="==",Ge=i("==",!1),qe="<<=>>",Xe=i("<<=>>",!1),Ue="<=>",Ve=i("<=>",!1),Ke="..",Ye=i("..",!1),Ze="<<>>",$e=i("<<>>",!1),Je="::",Qe=i("::",!1),tr="<:>",er=i("<:>",!1),rr=u("left to right arrow"),nr="->",or=i("->",!1),ir="=>>",ar=i("=>>",!1),cr="=>",sr=i("=>",!1),ur=">>",lr=i(">>",!1),fr=":>",dr=i(":>",!1),hr="-x",gr=i("-x",!0),pr=u("right to left arrow"),mr="<-",br=i("<-",!1),xr="<<=",yr=i("<<=",!1),vr="<=",wr=i("<=",!1),Cr="<<",kr=i("<<",!1),Ar="<:",_r=i("<:",!1),Tr="x-",Sr=i("x-",!0),Lr=u("box"),Er="note",jr=i("note",!0),Fr="abox",Pr=i("abox",!0),Br="rbox",Dr=i("rbox",!0),Ir="box",Mr=i("box",!0),Nr=u("inline expression"),Or="alt",Hr=i("alt",!0),Wr="else",Rr=i("else",!0),zr="opt",Gr=i("opt",!0),qr="break",Xr=i("break",!0),Ur="par",Vr=i("par",!0),Kr="seq",Yr=i("seq",!0),Zr="strict",$r=i("strict",!0),Jr="neg",Qr=i("neg",!0),tn="critical",en=i("critical",!0),rn="ignore",nn=i("ignore",!0),on="consider",an=i("consider",!0),cn="assert",sn=i("assert",!0),un="loop",ln=i("loop",!0),fn="ref",dn=i("ref",!0),hn="exc",gn=i("exc",!0),pn=function(t){return t.toLowerCase()},mn=function(t){return gt(t[0].concat(t[1]))},bn=function(t,e){var r={};return r[t.toLowerCase().replace("colour","color")]=e,r},xn=u("attribute name"),yn="label",vn=i("label",!0),wn="idurl",Cn=i("idurl",!0),kn="id",An=i("id",!0),_n="url",Tn=i("url",!0),Sn="linecolor",Ln=i("linecolor",!0),En="linecolour",jn=i("linecolour",!0),Fn="textcolor",Pn=i("textcolor",!0),Bn="textcolour",Dn=i("textcolour",!0),In="textbgcolor",Mn=i("textbgcolor",!0),Nn="textbgcolour",On=i("textbgcolour",!0),Hn="arclinecolor",Wn=i("arclinecolor",!0),Rn="arclinecolour",zn=i("arclinecolour",!0),Gn="arctextcolor",qn=i("arctextcolor",!0),Xn="arctextcolour",Un=i("arctextcolour",!0),Vn="arctextbgcolor",Kn=i("arctextbgcolor",!0),Yn="arctextbgcolour",Zn=i("arctextbgcolour",!0),$n="arcskip",Jn=i("arcskip",!0),Qn="title",to=i("title",!0),eo=u("double quoted string"),ro='"',no=i('"',!1),oo=function(t){return t.join("")},io='\\"',ao=i('\\"',!1),co=c(),so=function(t){return t},uo=u("identifier"),lo=/^[A-Za-z_0-9]/,fo=a([["A","Z"],["a","z"],"_",["0","9"]],!1,!1),ho=function(t){return t.join("")},go=u("whitespace"),po=/^[ \t]/,mo=a([" ","\t"],!1,!1),bo=u("lineend"),xo=/^[\r\n]/,yo=a(["\r","\n"],!1,!1),vo="/*",wo=i("/*",!1),Co="*/",ko=i("*/",!1),Ao=function(t,e,r){return t+e.join("")+r},_o="//",To=i("//",!1),So="#",Lo=i("#",!1),Eo=/^[^\r\n]/,jo=a(["\r","\n"],!0,!1),Fo=function(t,e){return t+e.join("")},Po=u("comment"),Bo=u("number"),Do=function(t){return t},Io=function(t){return t.toString()},Mo=function(t){return t.toString()},No=/^[0-9]/,Oo=a([["0","9"]],!1,!1),Ho=function(t){return parseInt(t.join(""),10)},Wo=".",Ro=i(".",!1),zo=function(t){return parseFloat(t.join(""))},Go=u("boolean"),qo=function(t){return t},Xo=function(t){return t.toString()},Uo="true",Vo=i("true",!0),Ko="false",Yo=i("false",!0),Zo="on",$o=i("on",!0),Jo="off",Qo=i("off",!0),ti="0",ei=i("0",!1),ri="1",ni=i("1",!1),oi=u("size"),ii=function(t){return t.toString()},ai="auto",ci=i("auto",!0),si=function(t){return t.toLowerCase()},ui=0,li=0,fi=[{line:1,column:1}],di=0,hi=[],gi=0;if("startRule"in r){if(!(r.startRule in St))throw new Error("Can't start parsing from rule \""+r.startRule+'".');Lt=St[r.startRule]}if(_t=Lt(),_t!==Tt&&ui===t.length)return _t;throw _t!==Tt&&ui<t.length&&d(s()),g(hi,di<t.length?t.charAt(di):null,di<t.length?f(di,di+1):f(di,di))}return t(e,Error),e.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return s[t.type](t)}function a(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=i(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function c(t){return t?'"'+n(t)+'"':"end of input"}var s={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+a(t)+" but "+c(e)+" found."},{SyntaxError:e,parse:r}}),function(t,e){"function"==typeof r&&r.amd?r("lib/mscgenjs-core/parse/msgennyparser",[],e):"object"==typeof module&&module.exports&&(module.exports=e())}(this,function(){"use strict";function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,o){
this.message=t,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}function r(t,r){function n(t,e){return{type:"literal",text:t,ignoreCase:e}}function o(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function i(){return{type:"any"}}function a(){return{type:"end"}}function c(t){return{type:"other",description:t}}function s(e){var r,n=po[e];if(n)return n;for(r=e-1;!po[r];)r--;for(n=po[r],n={line:n.line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return po[e]=n,n}function u(t,e){var r=s(t),n=s(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function l(t){ho<mo||(ho>mo&&(mo=ho,bo=[]),bo.push(t))}function f(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function d(){var t,e,r,n;return t=ho,e=Z(),e!==yt?(r=h(),r!==yt?(n=Z(),n!==yt?(go=t,e=Ct(e,r),t=e):(ho=t,t=yt)):(ho=t,t=yt)):(ho=t,t=yt),t}function h(){var t,e,r,n;return t=ho,e=g(),e===yt&&(e=null),e!==yt?(r=m(),r===yt&&(r=null),r!==yt?(n=x(),n===yt&&(n=null),n!==yt?(go=t,e=kt(e,r,n),t=e):(ho=t,t=yt)):(ho=t,t=yt)):(ho=t,t=yt),t}function g(){var e,r,n,o,i,a;for(e=ho,r=ho,n=[],o=ho,i=p(),i!==yt?(44===t.charCodeAt(ho)?(a=At,ho++):(a=yt,0===xo&&l(_t)),a!==yt?(go=o,i=Tt(i),o=i):(ho=o,o=yt)):(ho=o,o=yt);o!==yt;)n.push(o),o=ho,i=p(),i!==yt?(44===t.charCodeAt(ho)?(a=At,ho++):(a=yt,0===xo&&l(_t)),a!==yt?(go=o,i=Tt(i),o=i):(ho=o,o=yt)):(ho=o,o=yt);return n!==yt?(o=ho,i=p(),i!==yt?(59===t.charCodeAt(ho)?(a=St,ho++):(a=yt,0===xo&&l(Lt)),a!==yt?(go=o,i=Tt(i),o=i):(ho=o,o=yt)):(ho=o,o=yt),o!==yt?(n=[n,o],r=n):(ho=r,r=yt)):(ho=r,r=yt),r!==yt&&(go=e,r=Et(r)),e=r}function p(){var e,r,n,o,i,a,c,s;return e=ho,r=Z(),r!==yt?(t.substr(ho,6).toLowerCase()===jt?(n=t.substr(ho,6),ho+=6):(n=yt,0===xo&&l(Ft)),n===yt&&(t.substr(ho,11).toLowerCase()===Pt?(n=t.substr(ho,11),ho+=11):(n=yt,0===xo&&l(Bt))),n!==yt?(o=Z(),o!==yt?(61===t.charCodeAt(ho)?(i=Dt,ho++):(i=yt,0===xo&&l(It)),i!==yt?(a=Z(),a!==yt?(c=$(),c!==yt?(s=Z(),s!==yt?(go=e,r=Mt(n,c),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt),e===yt&&(e=ho,r=Z(),r!==yt?(t.substr(ho,5).toLowerCase()===Nt?(n=t.substr(ho,5),ho+=5):(n=yt,0===xo&&l(Ot)),n!==yt?(o=Z(),o!==yt?(61===t.charCodeAt(ho)?(i=Dt,ho++):(i=yt,0===xo&&l(It)),i!==yt?(a=Z(),a!==yt?(c=it(),c!==yt?(s=Z(),s!==yt?(go=e,r=Mt(n,c),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt),e===yt&&(e=ho,r=Z(),r!==yt?(t.substr(ho,12).toLowerCase()===Ht?(n=t.substr(ho,12),ho+=12):(n=yt,0===xo&&l(Wt)),n!==yt?(o=Z(),o!==yt?(61===t.charCodeAt(ho)?(i=Dt,ho++):(i=yt,0===xo&&l(It)),i!==yt?(a=Z(),a!==yt?(c=rt(),c!==yt?(s=Z(),s!==yt?(go=e,r=Rt(n,c),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt),e===yt&&(e=ho,r=Z(),r!==yt?(t.substr(ho,9).toLowerCase()===zt?(n=t.substr(ho,9),ho+=9):(n=yt,0===xo&&l(Gt)),n!==yt?(o=Z(),o!==yt?(61===t.charCodeAt(ho)?(i=Dt,ho++):(i=yt,0===xo&&l(It)),i!==yt?(a=Z(),a!==yt?(c=I(),c!==yt?(s=Z(),s!==yt?(go=e,r=Mt(n,c),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)))),e}function m(){var e,r,n,o,i,a;for(e=ho,r=ho,n=[],o=ho,i=b(),i!==yt?(44===t.charCodeAt(ho)?(a=At,ho++):(a=yt,0===xo&&l(_t)),a!==yt?(go=o,i=qt(i),o=i):(ho=o,o=yt)):(ho=o,o=yt);o!==yt;)n.push(o),o=ho,i=b(),i!==yt?(44===t.charCodeAt(ho)?(a=At,ho++):(a=yt,0===xo&&l(_t)),a!==yt?(go=o,i=qt(i),o=i):(ho=o,o=yt)):(ho=o,o=yt);return n!==yt?(o=ho,i=b(),i!==yt?(59===t.charCodeAt(ho)?(a=St,ho++):(a=yt,0===xo&&l(Lt)),a!==yt?(go=o,i=qt(i),o=i):(ho=o,o=yt)):(ho=o,o=yt),o!==yt?(n=[n,o],r=n):(ho=r,r=yt)):(ho=r,r=yt),r!==yt&&(go=e,r=Xt(r)),e=r}function b(){var e,r,n,o,i,a,c,s,u;return xo++,e=ho,r=Z(),r!==yt?(n=H(),n!==yt?(o=Z(),o!==yt?(i=ho,58===t.charCodeAt(ho)?(a=Vt,ho++):(a=yt,0===xo&&l(Kt)),a!==yt?(c=Z(),c!==yt?(s=D(),s!==yt?(u=Z(),u!==yt?(go=i,a=Yt(n,s),i=a):(ho=i,i=yt)):(ho=i,i=yt)):(ho=i,i=yt)):(ho=i,i=yt),i===yt&&(i=null),i!==yt?(go=e,r=Zt(n,i),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt),xo--,e===yt&&(r=yt,0===xo&&l(Ut)),e}function x(){var e,r,n,o,i;if(e=[],r=ho,n=y(),n!==yt?(o=Z(),o!==yt?(59===t.charCodeAt(ho)?(i=St,ho++):(i=yt,0===xo&&l(Lt)),i!==yt?(go=r,n=$t(n),r=n):(ho=r,r=yt)):(ho=r,r=yt)):(ho=r,r=yt),r!==yt)for(;r!==yt;)e.push(r),r=ho,n=y(),n!==yt?(o=Z(),o!==yt?(59===t.charCodeAt(ho)?(i=St,ho++):(i=yt,0===xo&&l(Lt)),i!==yt?(go=r,n=$t(n),r=n):(ho=r,r=yt)):(ho=r,r=yt)):(ho=r,r=yt);else e=yt;return e}function y(){var e,r,n,o,i,a;for(e=ho,r=ho,n=[],o=ho,i=v(),i!==yt?(44===t.charCodeAt(ho)?(a=At,ho++):(a=yt,0===xo&&l(_t)),a!==yt?(go=o,i=$t(i),o=i):(ho=o,o=yt)):(ho=o,o=yt);o!==yt;)n.push(o),o=ho,i=v(),i!==yt?(44===t.charCodeAt(ho)?(a=At,ho++):(a=yt,0===xo&&l(_t)),a!==yt?(go=o,i=$t(i),o=i):(ho=o,o=yt)):(ho=o,o=yt);return n!==yt?(o=ho,i=v(),i!==yt&&(go=o,i=$t(i)),o=i,o!==yt?(n=[n,o],r=n):(ho=r,r=yt)):(ho=r,r=yt),r!==yt&&(go=e,r=Jt(r)),e=r}function v(){var t;return t=w(),t===yt&&(t=_()),t}function w(){var e,r,n,o,i,a,c;return e=ho,r=ho,n=C(),n!==yt&&(go=r,n=Qt(n)),r=n,r===yt&&(r=ho,n=A(),n!==yt&&(go=r,n=te(n)),r=n,r===yt&&(r=ho,n=k(),n!==yt&&(go=r,n=ee(n)),r=n)),r!==yt?(n=ho,58===t.charCodeAt(ho)?(o=Vt,ho++):(o=yt,0===xo&&l(Kt)),o!==yt?(i=Z(),i!==yt?(a=D(),a!==yt?(c=Z(),c!==yt?(go=n,o=re(r,a),n=o):(ho=n,n=yt)):(ho=n,n=yt)):(ho=n,n=yt)):(ho=n,n=yt),n===yt&&(n=null),n!==yt?(go=e,r=ne(r,n),e=r):(ho=e,e=yt)):(ho=e,e=yt),e}function C(){var t,e,r,n;return t=ho,e=Z(),e!==yt?(r=T(),r!==yt?(n=Z(),n!==yt?(go=t,e=oe(r),t=e):(ho=t,t=yt)):(ho=t,t=yt)):(ho=t,t=yt),t}function k(){var t,e,r,n;return t=ho,e=Z(),e!==yt?(r=S(),r!==yt?(n=Z(),n!==yt?(go=t,e=oe(r),t=e):(ho=t,t=yt)):(ho=t,t=yt)):(ho=t,t=yt),t}function A(){var e,r,n,o,i,a,c,s;return e=ho,r=Z(),r!==yt?(n=H(),n!==yt?(o=Z(),o!==yt?(i=L(),i!==yt?(a=Z(),a!==yt?(c=H(),c!==yt?(s=Z(),s!==yt?(go=e,r=ie(n,i,c),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt),e===yt&&(e=ho,r=Z(),r!==yt?(42===t.charCodeAt(ho)?(n=ae,ho++):(n=yt,0===xo&&l(ce)),n!==yt?(o=Z(),o!==yt?(i=F(),i!==yt?(a=Z(),a!==yt?(c=H(),c!==yt?(s=Z(),s!==yt?(go=e,r=se(i,c),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt),e===yt&&(e=ho,r=Z(),r!==yt?(n=H(),n!==yt?(o=Z(),o!==yt?(i=j(),i!==yt?(a=Z(),a!==yt?(42===t.charCodeAt(ho)?(c=ae,ho++):(c=yt,0===xo&&l(ce)),c!==yt?(s=Z(),s!==yt?(go=e,r=ue(n,i),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt),e===yt&&(e=ho,r=Z(),r!==yt?(n=H(),n!==yt?(o=Z(),o!==yt?(i=E(),i!==yt?(a=Z(),a!==yt?(42===t.charCodeAt(ho)?(c=ae,ho++):(c=yt,0===xo&&l(ce)),c!==yt?(s=Z(),s!==yt?(go=e,r=ue(n,i),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)))),e}function _(){var e,r,n,o,i,a,c,s,u,f,d,h,g,p,m;return e=ho,r=Z(),r!==yt?(n=H(),n!==yt?(o=Z(),o!==yt?(i=B(),i!==yt?(a=Z(),a!==yt?(c=H(),c!==yt?(s=Z(),s!==yt?(u=ho,58===t.charCodeAt(ho)?(f=Vt,ho++):(f=yt,0===xo&&l(Kt)),f!==yt?(d=Z(),d!==yt?(h=D(),h!==yt?(g=Z(),g!==yt?(go=u,f=le(n,i,c,h),u=f):(ho=u,u=yt)):(ho=u,u=yt)):(ho=u,u=yt)):(ho=u,u=yt),u===yt&&(u=null),u!==yt?(123===t.charCodeAt(ho)?(f=fe,ho++):(f=yt,0===xo&&l(de)),f!==yt?(d=Z(),d!==yt?(h=x(),h===yt&&(h=null),h!==yt?(g=Z(),g!==yt?(125===t.charCodeAt(ho)?(p=he,ho++):(p=yt,0===xo&&l(ge)),p!==yt?(m=Z(),m!==yt?(go=e,r=pe(n,i,c,u,h),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt),e}function T(){var e,r;return xo++,t.substr(ho,3)===be?(e=be,ho+=3):(e=yt,0===xo&&l(xe)),e===yt&&(t.substr(ho,3)===ye?(e=ye,ho+=3):(e=yt,0===xo&&l(ve))),xo--,e===yt&&(r=yt,0===xo&&l(me)),e}function S(){var e,r;return xo++,t.substr(ho,3)===Ce?(e=Ce,ho+=3):(e=yt,0===xo&&l(ke)),xo--,e===yt&&(r=yt,0===xo&&l(we)),e}function L(){var t,e;return t=ho,e=E(),e===yt&&(e=j(),e===yt&&(e=F(),e===yt&&(e=P()))),e!==yt&&(go=t,e=Ae(e)),t=e}function E(){var e,r;return xo++,t.substr(ho,2)===Te?(e=Te,ho+=2):(e=yt,0===xo&&l(Se)),e===yt&&(t.substr(ho,3)===Le?(e=Le,ho+=3):(e=yt,0===xo&&l(Ee)),e===yt&&(t.substr(ho,2)===je?(e=je,ho+=2):(e=yt,0===xo&&l(Fe)),e===yt&&(t.substr(ho,5)===Pe?(e=Pe,ho+=5):(e=yt,0===xo&&l(Be)),e===yt&&(t.substr(ho,3)===De?(e=De,ho+=3):(e=yt,0===xo&&l(Ie)),e===yt&&(t.substr(ho,2)===Me?(e=Me,ho+=2):(e=yt,0===xo&&l(Ne)),e===yt&&(t.substr(ho,4)===Oe?(e=Oe,ho+=4):(e=yt,0===xo&&l(He)),e===yt&&(t.substr(ho,2)===We?(e=We,ho+=2):(e=yt,0===xo&&l(Re)),e===yt&&(t.substr(ho,3)===ze?(e=ze,ho+=3):(e=yt,0===xo&&l(Ge)))))))))),xo--,e===yt&&(r=yt,0===xo&&l(_e)),e}function j(){var e,r;return xo++,t.substr(ho,2)===Xe?(e=Xe,ho+=2):(e=yt,0===xo&&l(Ue)),e===yt&&(t.substr(ho,3)===Ve?(e=Ve,ho+=3):(e=yt,0===xo&&l(Ke)),e===yt&&(t.substr(ho,2)===Ye?(e=Ye,ho+=2):(e=yt,0===xo&&l(Ze)),e===yt&&(t.substr(ho,2)===$e?(e=$e,ho+=2):(e=yt,0===xo&&l(Je)),e===yt&&(t.substr(ho,2)===Qe?(e=Qe,ho+=2):(e=yt,0===xo&&l(tr)),e===yt&&(t.substr(ho,2).toLowerCase()===er?(e=t.substr(ho,2),ho+=2):(e=yt,0===xo&&l(rr))))))),xo--,e===yt&&(r=yt,0===xo&&l(qe)),e}function F(){var e,r;return xo++,t.substr(ho,2)===or?(e=or,ho+=2):(e=yt,0===xo&&l(ir)),e===yt&&(t.substr(ho,3)===ar?(e=ar,ho+=3):(e=yt,0===xo&&l(cr)),e===yt&&(t.substr(ho,2)===sr?(e=sr,ho+=2):(e=yt,0===xo&&l(ur)),e===yt&&(t.substr(ho,2)===lr?(e=lr,ho+=2):(e=yt,0===xo&&l(fr)),e===yt&&(t.substr(ho,2)===dr?(e=dr,ho+=2):(e=yt,0===xo&&l(hr)),e===yt&&(t.substr(ho,2).toLowerCase()===gr?(e=t.substr(ho,2),ho+=2):(e=yt,0===xo&&l(pr))))))),xo--,e===yt&&(r=yt,0===xo&&l(nr)),e}function P(){var e,r;return xo++,t.substr(ho,4).toLowerCase()===br?(e=t.substr(ho,4),ho+=4):(e=yt,0===xo&&l(xr)),e===yt&&(t.substr(ho,4).toLowerCase()===yr?(e=t.substr(ho,4),ho+=4):(e=yt,0===xo&&l(vr)),e===yt&&(t.substr(ho,4).toLowerCase()===wr?(e=t.substr(ho,4),ho+=4):(e=yt,0===xo&&l(Cr)),e===yt&&(t.substr(ho,3).toLowerCase()===kr?(e=t.substr(ho,3),ho+=3):(e=yt,0===xo&&l(Ar))))),xo--,e===yt&&(r=yt,0===xo&&l(mr)),e}function B(){var e,r;return xo++,e=ho,t.substr(ho,3).toLowerCase()===Tr?(r=t.substr(ho,3),ho+=3):(r=yt,0===xo&&l(Sr)),r===yt&&(t.substr(ho,4).toLowerCase()===Lr?(r=t.substr(ho,4),ho+=4):(r=yt,0===xo&&l(Er)),r===yt&&(t.substr(ho,3).toLowerCase()===jr?(r=t.substr(ho,3),ho+=3):(r=yt,0===xo&&l(Fr)),r===yt&&(t.substr(ho,5).toLowerCase()===Pr?(r=t.substr(ho,5),ho+=5):(r=yt,0===xo&&l(Br)),r===yt&&(t.substr(ho,3).toLowerCase()===Dr?(r=t.substr(ho,3),ho+=3):(r=yt,0===xo&&l(Ir)),r===yt&&(t.substr(ho,3).toLowerCase()===Mr?(r=t.substr(ho,3),ho+=3):(r=yt,0===xo&&l(Nr)),r===yt&&(t.substr(ho,6).toLowerCase()===Or?(r=t.substr(ho,6),ho+=6):(r=yt,0===xo&&l(Hr)),r===yt&&(t.substr(ho,3).toLowerCase()===Wr?(r=t.substr(ho,3),ho+=3):(r=yt,0===xo&&l(Rr)),r===yt&&(t.substr(ho,8).toLowerCase()===zr?(r=t.substr(ho,8),ho+=8):(r=yt,0===xo&&l(Gr)),r===yt&&(t.substr(ho,6).toLowerCase()===qr?(r=t.substr(ho,6),ho+=6):(r=yt,0===xo&&l(Xr)),r===yt&&(t.substr(ho,8).toLowerCase()===Ur?(r=t.substr(ho,8),ho+=8):(r=yt,0===xo&&l(Vr)),r===yt&&(t.substr(ho,6).toLowerCase()===Kr?(r=t.substr(ho,6),ho+=6):(r=yt,0===xo&&l(Yr)),r===yt&&(t.substr(ho,4).toLowerCase()===Zr?(r=t.substr(ho,4),ho+=4):(r=yt,0===xo&&l($r)),r===yt&&(t.substr(ho,3).toLowerCase()===Jr?(r=t.substr(ho,3),ho+=3):(r=yt,0===xo&&l(Qr)),r===yt&&(t.substr(ho,3).toLowerCase()===tn?(r=t.substr(ho,3),ho+=3):(r=yt,0===xo&&l(en)))))))))))))))),r!==yt&&(go=e,r=rn(r)),e=r,xo--,e===yt&&(r=yt,0===xo&&l(_r)),e}function D(){var t;return t=I(),t===yt&&(t=N()),t}function I(){var e,r,n,o;return xo++,e=ho,34===t.charCodeAt(ho)?(r=on,ho++):(r=yt,0===xo&&l(an)),r!==yt?(n=M(),n!==yt?(34===t.charCodeAt(ho)?(o=on,ho++):(o=yt,0===xo&&l(an)),o!==yt?(go=e,r=cn(n),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt),xo--,e===yt&&(r=yt,0===xo&&l(nn)),e}function M(){var e,r,n,o;for(e=[],r=ho,n=ho,xo++,34===t.charCodeAt(ho)?(o=on,ho++):(o=yt,0===xo&&l(an)),xo--,o===yt?n=void 0:(ho=n,n=yt),n!==yt?(t.substr(ho,2)===sn?(o=sn,ho+=2):(o=yt,0===xo&&l(un)),o===yt&&(t.length>ho?(o=t.charAt(ho),ho++):(o=yt,0===xo&&l(ln))),o!==yt?(go=r,n=fn(o),r=n):(ho=r,r=yt)):(ho=r,r=yt);r!==yt;)e.push(r),r=ho,n=ho,xo++,34===t.charCodeAt(ho)?(o=on,ho++):(o=yt,0===xo&&l(an)),xo--,o===yt?n=void 0:(ho=n,n=yt),n!==yt?(t.substr(ho,2)===sn?(o=sn,ho+=2):(o=yt,0===xo&&l(un)),o===yt&&(t.length>ho?(o=t.charAt(ho),ho++):(o=yt,0===xo&&l(ln))),o!==yt?(go=r,n=fn(o),r=n):(ho=r,r=yt)):(ho=r,r=yt);return e}function N(){var t,e;return t=ho,e=O(),e!==yt&&(go=t,e=dn(e)),t=e}function O(){var e,r,n,o;for(e=[],r=ho,n=ho,xo++,44===t.charCodeAt(ho)?(o=At,ho++):(o=yt,0===xo&&l(_t)),o===yt&&(59===t.charCodeAt(ho)?(o=St,ho++):(o=yt,0===xo&&l(Lt)),o===yt&&(123===t.charCodeAt(ho)?(o=fe,ho++):(o=yt,0===xo&&l(de)))),xo--,o===yt?n=void 0:(ho=n,n=yt),n!==yt?(t.length>ho?(o=t.charAt(ho),ho++):(o=yt,0===xo&&l(ln)),o!==yt?(go=r,n=fn(o),r=n):(ho=r,r=yt)):(ho=r,r=yt);r!==yt;)e.push(r),r=ho,n=ho,xo++,44===t.charCodeAt(ho)?(o=At,ho++):(o=yt,0===xo&&l(_t)),o===yt&&(59===t.charCodeAt(ho)?(o=St,ho++):(o=yt,0===xo&&l(Lt)),o===yt&&(123===t.charCodeAt(ho)?(o=fe,ho++):(o=yt,0===xo&&l(de)))),xo--,o===yt?n=void 0:(ho=n,n=yt),n!==yt?(t.length>ho?(o=t.charAt(ho),ho++):(o=yt,0===xo&&l(ln)),o!==yt?(go=r,n=fn(o),r=n):(ho=r,r=yt)):(ho=r,r=yt);return e}function H(){var e,r,n;if(xo++,e=ho,r=[],gn.test(t.charAt(ho))?(n=t.charAt(ho),ho++):(n=yt,0===xo&&l(pn)),n!==yt)for(;n!==yt;)r.push(n),gn.test(t.charAt(ho))?(n=t.charAt(ho),ho++):(n=yt,0===xo&&l(pn));else r=yt;return r!==yt&&(go=e,r=mn(r)),e=r,e===yt&&(e=I()),xo--,e===yt&&(r=yt,0===xo&&l(hn)),e}function W(){var e,r;return xo++,e=ho,xn.test(t.charAt(ho))?(r=t.charAt(ho),ho++):(r=yt,0===xo&&l(yn)),r!==yt&&(go=e,r=fn(r)),e=r,xo--,e===yt&&(r=yt,0===xo&&l(bn)),e}function R(){var e,r;return xo++,e=ho,wn.test(t.charAt(ho))?(r=t.charAt(ho),ho++):(r=yt,0===xo&&l(Cn)),r!==yt&&(go=e,r=fn(r)),e=r,xo--,e===yt&&(r=yt,0===xo&&l(vn)),e}function z(){var e;return t.substr(ho,2)===kn?(e=kn,ho+=2):(e=yt,0===xo&&l(An)),e}function G(){var e;return t.substr(ho,2)===_n?(e=_n,ho+=2):(e=yt,0===xo&&l(Tn)),e}function q(){var e,r,n;return e=ho,r=ho,xo++,t.substr(ho,2)===_n?(n=_n,ho+=2):(n=yt,0===xo&&l(Tn)),xo--,n===yt?r=void 0:(ho=r,r=yt),r!==yt?(t.length>ho?(n=t.charAt(ho),ho++):(n=yt,0===xo&&l(ln)),n!==yt?(go=e,r=fn(n),e=r):(ho=e,e=yt)):(ho=e,e=yt),e}function X(){var t,e,r,n;if(t=ho,e=z(),e!==yt){for(r=[],n=q();n!==yt;)r.push(n),n=q();r!==yt?(n=G(),n!==yt?(go=t,e=Sn(e,r,n),t=e):(ho=t,t=yt)):(ho=t,t=yt)}else ho=t,t=yt;return t}function U(){var e;return t.substr(ho,2)===Ln?(e=Ln,ho+=2):(e=yt,0===xo&&l(En)),e===yt&&(35===t.charCodeAt(ho)?(e=jn,ho++):(e=yt,0===xo&&l(Fn))),e}function V(){var e;return Pn.test(t.charAt(ho))?(e=t.charAt(ho),ho++):(e=yt,0===xo&&l(Bn)),e}function K(){var t,e,r,n;if(t=ho,e=U(),e!==yt){for(r=[],n=V();n!==yt;)r.push(n),n=V();r!==yt?(go=t,e=Dn(e,r),t=e):(ho=t,t=yt)}else ho=t,t=yt;return t}function Y(){var t,e;return xo++,t=K(),t===yt&&(t=X()),xo--,t===yt&&(e=yt,0===xo&&l(In)),t}function Z(){var t,e;for(t=[],e=W(),e===yt&&(e=R(),e===yt&&(e=Y()));e!==yt;)t.push(e),e=W(),e===yt&&(e=R(),e===yt&&(e=Y()));return t}function $(){var t,e;return xo++,t=ho,e=J(),e!==yt&&(go=t,e=Nn(e)),t=e,t===yt&&(t=ho,e=Q(),e!==yt&&(go=t,e=On(e)),t=e),xo--,t===yt&&(e=yt,0===xo&&l(Mn)),t}function J(){var e,r,n,o;return e=ho,34===t.charCodeAt(ho)?(r=on,ho++):(r=yt,0===xo&&l(an)),r!==yt?(n=Q(),n!==yt?(34===t.charCodeAt(ho)?(o=on,ho++):(o=yt,0===xo&&l(an)),o!==yt?(go=e,r=Hn(n),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt),e}function Q(){var t;return t=et(),t===yt&&(t=tt()),t}function tt(){var e,r,n;if(e=ho,r=[],Wn.test(t.charAt(ho))?(n=t.charAt(ho),ho++):(n=yt,0===xo&&l(Rn)),n!==yt)for(;n!==yt;)r.push(n),Wn.test(t.charAt(ho))?(n=t.charAt(ho),ho++):(n=yt,0===xo&&l(Rn));else r=yt;return r!==yt&&(go=e,r=zn(r)),e=r}function et(){var e,r,n,o,i;return e=ho,r=ho,n=tt(),n!==yt?(46===t.charCodeAt(ho)?(o=Gn,ho++):(o=yt,0===xo&&l(qn)),o!==yt?(i=tt(),i!==yt?(n=[n,o,i],r=n):(ho=r,r=yt)):(ho=r,r=yt)):(ho=r,r=yt),r!==yt&&(go=e,r=Xn(r)),e=r}function rt(){var t,e;return xo++,t=ho,e=nt(),e!==yt&&(go=t,e=Vn(e)),t=e,t===yt&&(t=ho,e=ot(),e!==yt&&(go=t,e=Kn(e)),t=e),xo--,t===yt&&(e=yt,0===xo&&l(Un)),t}function nt(){var e,r,n,o;return e=ho,34===t.charCodeAt(ho)?(r=on,ho++):(r=yt,0===xo&&l(an)),r!==yt?(n=ot(),n!==yt?(34===t.charCodeAt(ho)?(o=on,ho++):(o=yt,0===xo&&l(an)),o!==yt?(go=e,r=Nn(n),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt),e}function ot(){var e;return t.substr(ho,4).toLowerCase()===Yn?(e=t.substr(ho,4),ho+=4):(e=yt,0===xo&&l(Zn)),e===yt&&(t.substr(ho,5).toLowerCase()===$n?(e=t.substr(ho,5),ho+=5):(e=yt,0===xo&&l(Jn)),e===yt&&(t.substr(ho,2).toLowerCase()===Qn?(e=t.substr(ho,2),ho+=2):(e=yt,0===xo&&l(to)),e===yt&&(t.substr(ho,3).toLowerCase()===eo?(e=t.substr(ho,3),ho+=3):(e=yt,0===xo&&l(ro)),e===yt&&(48===t.charCodeAt(ho)?(e=no,ho++):(e=yt,0===xo&&l(oo)),e===yt&&(49===t.charCodeAt(ho)?(e=io,ho++):(e=yt,0===xo&&l(ao))))))),e}function it(){var t,e;return xo++,t=at(),t===yt&&(t=ct()),xo--,t===yt&&(e=yt,0===xo&&l(co)),t}function at(){var e,r,n,o;return e=ho,34===t.charCodeAt(ho)?(r=on,ho++):(r=yt,0===xo&&l(an)),r!==yt?(n=ct(),n!==yt?(34===t.charCodeAt(ho)?(o=on,ho++):(o=yt,0===xo&&l(an)),o!==yt?(go=e,r=Nn(n),e=r):(ho=e,e=yt)):(ho=e,e=yt)):(ho=e,e=yt),e}function ct(){var e,r;return e=ho,r=Q(),r!==yt&&(go=e,r=so(r)),e=r,e===yt&&(e=ho,t.substr(ho,4).toLowerCase()===uo?(r=t.substr(ho,4),ho+=4):(r=yt,0===xo&&l(lo)),r!==yt&&(go=e,r=fo(r)),e=r),e}function st(t,e){return t=t||{},e&&Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]}),t}function ut(t){var e={};return t.forEach(function(t){e=st(e,t)}),e}function lt(t){return["true","on","1"].indexOf(t.toLowerCase())>-1}function ft(t,e){var r={};return r[t.toLowerCase()]=e,r}function dt(t,e,r){return void 0===e||"*"===e||(!!t.some(function(t){return t.name===e})||r[e]===!0)}function ht(t){var e={};return e.name=t,e}function gt(t,e,r){return t||(t=[]),r||(r={}),e&&e.forEach(function(e){e.forEach(function(e){dt(t,e.from,r)||t.push(ht(e.from)),e.arcs&&(r[e.to]=!0,st(t,gt(t,e.arcs,r)),delete r[e.to]),dt(t,e.to,r)||t.push(ht(e.to))})}),t}function pt(t){return!!t&&(!!t.watermark||!!t.width&&"auto"===!!t.width)}function mt(t){return!!t&&t.some(function(t){return t.some(function(t){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(t.kind)>-1})})}function bt(t,e){var r=pt(t),n=mt(e);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}r=void 0!==r?r:{};var xt,yt={},vt={program:d},wt=d,Ct=function(t,e){e.entities=gt(e.entities,e.arcs);var r=e;return r=st({meta:bt(e.options,e.arcs)},r),t.length>0&&(r=st({precomment:t},r)),r},kt=function(t,e,r){var n={};return t&&(n.options=t),e&&(n.entities=e),r&&(n.arcs=r),n},At=",",_t=n(",",!1),Tt=function(t){return t},St=";",Lt=n(";",!1),Et=function(t){return ut(t[0].concat(t[1]))},jt="hscale",Ft=n("hscale",!0),Pt="arcgradient",Bt=n("arcgradient",!0),Dt="=",It=n("=",!1),Mt=function(t,e){return ft(t,e)},Nt="width",Ot=n("width",!0),Ht="wordwraparcs",Wt=n("wordwraparcs",!0),Rt=function(t,e){return ft(t,lt(e))},zt="watermark",Gt=n("watermark",!0),qt=function(t){return t},Xt=function(t){return t[0].concat(t[1])},Ut=c("entity"),Vt=":",Kt=n(":",!1),Yt=function(t,e){return e},Zt=function(t,e){var r={};return r.name=t,e&&(r.label=e),r},$t=function(t){return t},Jt=function(t){return t[0].concat(t[1])},Qt=function(t){return t},te=function(t){return t},ee=function(t){return t},re=function(t,e){return e},ne=function(t,e){return e&&(t.label=e),t},oe=function(t){return{kind:t}},ie=function(t,e,r){return{kind:e,from:t,to:r}},ae="*",ce=n("*",!1),se=function(t,e){return{kind:t,from:"*",to:e}},ue=function(t,e){return{kind:e,from:t,to:"*"}},le=function(t,e,r,n){return n},fe="{",de=n("{",!1),he="}",ge=n("}",!1),pe=function(t,e,r,n,o){var i={kind:e,from:t,to:r,arcs:o};return n&&(i.label=n),i},me=c("empty row"),be="|||",xe=n("|||",!1),ye="...",ve=n("...",!1),we=c("---"),Ce="---",ke=n("---",!1),Ae=function(t){return t.toLowerCase()},_e=c("bi-directional arrow"),Te="--",Se=n("--",!1),Le="<->",Ee=n("<->",!1),je="==",Fe=n("==",!1),Pe="<<=>>",Be=n("<<=>>",!1),De="<=>",Ie=n("<=>",!1),Me="..",Ne=n("..",!1),Oe="<<>>",He=n("<<>>",!1),We="::",Re=n("::",!1),ze="<:>",Ge=n("<:>",!1),qe=c("left to right arrow"),Xe="->",Ue=n("->",!1),Ve="=>>",Ke=n("=>>",!1),Ye="=>",Ze=n("=>",!1),$e=">>",Je=n(">>",!1),Qe=":>",tr=n(":>",!1),er="-x",rr=n("-x",!0),nr=c("right to left arrow"),or="<-",ir=n("<-",!1),ar="<<=",cr=n("<<=",!1),sr="<=",ur=n("<=",!1),lr="<<",fr=n("<<",!1),dr="<:",hr=n("<:",!1),gr="x-",pr=n("x-",!0),mr=c("box"),br="note",xr=n("note",!0),yr="abox",vr=n("abox",!0),wr="rbox",Cr=n("rbox",!0),kr="box",Ar=n("box",!0),_r=c("inline expression"),Tr="alt",Sr=n("alt",!0),Lr="else",Er=n("else",!0),jr="opt",Fr=n("opt",!0),Pr="break",Br=n("break",!0),Dr="par",Ir=n("par",!0),Mr="seq",Nr=n("seq",!0),Or="strict",Hr=n("strict",!0),Wr="neg",Rr=n("neg",!0),zr="critical",Gr=n("critical",!0),qr="ignore",Xr=n("ignore",!0),Ur="consider",Vr=n("consider",!0),Kr="assert",Yr=n("assert",!0),Zr="loop",$r=n("loop",!0),Jr="ref",Qr=n("ref",!0),tn="exc",en=n("exc",!0),rn=function(t){return t.toLowerCase()},nn=c("double quoted string"),on='"',an=n('"',!1),cn=function(t){return t.join("")},sn='\\"',un=n('\\"',!1),ln=i(),fn=function(t){return t},dn=function(t){return t.join("").trim()},hn=c("identifier"),gn=/^[^;, "\t\n\r=\-><:{*]/,pn=o([";",","," ",'"',"\t","\n","\r","=","-",">","<",":","{","*"],!0,!1),mn=function(t){return t.join("")},bn=c("whitespace"),xn=/^[ \t]/,yn=o([" ","\t"],!1,!1),vn=c("lineend"),wn=/^[\r\n]/,Cn=o(["\r","\n"],!1,!1),kn="/*",An=n("/*",!1),_n="*/",Tn=n("*/",!1),Sn=function(t,e,r){return t+e.join("")+r},Ln="//",En=n("//",!1),jn="#",Fn=n("#",!1),Pn=/^[^\r\n]/,Bn=o(["\r","\n"],!0,!1),Dn=function(t,e){return t+e.join("")},In=c("comment"),Mn=c("number"),Nn=function(t){return t},On=function(t){return t.toString()},Hn=function(t){return t.toString()},Wn=/^[0-9]/,Rn=o([["0","9"]],!1,!1),zn=function(t){return parseInt(t.join(""),10)},Gn=".",qn=n(".",!1),Xn=function(t){return parseFloat(t.join(""))},Un=c("boolean"),Vn=function(t){return t},Kn=function(t){return t.toString()},Yn="true",Zn=n("true",!0),$n="false",Jn=n("false",!0),Qn="on",to=n("on",!0),eo="off",ro=n("off",!0),no="0",oo=n("0",!1),io="1",ao=n("1",!1),co=c("size"),so=function(t){return t.toString()},uo="auto",lo=n("auto",!0),fo=function(t){return t.toLowerCase()},ho=0,go=0,po=[{line:1,column:1}],mo=0,bo=[],xo=0;if("startRule"in r){if(!(r.startRule in vt))throw new Error("Can't start parsing from rule \""+r.startRule+'".');wt=vt[r.startRule]}if(xt=wt(),xt!==yt&&ho===t.length)return xt;throw xt!==yt&&ho<t.length&&l(a()),f(bo,mo<t.length?t.charAt(mo):null,mo<t.length?u(mo,mo+1):u(mo,mo))}return t(e,Error),e.buildMessage=function(t,e){function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function i(t){return s[t.type](t)}function a(t){var e,r,n=new Array(t.length);for(e=0;e<t.length;e++)n[e]=i(t[e]);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function c(t){return t?'"'+n(t)+'"':"end of input"}var s={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+a(t)+" but "+c(e)+" found."},{SyntaxError:e,parse:r}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/domprimitives",[],function(){"use strict";function t(t,e,r){return Boolean(r)&&t.setAttribute(e,r),t}function e(t,e,r,n){return Boolean(n)&&t.setAttributeNS(e,r,n),t}function r(e,r){return r&&Object.keys(r).forEach(function(n){t(e,n,r[n])}),e}function n(t,r,n){return n&&Object.keys(n).forEach(function(o){e(t,r,o,n[o])}),t}function o(t,e){return r(s.createElementNS(a,t),e)}function i(t){return s.createTextNode(t)}var a="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xlink",s={};return{SVGNS:a,XLINKNS:c,init:function(t){s=t},setAttribute:t,setAttributes:r,setAttributesNS:n,createElement:o,createTextNode:i}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/geometry",[],function(){"use strict";function t(t){return 360*t/(2*Math.PI)}return{getDiagonalAngle:function(e){return 0-t(Math.atan(e.height/e.width))}}}),function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function n(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function o(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function i(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}function a(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function c(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function s(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function u(t){return function(e){return t(e)}}function l(t,e){return null==t?Yt:t[e]}function f(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function d(t,e){return function(r){return t(e(r))}}function h(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function g(){}function p(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function m(){this.__data__=Lr?Lr(null):{},this.size=0}function b(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function x(t){var e=this.__data__;if(Lr){var r=e[t];return r===Qt?Yt:r}return nr.call(e,t)?e[t]:Yt}function y(t){var e=this.__data__;return Lr?e[t]!==Yt:nr.call(e,t)}function v(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Lr&&e===Yt?Qt:e,this}function w(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function C(){this.__data__=[],this.size=0}function k(t){var e=this.__data__,r=R(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():gr.call(e,r,1),--this.size,!0}function A(t){var e=this.__data__,r=R(e,t);return r<0?Yt:e[r][1]}function _(t){return R(this.__data__,t)>-1}function T(t,e){var r=this.__data__,n=R(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function S(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function L(){this.size=0,this.__data__={hash:new p,map:new(Ar||w),string:new p}}function E(t){var e=bt(this,t).delete(t);return this.size-=e?1:0,e}function j(t){return bt(this,t).get(t)}function F(t){return bt(this,t).has(t)}function P(t,e){var r=bt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function B(t){var e=this.__data__=new w(t);this.size=e.size}function D(){this.__data__=new w,this.size=0}function I(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function M(t){return this.__data__.get(t)}function N(t){return this.__data__.has(t)}function O(t,e){var r=this.__data__;if(r instanceof w){var n=r.__data__;if(!Ar||n.length<$t-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new S(n)}return r.set(t,e),this.size=r.size,this}function H(t,e){var r=Gr(t),n=!r&&zr(t),o=!r&&!n&&qr(t),i=!r&&!n&&!o&&Xr(t),a=r||n||o||i,c=a?s(t.length,String):[],u=c.length;for(var l in t)!e&&!nr.call(t,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||At(l,u))||c.push(l);return c}function W(t,e,r){var n=t[e];nr.call(t,e)&&Nt(n,r)&&(r!==Yt||e in t)||q(t,e,r)}function R(t,e){for(var r=t.length;r--;)if(Nt(t[r][0],e))return r;return-1}function z(t,e){return t&&lt(e,Gt(e),t)}function G(t,e){return t&&lt(e,qt(e),t)}function q(t,e,r){"__proto__"==e&&br?br(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function X(t,e,r,n,i,a){var c,s=e&te,u=e&ee,l=e&re;if(r&&(c=i?r(t,n,i,a):r(t)),c!==Yt)return c;if(!Rt(t))return t;var f=Gr(t);if(f){if(c=vt(t),!s)return ut(t,c)}else{var d=Wr(t),h=d==de||d==he;if(qr(t))return et(t,s);if(d==be||d==ae||h&&!i){if(c=u||h?{}:wt(t),!s)return u?dt(t,G(c,t)):ft(t,z(c,t))}else{if(!ze[d])return i?t:{};c=Ct(t,d,X,s)}}a||(a=new B);var g=a.get(t);if(g)return g;a.set(t,c);var p=l?u?mt:pt:u?qt:Gt,m=f?Yt:p(t);return o(m||t,function(n,o){m&&(o=n,n=t[o]),W(c,o,X(n,e,r,o,t,a))}),c}function U(t,e,r,n,o){var i=-1,c=t.length;for(r||(r=kt),o||(o=[]);++i<c;){var s=t[i];e>0&&r(s)?e>1?U(s,e-1,r,n,o):a(o,s):n||(o[o.length]=s)}return o}function V(t,e,r){var n=e(t);return Gr(t)?n:a(n,r(t))}function K(t){return null==t?t===Yt?Ae:me:mr&&mr in Object(t)?yt(t):jt(t)}function Y(t){return zt(t)&&K(t)==ae}function Z(t){if(!Rt(t)||St(t))return!1;var e=Ht(t)?ar:He;return e.test(Bt(t))}function $(t){return zt(t)&&Wt(t.length)&&!!Re[K(t)]}function J(t){if(!Lt(t))return vr(t);var e=[];for(var r in Object(t))nr.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Q(t){if(!Rt(t))return Et(t);var e=Lt(t),r=[];for(var n in t)("constructor"!=n||!e&&nr.call(t,n))&&r.push(n);return r}function tt(t,e){return Rr(Ft(t,e,Ut),t+"")}function et(t,e){if(e)return t.slice();var r=t.length,n=lr?lr(r):new t.constructor(r);return t.copy(n),n}function rt(t){var e=new t.constructor(t.byteLength);return new ur(e).set(new ur(t)),e}function nt(t,e){var r=e?rt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function ot(e,r,n){var o=r?n(f(e),te):f(e);return c(o,t,new e.constructor)}function it(t){var e=new t.constructor(t.source,Oe.exec(t));return e.lastIndex=t.lastIndex,e}function at(t,r,n){var o=r?n(h(t),te):h(t);return c(o,e,new t.constructor)}function ct(t){return Ir?Object(Ir.call(t)):{}}function st(t,e){var r=e?rt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function ut(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function lt(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var c=e[i],s=n?n(r[c],t[c],c,r,t):Yt;s===Yt&&(s=t[c]),o?q(r,c,s):W(r,c,s)}return r}function ft(t,e){return lt(t,Or(t),e)}function dt(t,e){return lt(t,Hr(t),e)}function ht(t){return tt(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:Yt,a=o>2?r[2]:Yt;for(i=t.length>3&&"function"==typeof i?(o--,i):Yt,a&&_t(r[0],r[1],a)&&(i=o<3?Yt:i,o=1),e=Object(e);++n<o;){var c=r[n];c&&t(e,c,n,i)}return e})}function gt(t,e,r,n){return t===Yt||Nt(t,tr[r])&&!nr.call(n,r)?e:t}function pt(t){return V(t,Gt,Or)}function mt(t){return V(t,qt,Hr)}function bt(t,e){var r=t.__data__;return Tt(e)?r["string"==typeof e?"string":"hash"]:r.map}function xt(t,e){var r=l(t,e);return Z(r)?r:Yt}function yt(t){var e=nr.call(t,mr),r=t[mr];try{t[mr]=Yt;var n=!0}catch(t){}var o=ir.call(t);return n&&(e?t[mr]=r:delete t[mr]),o}function vt(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&nr.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function wt(t){return"function"!=typeof t.constructor||Lt(t)?{}:Mr(fr(t))}function Ct(t,e,r,n){var o=t.constructor;switch(e){case Te:return rt(t);case ue:case le:return new o(+t);case Se:return nt(t,n);case Le:case Ee:case je:case Fe:case Pe:case Be:case De:case Ie:case Me:return st(t,n);case ge:return ot(t,n,r);case pe:case Ce:return new o(t);case ve:return it(t);case we:return at(t,n,r);case ke:
return ct(t)}}function kt(t){return Gr(t)||zr(t)||!!(pr&&t&&t[pr])}function At(t,e){return e=null==e?ie:e,!!e&&("number"==typeof t||We.test(t))&&t>-1&&t%1==0&&t<e}function _t(t,e,r){if(!Rt(r))return!1;var n=typeof e;return!!("number"==n?Ot(r)&&At(e,r.length):"string"==n&&e in r)&&Nt(r[e],t)}function Tt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function St(t){return!!or&&or in t}function Lt(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||tr;return t===r}function Et(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function jt(t){return ir.call(t)}function Ft(t,e,r){return e=wr(e===Yt?t.length-1:e,0),function(){for(var o=arguments,i=-1,a=wr(o.length-e,0),c=Array(a);++i<a;)c[i]=o[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=o[i];return s[e]=r(c),n(t,this,s)}}function Pt(t){var e=0,r=0;return function(){var n=Cr(),o=oe-(n-r);if(r=n,o>0){if(++e>=ne)return arguments[0]}else e=0;return t.apply(Yt,arguments)}}function Bt(t){if(null!=t){try{return rr.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Dt(t){var e=null==t?0:t.length;return e?U(t,1):[]}function It(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Jt);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(It.Cache||S),r}function Mt(t){return X(t,te|re)}function Nt(t,e){return t===e||t!==t&&e!==e}function Ot(t){return null!=t&&Wt(t.length)&&!Ht(t)}function Ht(t){if(!Rt(t))return!1;var e=K(t);return e==de||e==he||e==se||e==ye}function Wt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ie}function Rt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function zt(t){return null!=t&&"object"==typeof t}function Gt(t){return Ot(t)?H(t):J(t)}function qt(t){return Ot(t)?H(t,!0):Q(t)}function Xt(t){return function(){return t}}function Ut(t){return t}function Vt(){return[]}function Kt(){return!1}var Yt,Zt="4.17.4",$t=200,Jt="Expected a function",Qt="__lodash_hash_undefined__",te=1,ee=2,re=4,ne=800,oe=16,ie=9007199254740991,ae="[object Arguments]",ce="[object Array]",se="[object AsyncFunction]",ue="[object Boolean]",le="[object Date]",fe="[object Error]",de="[object Function]",he="[object GeneratorFunction]",ge="[object Map]",pe="[object Number]",me="[object Null]",be="[object Object]",xe="[object Promise]",ye="[object Proxy]",ve="[object RegExp]",we="[object Set]",Ce="[object String]",ke="[object Symbol]",Ae="[object Undefined]",_e="[object WeakMap]",Te="[object ArrayBuffer]",Se="[object DataView]",Le="[object Float32Array]",Ee="[object Float64Array]",je="[object Int8Array]",Fe="[object Int16Array]",Pe="[object Int32Array]",Be="[object Uint8Array]",De="[object Uint8ClampedArray]",Ie="[object Uint16Array]",Me="[object Uint32Array]",Ne=/[\\^$.*+?()[\]{}|]/g,Oe=/\w*$/,He=/^\[object .+?Constructor\]$/,We=/^(?:0|[1-9]\d*)$/,Re={};Re[Le]=Re[Ee]=Re[je]=Re[Fe]=Re[Pe]=Re[Be]=Re[De]=Re[Ie]=Re[Me]=!0,Re[ae]=Re[ce]=Re[Te]=Re[ue]=Re[Se]=Re[le]=Re[fe]=Re[de]=Re[ge]=Re[pe]=Re[be]=Re[ve]=Re[we]=Re[Ce]=Re[_e]=!1;var ze={};ze[ae]=ze[ce]=ze[Te]=ze[Se]=ze[ue]=ze[le]=ze[Le]=ze[Ee]=ze[je]=ze[Fe]=ze[Pe]=ze[ge]=ze[pe]=ze[be]=ze[ve]=ze[we]=ze[Ce]=ze[ke]=ze[Be]=ze[De]=ze[Ie]=ze[Me]=!0,ze[fe]=ze[de]=ze[_e]=!1;var Ge="object"==typeof global&&global&&global.Object===Object&&global,qe="object"==typeof self&&self&&self.Object===Object&&self,Xe=Ge||qe||Function("return this")(),Ue="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ve=Ue&&"object"==typeof module&&module&&!module.nodeType&&module,Ke=Ve&&Ve.exports===Ue,Ye=Ke&&Ge.process,Ze=function(){try{return Ye&&Ye.binding&&Ye.binding("util")}catch(t){}}(),$e=Ze&&Ze.isTypedArray,Je=Array.prototype,Qe=Function.prototype,tr=Object.prototype,er=Xe["__core-js_shared__"],rr=Qe.toString,nr=tr.hasOwnProperty,or=function(){var t=/[^.]+$/.exec(er&&er.keys&&er.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ir=tr.toString,ar=RegExp("^"+rr.call(nr).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cr=Ke?Xe.Buffer:Yt,sr=Xe.Symbol,ur=Xe.Uint8Array,lr=cr?cr.allocUnsafe:Yt,fr=d(Object.getPrototypeOf,Object),dr=Object.create,hr=tr.propertyIsEnumerable,gr=Je.splice,pr=sr?sr.isConcatSpreadable:Yt,mr=sr?sr.toStringTag:Yt,br=function(){try{var t=xt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),xr=Object.getOwnPropertySymbols,yr=cr?cr.isBuffer:Yt,vr=d(Object.keys,Object),wr=Math.max,Cr=Date.now,kr=xt(Xe,"DataView"),Ar=xt(Xe,"Map"),_r=xt(Xe,"Promise"),Tr=xt(Xe,"Set"),Sr=xt(Xe,"WeakMap"),Lr=xt(Object,"create"),Er=Bt(kr),jr=Bt(Ar),Fr=Bt(_r),Pr=Bt(Tr),Br=Bt(Sr),Dr=sr?sr.prototype:Yt,Ir=Dr?Dr.valueOf:Yt,Mr=function(){function t(){}return function(e){if(!Rt(e))return{};if(dr)return dr(e);t.prototype=e;var r=new t;return t.prototype=Yt,r}}();p.prototype.clear=m,p.prototype.delete=b,p.prototype.get=x,p.prototype.has=y,p.prototype.set=v,w.prototype.clear=C,w.prototype.delete=k,w.prototype.get=A,w.prototype.has=_,w.prototype.set=T,S.prototype.clear=L,S.prototype.delete=E,S.prototype.get=j,S.prototype.has=F,S.prototype.set=P,B.prototype.clear=D,B.prototype.delete=I,B.prototype.get=M,B.prototype.has=N,B.prototype.set=O;var Nr=br?function(t,e){return br(t,"toString",{configurable:!0,enumerable:!1,value:Xt(e),writable:!0})}:Ut,Or=xr?function(t){return null==t?[]:(t=Object(t),i(xr(t),function(e){return hr.call(t,e)}))}:Vt,Hr=xr?function(t){for(var e=[];t;)a(e,Or(t)),t=fr(t);return e}:Vt,Wr=K;(kr&&Wr(new kr(new ArrayBuffer(1)))!=Se||Ar&&Wr(new Ar)!=ge||_r&&Wr(_r.resolve())!=xe||Tr&&Wr(new Tr)!=we||Sr&&Wr(new Sr)!=_e)&&(Wr=function(t){var e=K(t),r=e==be?t.constructor:Yt,n=r?Bt(r):"";if(n)switch(n){case Er:return Se;case jr:return ge;case Fr:return xe;case Pr:return we;case Br:return _e}return e});var Rr=Pt(Nr);It.Cache=S;var zr=Y(function(){return arguments}())?Y:function(t){return zt(t)&&nr.call(t,"callee")&&!hr.call(t,"callee")},Gr=Array.isArray,qr=yr||Kt,Xr=$e?u($e):$,Ur=ht(function(t,e,r,n){lt(e,qt(e),t,n)}),Vr=tt(function(t){return t.push(Yt,gt),n(Ur,Yt,t)});g.assignInWith=Ur,g.constant=Xt,g.defaults=Vr,g.flatten=Dt,g.keys=Gt,g.keysIn=qt,g.memoize=It,g.extendWith=Ur,g.cloneDeep=Mt,g.eq=Nt,g.identity=Ut,g.isArguments=zr,g.isArray=Gr,g.isArrayLike=Ot,g.isBuffer=qr,g.isFunction=Ht,g.isLength=Wt,g.isObject=Rt,g.isObjectLike=zt,g.isTypedArray=Xr,g.stubArray=Vt,g.stubFalse=Kt,g.VERSION=Zt,"function"==typeof r&&"object"==typeof r.amd&&r.amd?(Xe._=g,r("lib/mscgenjs-core/lib/lodash/lodash.custom",[],function(){return g})):Ve?((Ve.exports=g)._=g,Ue._=g):Xe._=g}.call(this),r("lib/mscgenjs-core/render/graphics/svgelementfactory/round",[],function(){"use strict";return function(t,e){return e?Math.round(t*Math.pow(10,e),e)/Math.pow(10,e):Math.round(t)}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/svgprimitives",["require","./domprimitives","./geometry","../../../lib/lodash/lodash.custom","./round"],function(t){function e(t,e){return d(t,h).toString()+","+d(e,h).toString()+" "}function r(t,r,n){return t+e(r,n)}function n(t,e,r,n){return u.createElement("marker",{orient:r,id:t,class:e,viewBox:Boolean(n)?n:"0 0 10 10",refX:"9",refY:"3",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10"})}function o(t,e){var r=u.createElement("a");return u.setAttributesNS(r,u.XLINKNS,{"xlink:href":t,"xlink:title":t}),r.appendChild(e),r}function i(t,e){var r=u.createElement("tspan"),n=u.createTextNode(t);return r.appendChild(n),e?o(e,r):r}function a(t,e,r){var n=f.defaults(r,{class:null,url:null,id:null,idurl:null}),o=u.createElement("text",{x:d(e.x,h).toString(),y:d(e.y,h).toString(),class:n.class});if(o.appendChild(i(t,n.url)),n.id){var a=i(" ["+n.id+"]",n.idurl);a.setAttribute("style",g),o.appendChild(a)}return o}function c(t,e){var r=f.defaults(e,{class:null,style:null,color:null,bgColor:null});return s(u.createElement("path",{d:t,class:r.class,style:r.style}),r.color,r.bgColor)}function s(t,e,r){var n="";return r&&(n+="fill:"+r+";"),e&&(n+="stroke:"+e+";"),u.setAttribute(t,"style",n)}var u=t("./domprimitives"),l=t("./geometry"),f=t("../../../lib/lodash/lodash.custom"),d=t("./round"),h=2,g="vertical-align:text-top;";return g+="font-size:0.7em;text-anchor:start;",{init:function(t){u.init(t)},createSVG:function(t,e){return u.createElement("svg",{version:"1.1",id:t,class:e,xmlns:u.SVGNS,"xmlns:xlink":u.XLINKNS,width:"0",height:"0"})},updateSVG:function(t,e){u.setAttributes(t,e)},colorBox:s,createDesc:function(){return u.createElement("desc")},createDefs:function(){return u.createElement("defs")},createTSpan:i,createText:a,createDiagonalText:function(t,e,r){return u.setAttributes(a(t,{x:e.width/2,y:e.height/2},{class:r}),{transform:"rotate("+d(l.getDiagonalAngle(e),h).toString()+" "+d(e.width/2,h).toString()+" "+d(e.height/2,h).toString()+")"})},createSingleLine:function(t,e){return u.createElement("line",{x1:d(t.xFrom,h).toString(),y1:d(t.yFrom,h).toString(),x2:d(t.xTo,h).toString(),y2:d(t.yTo,h).toString(),class:e?e.class:null})},createRect:function(t,e){var r=f.defaults(e,{class:null,color:null,bgColor:null,rx:null,ry:null});return s(u.createElement("rect",{width:d(t.width,h),height:d(t.height,h),x:d(t.x,h),y:d(t.y,h),rx:d(r.rx,h),ry:d(r.ry,h),class:r.class}),r.color,r.bgColor)},createUTurn:function(t,n,o,i,a,s){var u=f.defaults(a,{dontHitHome:!1,lineWidth:1}),l=u.dontHitHome?t.x+7.5*a.lineWidth:t.x;return c(r("M",t.x,t.y-s/2)+r("C",t.x+o,t.y-7.5*a.lineWidth/2)+e(t.x+o,n+0)+e(l,n),{class:i})},createGroup:function(t,e){return u.createElement("g",{id:t,class:e})},createUse:function(t,e){var r=u.createElement("use",{x:d(t.x,h).toString(),y:d(t.y,h).toString()});return r.setAttributeNS(u.XLINKNS,"xlink:href","#"+e),r},createPath:c,createMarkerPath:function(t,e,r){var o=n(t,"arrow-marker","auto");return o.appendChild(c(e,{class:"arrow-style",style:"stroke-dasharray:100,1;stroke:"+r||"black"})),o},createMarkerPolygon:function(t,e,r){var o=n(t,"arrow-marker","auto");return o.appendChild(u.createElement("polygon",{points:e,class:"arrow-style",stroke:r||"black",fill:r||"black"})),o},createTitle:function(t){var e=u.createElement("title"),r=u.createTextNode(t);return e.appendChild(r),e},point2String:e,pathPoint2String:r}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/variationhelpers",[],function(){"use strict";function t(t,e,r){var n=0;return e.indexOf("nodi")<0&&e.indexOf("bidi")>-1&&(n=t.xTo>t.xFrom?7.5*r:-7.5*r),n}function e(t,e,r){var n=0;return e.indexOf("nodi")<0&&(n=t.xTo>t.xFrom?-7.5*r:7.5*r),n}function r(t){var e=Math.abs(t.xTo-t.xFrom),r=Math.abs(t.yTo-t.yFrom);return Math.sqrt(e*e+r*r)}function n(t,e){var n=r(t);return n>0?Math.floor(n/e):0}function o(t){var e=t.xTo>t.xFrom?1:-1;return{signX:e,signY:t.yTo>t.yFrom?1:-1,dy:e*(t.yTo-t.yFrom)/(t.xTo-t.xFrom)}}function i(t){return Math.round(2*Math.random()*t)-t}function a(t){return Math.round(100*t)/100}function c(t,e,c){if(e<=0)throw new Error("pInterval must be > 0");e=Math.min(r(t),e);for(var s=[],u=n(t,e),l=o(t),f=l.signX*Math.sqrt(Math.pow(e,2)/(1+Math.pow(l.dy,2))),d=l.signY*(Math.abs(l.dy)===1/0?e:Math.sqrt(Math.pow(l.dy,2)*Math.pow(e,2)/(1+Math.pow(l.dy,2)))),h={},g=1;g<=u;g++)h={controlX:a(t.xFrom+(g-.5)*f+i(c)),controlY:a(t.yFrom+(g-.5)*d+i(c)),x:a(t.xFrom+g*f),y:a(t.yFrom+g*d)},e>r({xFrom:h.x,yFrom:h.y,xTo:t.xTo,yTo:t.yTo})&&(h.x=t.xTo,h.y=t.yTo),s.push(h);return s}return{round:a,determineStartCorrection:t,determineEndCorrection:e,getDirection:o,getLineLength:r,getNumberOfSegments:n,getBetweenPoints:c}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/straight",["require","./svgprimitives","./variationhelpers","../../../lib/lodash/lodash.custom"],function(t){function e(t,e){var r=e.lineWidth||1,n=r,o=e?e.class:null,i=c.getDirection(t),s=c.determineEndCorrection(t,o,r),u=c.determineStartCorrection(t,o,r),l=(t.xTo-t.xFrom+s-u).toString(),f=(t.yTo-t.yFrom).toString(),d=a.pathPoint2String("l",i.signX,i.dy),h=a.pathPoint2String("l",l,f);return a.createPath(a.pathPoint2String("M",t.xFrom,t.yFrom-7.5*r*i.dy)+d+a.pathPoint2String("M",t.xFrom+u,t.yFrom-n)+h+a.pathPoint2String("M",t.xFrom+u,t.yFrom+n)+h+a.pathPoint2String("M",t.xTo-i.signX,t.yTo+7.5*r*i.dy)+d,e)}function r(t,e){var r=e?e.lineWidth||1:1,n=Math.max(9,Math.min(4.5*r,t.height/2)),o=n.toString(10);return a.createPath(a.pathPoint2String("M",t.x,t.y)+a.pathPoint2String("l",t.width-n,0)+a.pathPoint2String("l",0,o)+a.pathPoint2String("l",o,0)+a.pathPoint2String("m",-o,-o)+a.pathPoint2String("l",o,o)+a.pathPoint2String("l",0,t.height-n)+a.pathPoint2String("l",-t.width,0)+a.pathPoint2String("l",0,-t.height)+"z",e)}function n(t,e){var r=6;return e.rx=r,e.ry=r,a.createRect(t,e)}function o(t,e){var r=3;return a.createPath(a.pathPoint2String("M",t.x,t.y+t.height/2)+a.pathPoint2String("l",r,-(t.height/2))+a.pathPoint2String("l",t.width-2*r,0)+a.pathPoint2String("l",r,t.height/2)+a.pathPoint2String("l",-r,t.height/2)+a.pathPoint2String("l",-(t.width-2*r),0)+"z",e)}function i(t,e){var r=e&&e.foldSize?e.foldSize:7,n=s.defaults(e,{class:null,color:null,bgColor:null});return a.createPath(a.pathPoint2String("M",t.x,t.y)+a.pathPoint2String("l",t.width,0)+a.pathPoint2String("l",0,t.height-r)+a.pathPoint2String("l",-r,r)+a.pathPoint2String("l",-(t.width-r),0),n)}var a=t("./svgprimitives"),c=t("./variationhelpers"),s=t("../../../lib/lodash/lodash.custom");return{createSingleLine:a.createSingleLine,createDoubleLine:e,createNote:r,createRect:a.createRect,createABox:o,createRBox:n,createEdgeRemark:i,createDesc:a.createDesc,createDefs:a.createDefs,createDiagonalText:a.createDiagonalText,createTSpan:a.createTSpan,createText:a.createText,createUTurn:a.createUTurn,createGroup:a.createGroup,createUse:a.createUse,createMarkerPath:a.createMarkerPath,createMarkerPolygon:a.createMarkerPolygon,createTitle:a.createTitle,createSVG:a.createSVG,updateSVG:a.updateSVG,init:a.init}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/wobbly",["require","./svgprimitives","./variationhelpers"],function(t){function e(t){return t.map(function(t){return d.pathPoint2String("S",t.controlX,t.controlY)+" "+d.point2String(t.x,t.y)}).join(" ")}function r(t,r){var n=h.getDirection(t);return d.createPath(d.pathPoint2String("M",t.xFrom,t.yFrom)+d.pathPoint2String("L",h.round(t.xFrom+n.signX*Math.sqrt(1/(1+Math.pow(n.dy,2)))),t.yFrom+n.signY*(Math.abs(n.dy)===1/0?1:h.round(Math.sqrt(Math.pow(n.dy,2)/(1+Math.pow(n.dy,2))))))+e(h.getBetweenPoints(t,g,p)),{class:r?r.class:null})}function n(t,r){return d.pathPoint2String("M",t.x,t.y)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y,xTo:t.x+t.width-r,yTo:t.y},g,p))+d.pathPoint2String("L",t.x+t.width-r,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+r},g,p))+d.pathPoint2String("L",t.x+t.width,t.y+r)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+r,xTo:t.x+t.width,yTo:t.y+t.height},g,p))+d.pathPoint2String("L",t.x+t.width,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height},g,p))+d.pathPoint2String("L",t.x,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height,xTo:t.x,yTo:t.y},g,p))+d.pathPoint2String("L",t.x,t.y)+"z"}function o(t,r){return d.pathPoint2String("M",t.x+t.width-r,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y,xTo:t.x+t.width-r,yTo:t.y+r},g,p))+d.pathPoint2String("L",t.x+t.width-r,t.y+r)+e(h.getBetweenPoints({xFrom:t.x+t.width-r,yFrom:t.y+r,xTo:t.x+t.width,yTo:t.y+r},g,p))+d.pathPoint2String("L",t.x+t.width,t.y+r)}function i(t,e){var r=e?e.lineWidth||1:1,i=Math.max(9,Math.min(4.5*r,t.height/2)),a=d.createGroup();return a.appendChild(d.createPath(n(t,i),e)),e.bgColor="transparent",a.appendChild(d.createPath(o(t,i),e)),a}function a(t){return Boolean(t.y)||(t.y=0),d.pathPoint2String("M",t.x,t.y)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y,xTo:t.x+t.width,yTo:t.y},g,p))+d.pathPoint2String("L",t.x+t.width,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height},g,p))+d.pathPoint2String("L",t.x+t.width,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height},g,p))+d.pathPoint2String("L",t.x,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height,xTo:t.x,yTo:t.y},g,p))+"z"}function c(t,e){return d.createPath(a(t,e),e)}function s(t,r){var n=3;return d.createPath(d.pathPoint2String("M",t.x,t.y+t.height/2)+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height/2,xTo:t.x+n,yTo:t.y},g,p))+d.pathPoint2String("L",t.x+n,t.y)+e(h.getBetweenPoints({xFrom:t.x+n,yFrom:t.y,xTo:t.x+t.width-n,yTo:t.y},g,p))+d.pathPoint2String("L",t.x+t.width-n,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width-n,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height/2},g,p))+d.pathPoint2String("L",t.x+t.width,t.y+t.height/2)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height/2,xTo:t.x+t.width-n,yTo:t.y+t.height},g,p))+d.pathPoint2String("L",t.x+t.width-n,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width-n,yFrom:t.y+t.height,xTo:t.x+n,yTo:t.y+t.height},g,p))+d.pathPoint2String("L",t.x+n,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+n,yFrom:t.y+t.height,xTo:t.x,yTo:t.y+t.height/2},g,p))+"z",r)}function u(t,r){var n=6;return d.createPath(d.pathPoint2String("M",t.x,t.y+n)+e([{controlX:t.x,controlY:t.y,x:t.x+n,y:t.y}])+e(h.getBetweenPoints({xFrom:t.x+n,yFrom:t.y,xTo:t.x+t.width-n,yTo:t.y},g,p))+d.pathPoint2String("L",t.x+t.width-n,t.y)+e([{controlX:t.x+t.width,controlY:t.y,x:t.x+t.width,y:t.y+n}])+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+n,xTo:t.x+t.width,yTo:t.y+t.height-n},g,p))+d.pathPoint2String("L",t.x+t.width,t.y+t.height-n)+e([{controlX:t.x+t.width,controlY:t.y+t.height,x:t.x+t.width-n,y:t.y+t.height}])+e(h.getBetweenPoints({xFrom:t.x+t.width-n,yFrom:t.y+t.height,xTo:t.x+n,yTo:t.y+t.height},g,p))+d.pathPoint2String("L",t.x+n,t.y+t.height)+e([{controlX:t.x,controlY:t.y+t.height,x:t.x,y:t.y+t.height-n}])+e(h.getBetweenPoints({xFrom:t.x,yFrom:t.y+t.height-n,xTo:t.x,yTo:t.y+n},g,p))+"z",r)}function l(t,r){var n=r?r.lineWidth||1:1,o=d.createGroup(),i=r&&r.foldSize?r.foldSize:7,a=r&&r.color?r.color:"black";r.color="transparent!important";var c=d.createPath(d.pathPoint2String("M",t.x,t.y+n/2)+d.pathPoint2String("L",t.x+t.width,t.y+n/2)+d.pathPoint2String("L",t.x+t.width,t.y+t.height-i)+d.pathPoint2String("L",t.x+t.width-i,t.y+t.height)+d.pathPoint2String("L",t.x,t.y+t.height)+"z",r);r.bgColor="transparent",r.color=a;var s=d.createPath(d.pathPoint2String("M",t.x+t.width,t.y)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y,xTo:t.x+t.width,yTo:t.y+t.height-i},g,p))+d.pathPoint2String("L",t.x+t.width,t.y+t.height-i)+e(h.getBetweenPoints({xFrom:t.x+t.width,yFrom:t.y+t.height-i,xTo:t.x+t.width-i,yTo:t.y+t.height},g,p))+d.pathPoint2String("L",t.x+t.width-i,t.y+t.height)+e(h.getBetweenPoints({xFrom:t.x+t.width-i,yFrom:t.y+t.height,xTo:t.x-1,yTo:t.y+t.height},g,p))+d.pathPoint2String("L",t.x-1,t.y+t.height),r);return o.appendChild(c),o.appendChild(s),o}function f(t,r){var n=r.lineWidth||1,o=n,i=r?r.class:null,a=h.getDirection(t),c=h.determineEndCorrection(t,i,n),s=h.determineStartCorrection(t,i,n);return d.createPath(d.pathPoint2String("M",t.xFrom,t.yFrom-7.5*n*a.dy)+d.pathPoint2String("l",a.signX,a.dy)+d.pathPoint2String("M",t.xFrom+s,t.yFrom-o)+e(h.getBetweenPoints({xFrom:t.xFrom+s,yFrom:t.yFrom-o,xTo:t.xTo+c,yTo:t.yTo-o},g,p))+d.pathPoint2String("M",t.xFrom+s,t.yFrom+o)+e(h.getBetweenPoints({xFrom:t.xFrom+s,yFrom:t.yFrom+o,xTo:t.xTo+c,yTo:t.yTo+o},g,p))+d.pathPoint2String("M",t.xTo-a.signX,t.yTo+7.5*n*a.dy)+d.pathPoint2String("l",a.signX,a.dy),i)}var d=t("./svgprimitives"),h=t("./variationhelpers"),g=70,p=3;return{createSingleLine:r,createDoubleLine:f,createNote:i,createRect:c,createABox:s,createRBox:u,createEdgeRemark:l,createDesc:d.createDesc,createDefs:d.createDefs,createDiagonalText:d.createDiagonalText,createTSpan:d.createTSpan,createText:d.createText,createUTurn:d.createUTurn,createGroup:d.createGroup,createUse:d.createUse,createMarkerPath:d.createMarkerPath,createMarkerPolygon:d.createMarkerPolygon,createTitle:d.createTitle,createSVG:d.createSVG,updateSVG:d.updateSVG,init:d.init}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory/index",["require","./straight","./wobbly","../../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){return Boolean(t)?"wobbly"===t?n:r:i}var r=t("./straight"),n=t("./wobbly"),o=t("../../../lib/lodash/lodash.custom"),i=r,a={};return{init:function(t,e){i.init(t),a=o.defaults(e,{LINE_WIDTH:2,FONT_SIZE:12})},createSVG:function(t,r,n){return i=e(n),i.createSVG(t,r)},updateSVG:i.updateSVG,createTitle:i.createTitle,createDesc:i.createDesc,createDefs:i.createDefs,createTSpan:i.createTSpan,createRect:function(t,e,r,n){return i.createRect(t,{class:e,color:r,bgColor:n})},createRBox:function(t,e,r,n){return i.createRBox(t,{class:e,color:r,bgColor:n})},createABox:function(t,e,r,n){return i.createABox(t,{class:e,color:r,bgColor:n})},createNote:function(t,e,r,n){return i.createNote(t,{class:e,color:r,bgColor:n,lineWidth:a.LINE_WIDTH})},createEdgeRemark:function(t,e,r,n,o){return i.createEdgeRemark(t,{class:e,color:r,bgColor:n,foldSize:o,lineWidth:a.LINE_WIDTH})},createText:i.createText,createDiagonalText:i.createDiagonalText,createLine:function(t,e){return Boolean(e)&&Boolean(e.doubleLine)?(e.lineWidth||(e.lineWidth=a.LINE_WIDTH),i.createDoubleLine(t,e)):i.createSingleLine(t,e)},createUTurn:function(t,e,r,n,o,c){return i.createUTurn(t,e,r,n,{dontHitHome:o,lineWidth:a.LINE_WIDTH},c)},createGroup:i.createGroup,createUse:i.createUse,createMarkerPath:i.createMarkerPath,createMarkerPolygon:i.createMarkerPolygon}}),r("lib/mscgenjs-core/render/graphics/idmanager",[],function(){"use strict";var t="mscgen_js-svg-",e=t;return{setPrefix:function(r){e=t+r},get:function(t){return e+(t||"")}}}),r("lib/mscgenjs-core/render/graphics/svgutensils",["require","./idmanager","./svgelementfactory/index","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t){var e=s.createSVG(t,c.get());return l.body.appendChild(e),e}function r(t){var r=l.getElementById(f);r=r?r:e(f),r.appendChild(t);var n=t.getBBox();return r.removeChild(t),n}function n(t){var e=1e5;return Math.abs(t.height)>e||Math.abs(t.width)>e?{height:0,width:0,x:0,y:0}:t}function o(t){return"function"==typeof t.getBBox?n(r(t)):{height:15,width:15,x:2,y:2}}function i(){return o(s.createText("jy9@",{x:0,y:0})).height}function a(t){c.setPrefix(t);var e=l.getElementById(c.get());if(Boolean(e)){var r=l.getElementById(t);r?r.removeChild(e):l.body.removeChild(e)}}var c=t("./idmanager"),s=t("./svgelementfactory/index"),u=t("../../lib/lodash/lodash.custom"),l={},f=c.get("bboxer");return{init:function(t){l=t},removeRenderedSVGFromElement:a,getBBox:o,calculateTextHeight:u.memoize(i),webkitNamespaceBugWorkaround:function(t){return t.replace(/ xlink=/g," xmlns:xlink=","g").replace(/ href=/g," xlink:href=","g")}}}),r("lib/mscgenjs-core/render/graphics/renderutensils",["require","../../lib/lodash/lodash.custom"],function(t){"use strict";var e=t("../../lib/lodash/lodash.custom");return{scaleCanvasToWidth:function(t,r){var n=e.cloneDeep(r);return n.scale=t/n.width,n.width*=n.scale,n.height*=n.scale,n.horizontaltransform*=n.scale,n.verticaltransform*=n.scale,n.x=0-n.horizontaltransform,n.y=0-n.verticaltransform,n},determineDepthCorrection:function(t,e){return t?2*(2*(t+1)*e):0},determineArcXTo:function(t,e,r){return"-x"===t?e+.75*(r-e):r}}}),r("lib/mscgenjs-core/render/graphics/constants",[],function(){"use strict";return{LINE_WIDTH:2,FONT_SIZE:12}}),r("lib/mscgenjs-core/render/graphics/csstemplates",[],function(){"use strict";return{baseTemplate:"svg.<%=id%>{font-family:Helvetica,sans-serif;font-size:<%=fontSize%>px;font-weight:normal;font-style:normal;text-decoration:none;background-color:white;stroke:black;stroke-width:<%=lineWidth%>}.<%=id%> path, .<%=id%> rect{fill:none}.<%=id%> .label-text-background{fill:white;stroke:white;stroke-width:0}.<%=id%> .bglayer{fill:white;stroke:white;stroke-width:0}.<%=id%> line{}.<%=id%> .return, .<%=id%> .comment{stroke-dasharray:5,3}.<%=id%> .inline_expression_divider{stroke-dasharray:10,5}.<%=id%> text{color:inherit;stroke:none;text-anchor:middle}.<%=id%> text.entity-text{text-decoration:underline}.<%=id%> text.anchor-start{text-anchor:start}.<%=id%> .arrow-marker{overflow:visible}.<%=id%> .arrow-style{stroke-width:1}.<%=id%> .arcrow, .<%=id%> .arcrowomit, .<%=id%> .emphasised{stroke-linecap:butt}.<%=id%> .arcrowomit{stroke-dasharray:2,2}.<%=id%> .box, .<%=id%> .entity{fill:white;stroke-linejoin:round}.<%=id%> .inherit{stroke:inherit;color:inherit}.<%=id%> .inherit-fill{fill:inherit}.<%=id%> .watermark{font-size:48pt;font-weight:bold;opacity:0.14}",namedStyles:[{name:"basic",description:"Basic",experimental:!1,renderMagic:"straight",cssBefore:"",cssAfter:""},{name:"lazy",description:"Lazy",experimental:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{font-weight:bold;text-decoration:none;}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC}.<%=id%> rect.label-text-background{opacity:0.9}.<%=id%> line.comment,.<%=id%> rect.inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke:grey}"},{name:"classic",description:"Classic",experimental:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> text.entity-text{text-decoration:none}.<%=id%> .entity{stroke:none;}.<%=id%> line,.<%=id%> rect,.<%=id%> path{stroke-width:1px}.<%=id%> .arrow-style{stroke-width:2;}.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{stroke-width: 1px}"},{name:"fountainpen",description:"Fountain pen",experimental:!0,renderMagic:"wobbly",cssBefore:"@import 'https://fonts.googleapis.com/css?family=Gochi+Hand';",cssAfter:"svg.<%=id%>{font-family:'Gochi Hand', cursive;font-size:14px;stroke-opacity:0.4;stroke-linecap:round;background-color:transparent}.<%=id%> text{fill:rgba(0,0,128,0.7)}.<%=id%> marker polygon{fill:rgba(0,0,255,0.4);stroke-linejoin:round}.<%=id%> line, .<%=id%> path, .<%=id%> rect, .<%=id%> polygon{stroke:blue !important}.<%=id%> text.entity-text{font-weight:bold;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#FFFFCC;}.<%=id%> .label-text-background{opacity:0}"},{name:"cygne",description:"Cygne (best with msgenny)",experimental:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> line, .<%=id%> path{stroke:#00A1DE}.<%=id%> text{fill:#005B82}.<%=id%> .entity,.<%=id%> .box{fill:#00A1DE;stroke:#00A1DE}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:#E77B2F;stroke:white}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{fill:white}"},{name:"pegasse",description:"Pgase (best with msgenny)",experimental:!1,renderMagic:"straight",cssBefore:"",cssAfter:".<%=id%> line, .<%=id%> path{stroke:rgba(0, 43, 84, 1)}.<%=id%> text{fill:rgba(0, 43, 84, 1)}.<%=id%> .entity,.<%=id%> .box{fill:rgba(0, 43, 84, 1);stroke:rgba(0, 43, 84, 1)}.<%=id%> text.box-text{fill:white}.<%=id%> text.entity-text{font-weight:bold;fill:white;text-decoration:none}.<%=id%> text.return-text{font-style:italic}.<%=id%> path.note{fill:rgba(255, 50, 0, 1);stroke:white}.<%=id%> .comment,.<%=id%> .inline_expression,.<%=id%> .inline_expression_divider,.<%=id%> .inline_expression_label{fill:white}"},{name:"grayscaled",description:"Grayscaled (not in IE or Safari)",experimental:!0,renderMagic:"straight",cssBefore:"",cssAfter:"svg.<%=id%>{filter:grayscale(1);-webkit-filter:grayscale(1);}"},{name:"inverted",description:"Inverted (not in IE or Safari)",experimental:!0,renderMagic:"straight",cssBefore:"",cssAfter:"svg.<%=id%>{filter:invert(1);-webkit-filter:invert(1);}"}]}}),r("lib/mscgenjs-core/render/graphics/renderskeleton",["require","./svgelementfactory/index","./constants","./csstemplates"],function(t){"use strict";function e(t,e){return e.forEach(function(e){"method"===e.type?t.appendChild(g.createMarkerPolygon(e.name,e.path,e.color)):t.appendChild(g.createMarkerPath(e.name,e.path,e.color))}),t}function r(t,e){var r=b.createElement("style");return r.setAttribute("type","text/css"),r.appendChild(b.createTextNode(h(t,e))),r}function n(t,n,o){var i=g.createDefs();return i.appendChild(r(o,t)),i=e(i,n)}function o(t){var e=g.createGroup(t+"__body");return e.appendChild(g.createGroup(t+"__background")),e.appendChild(g.createGroup(t+"__arcspanlayer")),e.appendChild(g.createGroup(t+"__lifelinelayer")),e.appendChild(g.createGroup(t+"__sequencelayer")),e.appendChild(g.createGroup(t+"__notelayer")),e.appendChild(g.createGroup(t+"__watermark")),e}function i(t){return g.init(t.document,{LINE_WIDTH:p.LINE_WIDTH,FONT_SIZE:p.FONT_SIZE}),t.document}function a(t,e,r,a,s){b=i(t);var l=b.getElementById(e);null===l&&(l=b.body);var f=g.createSVG(r,r,u(s));return Boolean(s.source)&&f.appendChild(c(t,s.source)),f.appendChild(n(r,a,s)),f.appendChild(o(r)),l.appendChild(f),b}function c(t,e){var r=g.createDesc();return r.appendChild(t.document.createTextNode("\n\n# Generated by mscgen_js - https://sverweij.github.io/mscgen_js\n"+e)),r}function s(t){var e=null,r=m.namedStyles.filter(function(e){return e.name===t});return r.length>0&&(e=r[0]),e}function u(t){var e="",r={};return Boolean(t)?(Boolean(t.additionalTemplate)&&(r=s(t.additionalTemplate),Boolean(r)&&(e=r.renderMagic)),e):""}function l(t,e){var r="",n={};return Boolean(t)?(Boolean(t.additionalTemplate)&&(n=s(t.additionalTemplate),Boolean(n)&&(r=n[e])),r):""}function f(t){var e=l(t,"cssAfter");return Boolean(t.styleAdditions)&&(e+=t.styleAdditions),e}function d(t){return l(t,"cssBefore")}function h(t,e){return(d(t)+m.baseTemplate+f(t)).replace(/<%=fontSize%>/g,p.FONT_SIZE).replace(/<%=lineWidth%>/g,p.LINE_WIDTH).replace(/<%=id%>/g,e)}var g=t("./svgelementfactory/index"),p=t("./constants"),m=t("./csstemplates"),b={};return{bootstrap:a,init:i}}),r("lib/mscgenjs-core/render/astmassage/asttransform",[],function(){"use strict";function t(t,e){t&&e&&t.forEach(function(t){e.forEach(function(e){e(t)})})}function e(t,e,r,n){n&&n.forEach(function(n){n(r,t,e)})}function r(t,r,o){r.forEach(function(i){e(t,r,i,o),i.arcs&&n(t,i.arcs,o)})}function n(t,e,n){t&&e&&n&&e.forEach(function(e){r(t,e,n)})}return{transform:function(e,r,o){return t(e.entities,r),n(e.entities,e.arcs,o),e}}}),r("lib/mscgenjs-core/render/astmassage/aggregatekind",[],function(){"use strict";var t={"|||":"emptyarc","...":"emptyarc","---":"emptyarc","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression",else:"inline_expression",opt:"inline_expression",break:"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"};return{getAggregate:function(e){return t[e]}}}),r("lib/mscgenjs-core/render/astmassage/normalizekind",[],function(){"use strict";var t={"<-":"->","<=":"=>","<<=":"=>>","<<":">>","<:":":>","x-":"-x"};return{getNormalizedKind:function(e){return t[e]||e}}}),r("lib/mscgenjs-core/render/textutensils/escape",[],function(){"use strict";return{unescapeString:function(t){return t.replace(/\\"/g,'"')},escapeString:function(t){return t.replace(/\\"/g,'"').replace(/"/g,'\\"')}}}),r("lib/mscgenjs-core/render/astmassage/flatten",["require","./asttransform","./aggregatekind","./normalizekind","../../lib/lodash/lodash.custom","../textutensils/escape"],function(t){
"use strict";function e(t){"undefined"==typeof t.label&&(t.label=t.name)}function r(t){Boolean(t.label)&&(t.label=m.unescapeString(t.label)),Boolean(t.id)&&(t.id=m.unescapeString(t.id))}function n(t){t.label=Boolean(t.label)?t.label:""}function o(t){if(t.kind&&g.getNormalizedKind(t.kind)!==t.kind){t.kind=g.getNormalizedKind(t.kind);var e=t.from;t.from=t.to,t.to=e}return t}function i(t,e){!t.linecolor&&e.arclinecolor&&(t.linecolor=e.arclinecolor),!t.textcolor&&e.arctextcolor&&(t.textcolor=e.arctextcolor),!t.textbgcolor&&e.arctextbgcolor&&(t.textbgcolor=e.arctextbgcolor)}function a(t,e){if(t&&t.from){var r=e.filter(function(e){return e.name===t.from});r.length>0&&i(t,r[0])}}function c(t){return t.arcs.reduce(function(t,e){return t+(Boolean(e[0].arcs)?c(e[0])+1:0)},t.arcs.length)}function s(t,e,r,n){var o=[],a=[],u=[];return t.forEach(function(t){if("inline_expression"===h.getAggregate(t.kind)){if(t.depth=e,Boolean(t.arcs)){var o=p.cloneDeep(t);o.numberofrows=c(o),delete o.arcs,a.push(o),t.arcs.forEach(function(t){u=u.concat(s(t,e+1,o.from,o.to)),t.forEach(function(t){i(t,o)})}),e>b&&(b=e)}else a.push(t);u.push([{kind:"|||",from:t.from,to:t.to}])}else r&&n&&"emptyarc"===h.getAggregate(t.kind)&&(t.from=r,t.to=n,t.depth=e),a.push(t)}),o.push(a),o.concat(u)}function u(t){var e={};return b=0,Boolean(t.options)&&(e.options=p.cloneDeep(t.options)),Boolean(t.entities)&&(e.entities=p.cloneDeep(t.entities)),e.arcs=[],t&&t.arcs&&t.arcs.forEach(function(t){s(t,0).forEach(function(t){e.arcs.push(t)})}),e.depth=b+1,e}function l(t,e){return t.filter(function(t){return e.from!==t.name}).map(function(t){return e.to=t.name,p.cloneDeep(e)})}function f(t){if(t.entities&&t.arcs){var e=[],r={};t.arcs.forEach(function(n,o){n.filter(function(t){return"*"===t.to}).forEach(function(i,a){r=p.cloneDeep(i),delete t.arcs[o][a],e=l(t.entities,r),n[a]=e.shift(),t.arcs[o]=n.concat(e)})})}return t}var d=t("./asttransform"),h=t("./aggregatekind"),g=t("./normalizekind"),p=t("../../lib/lodash/lodash.custom"),m=t("../textutensils/escape"),b=0;return{swapRTLArc:o,unwind:u,explodeBroadcasts:f,flatten:function(t){return d.transform(u(t),[e,r],[o,a,r,n])},dotFlatten:function(t){return f(d.transform(t,[e],[o,a]))}}}),r("lib/mscgenjs-core/render/graphics/kind2class",[],function(){"use strict";var t={"|||":"empty-row","...":"omitted-row","---":"comment-row","->":"signal","=>":"method","=>>":"callback",">>":"return",":>":"emphasised","-x":"lost","<-":"signal","<=":"method","<<=":"callback","<<":"return","<:":"emphasised","x-":"lost","<->":"signal","<=>":"method","<<=>>":"callback","<<>>":"return","<:>":"emphasised","--":"signal","==":"method","..":"return","::":"emphasised"},e={"|||":"empty","...":"empty","---":"empty","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression",else:"inline_expression",opt:"inline_expression",break:"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"};return{getClass:function(e){return t[e]||e},getAggregateClass:function(t){return e[t]||t}}}),r("lib/mscgenjs-core/render/graphics/rowmemory",[],function(){"use strict";function t(t){return e[t]?e[t]:{y:r+1.5*n+t*n,height:n}}var e=[],r=0,n=0;return{clear:function(t,o){e=[],r=t,n=o},get:t,getLast:function(){return t(e.length-1)},set:function(r,n){var o=t(r-1);e[r]={y:o.y+(o.height+n)/2,height:n}}}}),r("lib/mscgenjs-core/render/graphics/markermanager",["require","../../lib/lodash/lodash.custom","../astmassage/normalizekind"],function(t){"use strict";function e(t,e,r){return e&&r&&["<->","->"].indexOf(t)>-1?e<r?"signal":"signal-u":""}function r(t,e,r){return"<->"===t&&e<=r?"signal-l":"signal-lu"}function n(t,n,o,i,a){var c=[];return l[n]&&l[n].attributes&&(c=l[n].attributes.map(function(c){return{name:c.name,value:c.value.replace(/\{\{signal-marker-end\}\}/g,e(n,i,a)).replace(/\{\{signal-marker-start\}\}/g,r(n,i,a)).replace(/\{\{id\}\}/g,t).replace(/\{\{color\}\}/g,o||"black")}})),c}function o(t,e){return l[u.getNormalizedKind(t)].marker.name+(Boolean(e)?" "+e:" black")}function i(t,e){function r(e){i(t,e)}return Array.isArray(e)&&e.forEach(r),e.arcs&&e.arcs.forEach(r),e.kind&&l[u.getNormalizedKind(e.kind)]&&l[u.getNormalizedKind(e.kind)].marker&&t.indexOf(o(e.kind,e.linecolor))<0&&t.push(o(e.kind,e.linecolor)),t}function a(t){return{kind:t.split(" ")[0],color:t.split(" ")[1]}}function c(t){return t.arcs.reduce(i,[]).sort().map(a)}var s=t("../../lib/lodash/lodash.custom"),u=t("../astmassage/normalizekind"),l={"->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"}],marker:{name:"signal"}},"<->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"},{name:"marker-start",value:"url(#{{id}}{{signal-marker-start}}-{{color}})"}],marker:{name:"signal"}},"=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},">>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},"..":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"--":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"==":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"::":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},":>":{attributes:[{name:"style",value:"stroke:{{color}};"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<:>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},"-x":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}lost-{{color}})"}],marker:{name:"lost",end:""}}},f={signal:{variants:[{name:"",path:"M9,3 l-8, 2"},{name:"-u",path:"M9,3 l-8,-2"},{name:"-l",path:"M9,3 l 8, 2"},{name:"-lu",path:"M9,3 l 8,-2"}]},method:{variants:[{name:"",path:"1,1  9,3  1,5"},{name:"-l",path:"17,1 9,3 17,5"}]},callback:{variants:[{name:"",path:"M 1,1 l 8,2 l-8,2"},{name:"-l",path:"M17,1 l-8,2 l 8,2"}]},lost:{variants:[{name:"",path:"M7,0 l5,6 M7,6 l5,-6"}]}};return{getAttributes:n,getMarkerDefs:function(t,e){return s.flatten(c(e).map(function(e){return f[e.kind].variants.map(function(r){return{name:t+e.kind+r.name+"-"+e.color,path:r.path,color:e.color,type:e.kind}})}))}}}),r("lib/mscgenjs-core/render/textutensils/wrap",[],function(){"use strict";return{wrap:function(t,e){for(var r=0,n=[],o=0,i=0,a=0,c=0,s=t.replace(/[\t\n]+/g," ").replace(/\\n/g,"\n");c<=s.length;)c>=s.length?n.push(s.substring(o,c)):"\n"===s[c]?(r=0,a=c,n.push(s.substring(o,a)),o=a+1):r++>=e&&(a=s.substring(0,c).lastIndexOf(" "),a===-1||a<o?(r=1,a=c,i=c):(r=0,i=a+1),n.push(s.substring(o,a)),o=i),c++;return n}}}),r("lib/mscgenjs-core/render/graphics/renderlabels",["require","./svgelementfactory/index","./svgutensils","./constants","../textutensils/wrap","./kind2class","../astmassage/aggregatekind"],function(t){"use strict";function e(t,e){e&&t.setAttribute("style","fill:"+e+";")}function r(t,r,n){e(t,r&&!n?"blue":n)}function n(t,e){var r=l.createRect(f.getBBox(t),"label-text-background");return e&&r.setAttribute("style","fill:"+e+"; stroke:"+e+";"),r}function o(t,e,r,n,o,i){var a={};return a=0===t?l.createText(e,{x:r,y:n},{class:o,url:i.url,id:i.id,idurl:i.idurl}):l.createText(e,{x:r,y:n},{class:o,url:i.url})}function i(t,e,r){var n=e||t,o=g.getClass(n),i=g.getAggregateClass(n);return o===i?o+r:i+r+o+r}function a(t,n,a,c,s,u){var l=a+(s+.25)*f.calculateTextHeight(),h=i(c.kind,u&&u.kind,"-text ");u&&(u.alignLeft&&(h+="anchor-start "),u.alignAround&&(l=a+(s+.25)*(f.calculateTextHeight()+d.LINE_WIDTH)));var g=o(s,t,n,l,h,c);return e(g,c.textcolor),r(g,c.url,c.textcolor),g}function c(t,e,r,o){var i=l.createGroup(o);if(t.label){var c=e.x+e.width/2,s=u(t.label,t.kind,e.width,d.FONT_SIZE,!!r&&r.wordWrapArcs),h={};r&&r.alignAbove&&s.forEach(function(){s.push("")});var g=e.y-(s.length-1)/2*(f.calculateTextHeight()+1);r&&r.alignAround&&(1===s.length&&s.push(""),g=e.y-(s.length-1)/2*(f.calculateTextHeight()+d.LINE_WIDTH+1)),s.forEach(function(e,o){""!==e&&(h=a(e,c,g,t,o,r),r&&r.ownBackground&&i.appendChild(n(h,t.textbgcolor)),i.appendChild(h)),g++})}return i}function s(t,e){var r=Math.abs(t),n=12;return r<=160?r/(e/n*8):r<=320?r/(e/n*6.4):r<=480?r/(e/n*5.9):r/(e/n*5.6)}function u(t,e,r,n,o){return"box"===p.getAggregate(e)||"undefined"==typeof e||o?h.wrap(t,s(r,n)):t.split("\\n")}var l=t("./svgelementfactory/index"),f=t("./svgutensils"),d=t("./constants"),h=t("../textutensils/wrap"),g=t("./kind2class"),p=t("../astmassage/aggregatekind");return{createLabel:c,splitLabel:u}}),r("lib/mscgenjs-core/render/graphics/entities",["require","./renderlabels"],function(t){"use strict";function e(t){return c[t]}var r=t("./renderlabels"),n=160,o=100,i=34,a={interEntitySpacing:n,height:i,width:o},c={};return{init:function(t){a.interEntitySpacing=n,a.height=i,a.width=o,t&&(a.interEntitySpacing=t*n,a.width=t*o),c={}},getX:e,setX:function(t,e){c[t.name]=e+a.width/2},getOAndD:function(t,r){return{from:e(e(t)<e(r)?t:r),to:e(e(r)>e(t)?r:t)}},setHeight:function(t){a.height=t},getDims:function(){return a},getNoEntityLines:function(t,e){return r.splitLabel(t,"box",a.width,e).length}}}),r("lib/mscgenjs-core/render/graphics/renderast",["require","./svgelementfactory/index","./svgutensils","./renderutensils","./renderskeleton","../astmassage/flatten","./kind2class","../astmassage/aggregatekind","./rowmemory","./idmanager","./markermanager","./entities","./renderlabels","./constants","../../lib/lodash/lodash.custom"],function(t){"use strict";function e(t,e,r,a){var c=Object.seal(W.flatten(t)),s=a||{};s=Y.defaults(s,{source:null,styleAdditions:null,mirrorEntitiesOnBottom:!1,regularArcTextVerticalAlignment:"middle"}),n(c,e,r,s),o(c),i(c);var u=e.document.getElementById(r);return u?N.webkitNamespaceBugWorkaround(u.innerHTML):N.webkitNamespaceBugWorkaround(e.document.body.innerHTML)}function r(t){var e="middle",r=["above","middle","below"];return r.some(function(e){return e===t})&&(e=t),e}function n(t,e,n,o){q.setPrefix(n),Q.document=H.bootstrap(e,n,q.get(),X.getMarkerDefs(q.get(),t),o),Q.mirrorEntitiesOnBottom=Boolean(o.mirrorEntitiesOnBottom),Q.regularArcTextVerticalAlignment=r(o.regularArcTextVerticalAlignment),N.init(Q.document),Q.layer=a(Q.document),Q.maxDepth=t.depth,s(Q,t.options)}function o(t){b(t.entities),G.clear(U.getDims().height,Q.arcRowHeight),C(t.arcs,t.entities),Q.mirrorEntitiesOnBottom&&m(t.entities)}function i(t){var e=u(t);l(e),e=d(t.options,e),h(e)}function a(t){return{lifeline:t.getElementById(q.get("__lifelinelayer")),sequence:t.getElementById(q.get("__sequencelayer")),notes:t.getElementById(q.get("__notelayer")),inline:t.getElementById(q.get("__arcspanlayer")),watermark:t.getElementById(q.get("__watermark"))}}function c(t,e){t.arcRowHeight=$,t.arcGradient=J,t.wordWrapArcs=!1,e&&(e.arcgradient&&(t.arcRowHeight=parseInt(e.arcgradient,10)+$,t.arcGradient=parseInt(e.arcgradient,10)+J),t.wordWrapArcs=Boolean(e.wordwraparcs))}function s(t,e){U.init(e&&e.hscale),c(t,e)}function u(t){var e=O.determineDepthCorrection(t.depth,K.LINE_WIDTH),r=G.getLast(),n={width:t.entities.length*U.getDims().interEntitySpacing+e,height:Boolean(Q.mirrorEntitiesOnBottom)?2*U.getDims().height+r.y+r.height+2*Z:r.y+r.height/2+2*Z,horizontaltransform:(U.getDims().interEntitySpacing+e-U.getDims().width)/2,autoscale:!!t.options&&!!t.options.width&&"auto"===t.options.width,verticaltransform:Z,scale:1};return n.x=0-n.horizontaltransform,n.y=0-n.verticaltransform,n}function l(t){Q.document.getElementById(q.get("__background")).appendChild(M.createRect(t,"bglayer"))}function f(t,e){Q.layer.watermark.appendChild(M.createDiagonalText(t,e,"watermark"))}function d(t,e){return t&&(t.watermark&&f(t.watermark,e),t.width&&"auto"!==t.width&&(e=O.scaleCanvasToWidth(t.width,e))),e}function h(t){var e=Q.document.getElementById(q.get()),r=Q.document.getElementById(q.get("__body"));r.setAttribute("transform","translate("+t.horizontaltransform+","+t.verticaltransform+") scale("+t.scale+","+t.scale+")"),t.autoscale&&t.autoscale===!0?M.updateSVG(e,{width:"100%",height:"100%",viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()}):M.updateSVG(e,{width:t.width.toString(),height:t.height.toString(),viewBox:"0 0 "+t.width.toString()+" "+t.height.toString()})}function g(t){var e=t[0],r=2;return t.forEach(function(t){var n=U.getNoEntityLines(t.label,K.FONT_SIZE);n>r&&(r=n,e=t)}),r>2?Math.max(U.getDims().height,N.getBBox(p(e)).height):U.getDims().height}function p(t,e){var r=M.createGroup(),n=U.getDims();return n.x=e?e:0,r.appendChild(M.createRect(n,"entity",t.linecolor,t.textbgcolor)),r.appendChild(V.createLabel(t,{x:n.x,y:n.height/2,width:n.width},{kind:"entity"})),r}function m(t){var e=G.getLast().y+(G.getLast().height+Q.arcRowHeight)/2;T(t,"arcrow",null,e).forEach(function(t){Q.layer.lifeline.appendChild(t)}),Q.layer.sequence.appendChild(M.createUse({x:0,y:e+Q.arcRowHeight/2},q.get("entities")))}function b(t){var e=0,r=M.createGroup(q.get("entities"));t&&(U.setHeight(g(t)+2*K.LINE_WIDTH),t.forEach(function(t){r.appendChild(p(t,e)),U.setX(t,e),e+=U.getDims().interEntitySpacing}),Q.layer.sequence.appendChild(r)),Q.arcEndX=e-U.getDims().interEntitySpacing+U.getDims().width}function x(t,e,r,n){var o=0,i=t.label,a=U.getX(t.from);t.label="",e.forEach(function(e){var i={};e.name!==t.from&&(o=U.getX(e.name),i=F(t,a,o,n),r.push({layer:Q.layer.sequence,element:i}))}),t.label=i}function y(t,e,r,n){var o={};return t.from&&t.to&&("*"===t.to?(x(t,e,r,n),o=V.createLabel(t,{x:0,y:n,width:Q.arcEndX},{alignAround:!0,ownBackground:!0,wordWrapArcs:Q.wordWrapArcs}),r.push({title:t.title,layer:Q.layer.sequence,element:o})):(o=F(t,U.getX(t.from),U.getX(t.to),n),r.push({title:t.title,layer:Q.layer.sequence,element:o}))),o}function v(t,e,r){var n=0;return t.forEach(function(t){var e={};switch(z.getAggregate(t.kind)){case"emptyarc":e=L(t,0);break;case"box":e=I(U.getOAndD(t.from,t.to),t,0);break;case"inline_expression":e=k(t,0);break;default:e=y(t,r,[],0)}n=Math.max(n,N.getBBox(e).height+2*K.LINE_WIDTH)}),n}function w(t,e,r){var n="arcrow",o=[];G.set(e,Math.max(G.get(e).height,v(t,e,r))),t.forEach(function(t){var i={};switch(z.getAggregate(t.kind)){case"emptyarc":i=L(t,G.get(e).y),"..."===t.kind&&(n="arcrowomit"),o.push({layer:Q.layer.sequence,element:i});break;case"box":i=I(U.getOAndD(t.from,t.to),t,G.get(e).y),o.push({title:t.title,layer:Q.layer.notes,element:i});break;case"inline_expression":i=k(t,G.get(e).y),o.push({layer:Q.layer.notes,element:i}),tt.push({arc:t,rownum:e});break;default:i=y(t,r,o,G.get(e).y)}}),T(r,n,G.get(e).height,G.get(e).y).forEach(function(t){Q.layer.lifeline.appendChild(t)}),o.forEach(function(t){t.element&&(t.title&&t.element.appendChild(M.createTitle(t.title)),t.layer.appendChild(t.element))})}function C(t,e){if(tt=[],T(e,"arcrow",null,G.get(-1).y).forEach(function(t){Q.layer.lifeline.appendChild(t)}),t){for(var r=0;r<t.length;r++)w(t[r],r,e);A(tt)}}function k(t,e){var r=U.getOAndD(t.from,t.to),n=7,o=e>0,i=2*Q.maxDepth*K.LINE_WIDTH,a=r.to-r.from+(U.getDims().interEntitySpacing-2*K.LINE_WIDTH)-n-K.LINE_WIDTH,c=r.from-(U.getDims().interEntitySpacing-3*K.LINE_WIDTH-i)/2-2*(Q.maxDepth-t.depth)*K.LINE_WIDTH,s=M.createGroup();o||(t.label=t.kind+(t.label?": "+t.label:""));var u=V.createLabel(t,{x:c+K.LINE_WIDTH-a/2,y:e+Q.arcRowHeight/4,width:a},{alignLeft:!0,ownBackground:!1,wordWrapArcs:Q.wordWrapArcs}),l=N.getBBox(u),f=Math.max(l.height+2*K.LINE_WIDTH,Q.arcRowHeight/2-2*K.LINE_WIDTH),d=Math.min(l.width+2*K.LINE_WIDTH,a),h=M.createEdgeRemark({width:d-K.LINE_WIDTH+n,height:f,x:c,y:e},"box inline_expression_label",t.linecolor,t.textbgcolor,n);return s.appendChild(h),s.appendChild(u),s}function A(t){t.forEach(function(t){Q.layer.inline.appendChild(_(t,G.get(t.rownum).y))})}function _(t,e){var r=G.get(t.rownum).y,n=G.get(t.rownum+t.arc.numberofrows+1).y,o=n-r;return t.arc.label="",D(U.getOAndD(t.arc.from,t.arc.to),t.arc,o,e)}function T(t,e,r,n){return(!r||r<Q.arcRowHeight)&&(r=Q.arcRowHeight),t.map(function(t){var o=M.createLine({xFrom:U.getX(t.name),yFrom:0-r/2+(n?n:0),xTo:U.getX(t.name),yTo:r/2+(n?n:0)},{class:e});return t.linecolor&&o.setAttribute("style","stroke:"+t.linecolor+";"),o})}function S(t,e,r,n,o,i){var a=2*(Q.arcRowHeight/5),c=U.getDims().interEntitySpacing/2,s={},u="arc "+R.getAggregateClass(t)+" "+R.getClass(t);if(n){s=M.createGroup();var l=M.createUTurn({x:e,y:i},i+r+a-2*K.LINE_WIDTH,c-2*K.LINE_WIDTH,u,"::"!==t,a),f=M.createUTurn({x:e,y:i},i+r+a-K.LINE_WIDTH,c,null,null,a),d=M.createUTurn({x:e,y:i},i+r+a,c,u,"::"!==t,a);Boolean(o)&&l.setAttribute("style","stroke:"+o),X.getAttributes(q.get(),t,o,e,e).forEach(function(t){f.setAttribute(t.name,t.value)}),f.setAttribute("style","stroke:transparent;"),Boolean(o)&&d.setAttribute("style","stroke:"+o),s.appendChild(l),s.appendChild(d),s.appendChild(f),s.setAttribute("class",u)}else s=M.createUTurn({x:e,y:i},i+r+a,c,u,"-x"===t,a),X.getAttributes(q.get(),t,o,e,e).forEach(function(t){s.setAttribute(t.name,t.value)});return s}function L(t,e){return"---"===t.kind?B(t,U.getOAndD(t.from,t.to),e):P(t,U.getOAndD(t.from,t.to),e)}function E(t){return t.arcskip?t.arcskip*Q.arcRowHeight:0}function j(t){return"<:>"===t?"bidi ":"::"===t?"nodi ":""}function F(t,e,r,n){var o=M.createGroup(),i="arc ";i+=j(t.kind),i+=R.getAggregateClass(t.kind)+" "+R.getClass(t.kind);var a=[":>","::","<:>"].indexOf(t.kind)>-1,c=E(t,n),s=0===c?Q.arcGradient:c;if(r=O.determineArcXTo(t.kind,e,r),e===r){o.appendChild(S(t.kind,e,c,a,t.linecolor,n));var u=2*U.getDims().interEntitySpacing/3;o.appendChild(V.createLabel(t,{x:e+1.5*K.LINE_WIDTH-u/2,y:n-Q.arcRowHeight/5-K.LINE_WIDTH/2,width:u},{alignLeft:!0,alignAbove:!0,ownBackground:!0,wordWrapArcs:Q.wordWrapArcs}))}else{var l=M.createLine({xFrom:e,yFrom:n,xTo:r,yTo:n+s},{class:i,doubleLine:a});X.getAttributes(q.get(),t.kind,t.linecolor,e,r).forEach(function(t){l.setAttribute(t.name,t.value)}),o.appendChild(l),o.appendChild(V.createLabel(t,{x:e,y:n,width:r-e},{alignAround:!0,alignAbove:"above"===Q.regularArcTextVerticalAlignment,ownBackground:!0,wordWrapArcs:Q.wordWrapArcs}))}return o}function P(t,e,r){var n=0,o=Q.arcEndX;return t.from&&t.to&&(n=e.from,o=e.to-e.from),V.createLabel(t,{x:n,y:r,width:o},{ownBackground:!0,wordWrapArcs:Q.wordWrapArcs})}function B(t,e,r){var n=0,o=Q.arcEndX,i="comment",a=M.createGroup();if(t.from&&t.to){var c=1*Q.maxDepth*K.LINE_WIDTH,s=2*(Q.maxDepth-t.depth)*K.LINE_WIDTH;n=e.from-(U.getDims().interEntitySpacing+2*K.LINE_WIDTH)/2-(s-c),o=e.to+(U.getDims().interEntitySpacing+2*K.LINE_WIDTH)/2+(s-c),i="inline_expression_divider"}var u=M.createLine({xFrom:n,yFrom:r,xTo:o,yTo:r},{class:i});return a.appendChild(u),a.appendChild(P(t,e,r)),t.linecolor&&u.setAttribute("style","stroke:"+t.linecolor+";"),a}function D(t,e,r,n){var o=2*Q.maxDepth*K.LINE_WIDTH,i=t.to-t.from+U.getDims().interEntitySpacing-2*K.LINE_WIDTH-o,a=t.from-(U.getDims().interEntitySpacing-2*K.LINE_WIDTH-o)/2,c=2*(Q.maxDepth-e.depth)*K.LINE_WIDTH;return M.createRect({width:i+2*c,height:r?r:Q.arcRowHeight-2*K.LINE_WIDTH,x:a-c,y:n},"box inline_expression "+e.kind,e.linecolor,e.textbgcolor)}function I(t,e,r){var n=2*Q.maxDepth*K.LINE_WIDTH,o=t.to-t.from+U.getDims().interEntitySpacing-2*K.LINE_WIDTH-n,i=t.from-(U.getDims().interEntitySpacing-2*K.LINE_WIDTH-n)/2,a=M.createGroup(),c={},s=V.createLabel(e,{x:i,y:r,width:o}),u=N.getBBox(s),l=Math.max(u.height+2*K.LINE_WIDTH,Q.arcRowHeight-2*K.LINE_WIDTH),f={width:o,height:l,x:i,y:r-l/2};switch(e.kind){case"rbox":c=M.createRBox(f,"box rbox",e.linecolor,e.textbgcolor);break;case"abox":c=M.createABox(f,"box abox",e.linecolor,e.textbgcolor);break;case"note":c=M.createNote(f,"box note",e.linecolor,e.textbgcolor);break;default:c=M.createRect(f,"box",e.linecolor,e.textbgcolor)}return a.appendChild(c),a.appendChild(s),a}var M=t("./svgelementfactory/index"),N=t("./svgutensils"),O=t("./renderutensils"),H=t("./renderskeleton"),W=t("../astmassage/flatten"),R=t("./kind2class"),z=t("../astmassage/aggregatekind"),G=t("./rowmemory"),q=t("./idmanager"),X=t("./markermanager"),U=t("./entities"),V=t("./renderlabels"),K=t("./constants"),Y=t("../../lib/lodash/lodash.custom"),Z=3,$=38,J=0,Q=Object.seal({arcRowHeight:$,arcGradient:J,arcEndX:0,wordWrapArcs:!1,mirrorEntitiesOnBottom:!1,regularArcTextVerticalAlignment:"middle",maxDepth:0,document:{},layer:{lifeline:{},sequence:{},notes:{},inline:{},watermark:{}}}),tt=[];return{clean:function(t,e){Q.document=H.init(e),N.init(Q.document),N.removeRenderedSVGFromElement(t)},renderAST:function(t,r,n,o,i){return e(t,o,n,{source:r,styleAdditions:i})},renderASTNew:e}}),r("utl/exporter",[],function(){"use strict";function t(t,e,r){return t.pathname+"?lang="+r+"&msc="+encodeURIComponent(e)}function e(e,n,o){return t(e,n,o).length<r}var r=4094;return{toLocationString:function(r,n,o){var i="# source too long for an URL";return e(r,n,o)&&(i=n),t(r,i,o)}}}),r("embedding/config",[],function(){"use strict";function t(t,e){Object.getOwnPropertyNames(e).forEach(function(r){t[r]=e[r]})}var e={defaultLanguage:"mscgen",parentElementPrefix:"mscgen_js-parent_",clickable:!1,clickURL:"https://sverweij.github.io/mscgen_js/",loadFromSrcAttribute:!1};return{getConfig:function(){return"undefined"!=typeof mscgen_js_config&&mscgen_js_config&&"object"==typeof mscgen_js_config&&t(e,mscgen_js_config),e}}}),r("utl/tpl",[],function(){"use strict";return{applyTemplate:function(t,e){var r=t;return e&&Object.keys(e).forEach(function(t){r=r.replace(new RegExp("{"+t+"}","g"),e[t])}),r}}}),r("embedding/error-rendering",["../utl/tpl"],function(t){"use strict";function e(t,e){for(var r=t.toString(),n=e-r.length,o=0;o<n;o++)r=" "+r;return r}function r(t,r){return e(r,3)+" "+t}function n(e,r){return e.split("").reduce(function(e,n,i){return i===r?e+t.applyTemplate(s,{char:o(n)}):e+o(n)},"")}function o(t){return t.replace(/</g,"&lt;")}var i="<pre><div style='color: #d00'># ERROR on line {line}, column {col} - {message}</div>",a="<pre><div style='color: #d00'># ERROR {message}</div>",c="<mark>{line}\n</mark>",s="<span style='text-decoration:underline'>{char}</span>";return{formatNumber:e,deHTMLize:o,renderError:function(e,s,u){var l=Boolean(s)?t.applyTemplate(i,{message:u,line:s.start.line,col:s.start.column}):t.applyTemplate(a,{message:u});return e.split("\n").reduce(function(e,i,a){return s&&a===s.start.line-1?e+t.applyTemplate(c,{line:r(n(i,s.start.column-1),a+1)}):e+o(r(i,a+1))+"\n"},l)+"</pre>"}}}),r("utl/domutl",[],function(){"use strict";return{ajax:function(t,e,r){var n=new XMLHttpRequest;n.onreadystatechange=function(t){t.target.readyState===XMLHttpRequest.DONE&&(200===n.status?e(t):r(t))},n.open("GET",t),n.responseType="text";try{n.send()}catch(t){r(t)}}}}),e(["./lib/mscgenjs-core/parse/xuparser","./lib/mscgenjs-core/parse/msgennyparser","./lib/mscgenjs-core/render/graphics/renderast","./utl/exporter","./embedding/config","./embedding/error-rendering","./utl/domutl","./utl/tpl"],function(t,e,r,n,o,i,a,c){"use strict";function s(){u();var t=document.getElementsByClassName("mscgen_js");l(t,0),l(document.getElementsByTagName("mscgen"),t.length)}function u(){for(var t=document.scripts,e=0;e<t.length;e++)S[t[e].type]&&!t[e].hasAttribute("data-renderedby")&&(t[e].insertAdjacentHTML("afterend",c.applyTemplate(k,{src:t[e].src?c.applyTemplate(A,{src:t[e].src}):"",lang:S[t[e].type]||o.getConfig().defaultLanguage,msc:t[e].textContent.replace(/</g,"&lt;"),mirrorEntities:x(t[e])?"data-mirror-entities='true'":"",namedStyle:y(t[e]),regularArcTextVerticalAlignment:v(t[e])})),t[e].setAttribute("data-renderedby","mscgen_js"))}function l(t,e){for(var r=0;r<t.length;r++)f(t[r],e+r)}function f(t,e){t.hasAttribute("data-renderedby")||h(t,e)}function d(t,e){t.innerHTML=c.applyTemplate("<div style='color: #d00'>{string}</div>",{string:e})}function h(t,e){m(t,e),t.setAttribute("data-renderedby","mscgen_js"),o.getConfig().loadFromSrcAttribute&&t.getAttribute("data-src")?a.ajax(t.getAttribute("data-src"),function(e){g(t,e.target.response)},function(){d(t,c.applyTemplate(_,{url:t.getAttribute("data-src")}))}):!o.getConfig().loadFromSrcAttribute&&t.getAttribute("data-src")?d(t,c.applyTemplate(T,{url:t.getAttribute("data-src")})):g(t,t.textContent)}function g(t,e){var r=b(t),n=w(e,r);n.entities?C(n,t.id,e,r,x(t),y(t),v(t)):t.innerHTML=i.renderError(e,n.location,n.message)}function p(t,e,r){var i={pathname:"index.html"},a=document.createElement("a");return a.setAttribute("href",o.getConfig().clickURL+n.toLocationString(i,t,e)),a.setAttribute("id",r+"link"),a.setAttribute("style","text-decoration: none;"),a.setAttribute("title","click to edit in the mscgen_js interpreter"),a}function m(t,e){t.id||(t.id=o.getConfig().parentElementPrefix+e.toString())}function b(t){var e=t.getAttribute("data-language");return e||(e=o.getConfig().defaultLanguage),e}function x(t){var e=t.getAttribute("data-mirror-entities");return!(!e||"true"!==e)}function y(t){return t.getAttribute("data-named-style")||"basic"}function v(t){return t.getAttribute("data-regular-arc-text-vertical-alignment")||"middle"}function w(r,n){var o={};try{o="msgenny"===n?e.parse(r):"json"===n?JSON.parse(r):t.parse(r)}catch(t){return t}return o}function C(t,e,n,i,a,c,s){var u=document.getElementById(e);u.innerHTML="",!0===o.getConfig().clickable&&(u.appendChild(p(n,i,e)),e+="link"),r.clean(e,window),r.renderASTNew(t,window,e,{source:n,additionalTemplate:c,mirrorEntitiesOnBottom:a,regularArcTextVerticalAlignment:s})}var k="<span class='mscgen_js' {src} data-language='{lang}' data-named-style='{namedStyle}' data-regular-arc-text-vertical-alignment='{regularArcTextVerticalAlignment}' {mirrorEntities}>{msc}<span>",A="data-src='{src}' ",_="ERROR: Could not find or open the URL '{url}' specified in the <code>data-src</code> attribute.",T="ERROR: Won't load the chart specified in <code>data-src='{url}'</code>, because loading from separate files is switched off in the mscgen_js configuration. <br><br>See <a href='https://sverweij.github.io/mscgen_js/embed.html#loading-from-separate-files'>Loading charts from separate files</a> in the mscgen_js embedding guide how to enable it.",S={"text/x-mscgen":"mscgen","text/x-msgenny":"msgenny","text/x-xu":"xu"};s()}),r("mscgen-inpage",function(){})}();