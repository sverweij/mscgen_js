/**
 * @license almond 0.3.2 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */

/*
 This file is part of mscgen_js.

 mscgen_js is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 mscgen_js is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with mscgen_js.  If not, see <http://www.gnu.org/licenses/>.
 */

/**
 * @license
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash exports="umd" include="memoize,cloneDeep,flatten,defaults" --development --output lib/lodash/lodash.custom.js`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

!function(){var e,t,r;!function(n){function o(e,t){return x.call(e,t)}function i(e,t){var r,n,o,i,a,c,s,u,l,p,f,d,h=t&&t.split("/"),g=y.map,m=g&&g["*"]||{};if(e){for(e=e.split("/"),a=e.length-1,y.nodeIdCompat&&C.test(e[a])&&(e[a]=e[a].replace(C,"")),"."===e[0].charAt(0)&&h&&(d=h.slice(0,h.length-1),e=d.concat(e)),l=0;l<e.length;l++)if(f=e[l],"."===f)e.splice(l,1),l-=1;else if(".."===f){if(0===l||1===l&&".."===e[2]||".."===e[l-1])continue;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}if((h||m)&&g){for(r=e.split("/"),l=r.length;l>0;l-=1){if(n=r.slice(0,l).join("/"),h)for(p=h.length;p>0;p-=1)if(o=g[h.slice(0,p).join("/")],o&&(o=o[n])){i=o,c=l;break}if(i)break;!s&&m&&m[n]&&(s=m[n],u=l)}!i&&s&&(i=s,c=u),i&&(r.splice(0,c,i),e=r.join("/"))}return e}function a(e,t){return function(){var r=w.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),d.apply(n,r.concat([e,t]))}}function c(e){return function(t){return i(t,e)}}function s(e){return function(t){m[e]=t}}function u(e){if(o(b,e)){var t=b[e];delete b[e],v[e]=!0,f.apply(n,t)}if(!o(m,e)&&!o(v,e))throw new Error("No "+e);return m[e]}function l(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function p(e){return function(){return y&&y.config&&y.config[e]||{}}}var f,d,h,g,m={},b={},y={},v={},x=Object.prototype.hasOwnProperty,w=[].slice,C=/\.js$/;h=function(e,t){var r,n=l(e),o=n[0];return e=n[1],o&&(o=i(o,t),r=u(o)),o?e=r&&r.normalize?r.normalize(e,c(t)):i(e,t):(e=i(e,t),n=l(e),o=n[0],e=n[1],o&&(r=u(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:r}},g={require:function(e){return a(e)},exports:function(e){var t=m[e];return"undefined"!=typeof t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:p(e)}}},f=function(e,t,r,i){var c,l,p,f,d,y,x=[],w=typeof r;if(i=i||e,"undefined"===w||"function"===w){for(t=!t.length&&r.length?["require","exports","module"]:t,d=0;d<t.length;d+=1)if(f=h(t[d],i),l=f.f,"require"===l)x[d]=g.require(e);else if("exports"===l)x[d]=g.exports(e),y=!0;else if("module"===l)c=x[d]=g.module(e);else if(o(m,l)||o(b,l)||o(v,l))x[d]=u(l);else{if(!f.p)throw new Error(e+" missing "+l);f.p.load(f.n,a(i,!0),s(l),{}),x[d]=m[l]}p=r?r.apply(m[e],x):void 0,e&&(c&&c.exports!==n&&c.exports!==m[e]?m[e]=c.exports:p===n&&y||(m[e]=p))}else e&&(m[e]=r)},e=t=d=function(e,t,r,o,i){if("string"==typeof e)return g[e]?g[e](t):u(h(e,t).f);if(!e.splice){if(y=e,y.deps&&d(y.deps,y.callback),!t)return;t.splice?(e=t,t=r,r=null):e=n}return t=t||function(){},"function"==typeof r&&(r=o,o=i),o?f(n,e,t,r):setTimeout(function(){f(n,e,t,r)},4),d},d.config=function(e){return d(e)},e._defined=m,r=function(e,t,r){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(r=t,t=[]),o(m,e)||o(b,e)||(b[e]=[e,t,r])},r.amd={jQuery:!0}}(),r("../node_modules/almond/almond",function(){}),r("lib/mscgenjs-core/parse/xuparser",[],function(){"use strict";function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,r,n,o){this.message=e,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function r(e){function r(){return i(ii,oi)}function n(t){throw c(t,null,e.substring(ii,oi),i(ii,oi))}function o(t){var r,n,o=ai[t];if(o)return o;for(r=t-1;!ai[r];)r--;for(o=ai[r],o={line:o.line,column:o.column,seenCR:o.seenCR};t>r;)n=e.charAt(r),"\n"===n?(o.seenCR||o.line++,o.column=1,o.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(o.line++,o.column=1,o.seenCR=!0):(o.column++,o.seenCR=!1),r++;return ai[t]=o,o}function i(e,t){var r=o(e),n=o(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function a(e){ci>oi||(oi>ci&&(ci=oi,si=[]),si.push(e))}function c(e,r,n,o){function i(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function a(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n,o,i,a=new Array(e.length);for(i=0;i<e.length;i++)a[i]=e[i].description;return n=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],o=t?'"'+r(t)+'"':"end of input","Expected "+n+" but "+o+" found."}return null!==r&&i(r),new t(null!==e?e:a(r,n),r,n,o)}function s(){var t,r,n,o,i,c,s,p,f,d;return t=oi,r=$(),r!==we?(n=u(),n!==we?(o=$(),o!==we?(123===e.charCodeAt(oi)?(i=_e,oi++):(i=we,0===ui&&a(Ae)),i!==we?(c=$(),c!==we?(s=l(),s!==we?(p=$(),p!==we?(125===e.charCodeAt(oi)?(f=Ee,oi++):(f=we,0===ui&&a(Le)),f!==we?(d=$(),d!==we?(ii=t,r=je(r,s),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t}function u(){var t;return e.substr(oi,3).toLowerCase()===Se?(t=e.substr(oi,3),oi+=3):(t=we,0===ui&&a(Ie)),t===we&&(e.substr(oi,2).toLowerCase()===Te?(t=e.substr(oi,2),oi+=2):(t=we,0===ui&&a(Ne))),t}function l(){var e,t,r,n,o;return e=oi,t=oi,r=p(),r!==we&&(ii=t,r=De(r)),t=r,t===we&&(t=null),t!==we?(r=oi,n=d(),n!==we&&(ii=r,n=Be(n)),r=n,r===we&&(r=null),r!==we?(n=oi,o=g(),o!==we&&(ii=n,o=Oe(o)),n=o,n===we&&(n=null),n!==we?(t=[t,r,n],e=t):(oi=e,e=we)):(oi=e,e=we)):(oi=e,e=we),e}function p(){var t,r,n,o,i,c;for(t=oi,r=oi,n=[],o=oi,i=f(),i!==we?(44===e.charCodeAt(oi)?(c=He,oi++):(c=we,0===ui&&a(Re)),c!==we?(ii=o,i=We(i),o=i):(oi=o,o=we)):(oi=o,o=we);o!==we;)n.push(o),o=oi,i=f(),i!==we?(44===e.charCodeAt(oi)?(c=He,oi++):(c=we,0===ui&&a(Re)),c!==we?(ii=o,i=We(i),o=i):(oi=o,o=we)):(oi=o,o=we);return n!==we?(o=oi,i=f(),i!==we?(59===e.charCodeAt(oi)?(c=Fe,oi++):(c=we,0===ui&&a(Me)),c!==we?(ii=o,i=We(i),o=i):(oi=o,o=we)):(oi=o,o=we),o!==we?(n=[n,o],r=n):(oi=r,r=we)):(oi=r,r=we),r!==we&&(ii=t,r=Ge(r)),t=r}function f(){var t,r,n,o,i,c,s,u;return ui++,t=oi,r=$(),r!==we?(e.substr(oi,6).toLowerCase()===qe?(n=e.substr(oi,6),oi+=6):(n=we,0===ui&&a(ze)),n===we&&(e.substr(oi,11).toLowerCase()===Ue?(n=e.substr(oi,11),oi+=11):(n=we,0===ui&&a(Pe))),n!==we?(o=$(),o!==we?(61===e.charCodeAt(oi)?(i=Ve,oi++):(i=we,0===ui&&a($e)),i!==we?(c=$(),c!==we?(s=K(),s!==we?(u=$(),u!==we?(ii=t,r=Ke(n,s),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t===we&&(t=oi,r=$(),r!==we?(e.substr(oi,5).toLowerCase()===Ze?(n=e.substr(oi,5),oi+=5):(n=we,0===ui&&a(Je)),n!==we?(o=$(),o!==we?(61===e.charCodeAt(oi)?(i=Ve,oi++):(i=we,0===ui&&a($e)),i!==we?(c=$(),c!==we?(s=ne(),s!==we?(u=$(),u!==we?(ii=t,r=Ke(n,s),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t===we&&(t=oi,r=$(),r!==we?(e.substr(oi,12).toLowerCase()===Qe?(n=e.substr(oi,12),oi+=12):(n=we,0===ui&&a(Ye)),n!==we?(o=$(),o!==we?(61===e.charCodeAt(oi)?(i=Ve,oi++):(i=we,0===ui&&a($e)),i!==we?(c=$(),c!==we?(s=ee(),s!==we?(u=$(),u!==we?(ii=t,r=et(n,s),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t===we&&(t=oi,r=$(),r!==we?(e.substr(oi,9).toLowerCase()===tt?(n=e.substr(oi,9),oi+=9):(n=we,0===ui&&a(rt)),n!==we?(o=$(),o!==we?(61===e.charCodeAt(oi)?(i=Ve,oi++):(i=we,0===ui&&a($e)),i!==we?(c=$(),c!==we?(s=B(),s!==we?(u=$(),u!==we?(ii=t,r=Ke(n,s),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)))),ui--,t===we&&(r=we,0===ui&&a(Xe)),t}function d(){var t,r,n,o,i,c;for(t=oi,r=oi,n=[],o=oi,i=h(),i!==we?(44===e.charCodeAt(oi)?(c=He,oi++):(c=we,0===ui&&a(Re)),c!==we?(ii=o,i=nt(i),o=i):(oi=o,o=we)):(oi=o,o=we);o!==we;)n.push(o),o=oi,i=h(),i!==we?(44===e.charCodeAt(oi)?(c=He,oi++):(c=we,0===ui&&a(Re)),c!==we?(ii=o,i=nt(i),o=i):(oi=o,o=we)):(oi=o,o=we);return n!==we?(o=oi,i=h(),i!==we?(59===e.charCodeAt(oi)?(c=Fe,oi++):(c=we,0===ui&&a(Me)),c!==we?(ii=o,i=nt(i),o=i):(oi=o,o=we)):(oi=o,o=we),o!==we?(n=[n,o],r=n):(oi=r,r=we)):(oi=r,r=we),r!==we&&(ii=t,r=ot(r)),t=r}function h(){var t,r,n,o,i,c,s,u;return ui++,t=oi,r=$(),r!==we?(n=B(),n!==we?(o=$(),o!==we?(i=oi,91===e.charCodeAt(oi)?(c=at,oi++):(c=we,0===ui&&a(ct)),c!==we?(s=T(),s!==we?(93===e.charCodeAt(oi)?(u=st,oi++):(u=we,0===ui&&a(ut)),u!==we?(ii=i,c=lt(n,s),i=c):(oi=i,i=we)):(oi=i,i=we)):(oi=i,i=we),i===we&&(i=null),i!==we?(c=$(),c!==we?(ii=t,r=pt(n,i),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t===we&&(t=oi,r=$(),r!==we?(n=R(),n!==we?(o=$(),o!==we?(i=oi,91===e.charCodeAt(oi)?(c=at,oi++):(c=we,0===ui&&a(ct)),c!==we?(s=T(),s!==we?(93===e.charCodeAt(oi)?(u=st,oi++):(u=we,0===ui&&a(ut)),u!==we?(ii=i,c=lt(n,s),i=c):(oi=i,i=we)):(oi=i,i=we)):(oi=i,i=we),i===we&&(i=null),i!==we?(c=$(),c!==we?(ii=t,r=ft(n,i),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)),ui--,t===we&&(r=we,0===ui&&a(it)),t}function g(){var t,r,n,o,i;if(t=[],r=oi,n=m(),n!==we?(o=$(),o!==we?(59===e.charCodeAt(oi)?(i=Fe,oi++):(i=we,0===ui&&a(Me)),i!==we?(ii=r,n=dt(n),r=n):(oi=r,r=we)):(oi=r,r=we)):(oi=r,r=we),r!==we)for(;r!==we;)t.push(r),r=oi,n=m(),n!==we?(o=$(),o!==we?(59===e.charCodeAt(oi)?(i=Fe,oi++):(i=we,0===ui&&a(Me)),i!==we?(ii=r,n=dt(n),r=n):(oi=r,r=we)):(oi=r,r=we)):(oi=r,r=we);else t=we;return t}function m(){var t,r,n,o,i,c,s;for(t=oi,r=oi,n=[],o=oi,i=b(),i!==we?(c=$(),c!==we?(44===e.charCodeAt(oi)?(s=He,oi++):(s=we,0===ui&&a(Re)),s!==we?(ii=o,i=dt(i),o=i):(oi=o,o=we)):(oi=o,o=we)):(oi=o,o=we);o!==we;)n.push(o),o=oi,i=b(),i!==we?(c=$(),c!==we?(44===e.charCodeAt(oi)?(s=He,oi++):(s=we,0===ui&&a(Re)),s!==we?(ii=o,i=dt(i),o=i):(oi=o,o=we)):(oi=o,o=we)):(oi=o,o=we);return n!==we?(o=oi,i=b(),i!==we&&(ii=o,i=ht(i)),o=i,o!==we?(n=[n,o],r=n):(oi=r,r=we)):(oi=r,r=we),r!==we&&(ii=t,r=gt(r)),t=r}function b(){var e;return e=y(),e===we&&(e=C()),e}function y(){var t,r,n,o,i,c;return t=oi,r=oi,n=v(),n!==we&&(ii=r,n=dt(n)),r=n,r===we&&(r=oi,n=w(),n!==we&&(ii=r,n=dt(n)),r=n,r===we&&(r=oi,n=x(),n!==we&&(ii=r,n=dt(n)),r=n)),r!==we?(n=oi,91===e.charCodeAt(oi)?(o=at,oi++):(o=we,0===ui&&a(ct)),o!==we?(i=T(),i!==we?(93===e.charCodeAt(oi)?(c=st,oi++):(c=we,0===ui&&a(ut)),c!==we?(ii=n,o=mt(r,i),n=o):(oi=n,n=we)):(oi=n,n=we)):(oi=n,n=we),n===we&&(n=null),n!==we?(ii=t,r=bt(r,n),t=r):(oi=t,t=we)):(oi=t,t=we),t}function v(){var e,t,r,n;return e=oi,t=$(),t!==we?(r=k(),r!==we?(n=$(),n!==we?(ii=e,t=yt(r),e=t):(oi=e,e=we)):(oi=e,e=we)):(oi=e,e=we),e}function x(){var e,t,r,n;return e=oi,t=$(),t!==we?(r=_(),r!==we?(n=$(),n!==we?(ii=e,t=yt(r),e=t):(oi=e,e=we)):(oi=e,e=we)):(oi=e,e=we),e}function w(){var t,r,n,o,i,c,s,u;return t=oi,r=$(),r!==we?(n=H(),n!==we?(o=$(),o!==we?(i=A(),i!==we?(c=$(),c!==we?(s=H(),s!==we?(u=$(),u!==we?(ii=t,r=vt(n,i,s),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t===we&&(t=oi,r=$(),r!==we?(42===e.charCodeAt(oi)?(n=xt,oi++):(n=we,0===ui&&a(wt)),n!==we?(o=$(),o!==we?(i=j(),i!==we?(c=$(),c!==we?(s=H(),s!==we?(u=$(),u!==we?(ii=t,r=Ct(i,s),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t===we&&(t=oi,r=$(),r!==we?(n=H(),n!==we?(o=$(),o!==we?(i=L(),i!==we?(c=$(),c!==we?(42===e.charCodeAt(oi)?(s=xt,oi++):(s=we,0===ui&&a(wt)),s!==we?(u=$(),u!==we?(ii=t,r=kt(n,i),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t===we&&(t=oi,r=$(),r!==we?(n=H(),n!==we?(o=$(),o!==we?(i=E(),i!==we?(c=$(),c!==we?(42===e.charCodeAt(oi)?(s=xt,oi++):(s=we,0===ui&&a(wt)),s!==we?(u=$(),u!==we?(ii=t,r=kt(n,i),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)))),t}function C(){var t,r,n,o,i,c,s,u,l,p,f,d,h,m,b,y;return t=oi,r=$(),r!==we?(n=H(),n!==we?(o=$(),o!==we?(i=I(),i!==we?(c=$(),c!==we?(s=H(),s!==we?(u=$(),u!==we?(l=oi,91===e.charCodeAt(oi)?(p=at,oi++):(p=we,0===ui&&a(ct)),p!==we?(f=T(),f!==we?(93===e.charCodeAt(oi)?(d=st,oi++):(d=we,0===ui&&a(ut)),d!==we?(ii=l,p=_t(n,i,s,f),l=p):(oi=l,l=we)):(oi=l,l=we)):(oi=l,l=we),l===we&&(l=null),l!==we?(p=$(),p!==we?(123===e.charCodeAt(oi)?(f=_e,oi++):(f=we,0===ui&&a(Ae)),f!==we?(d=$(),d!==we?(h=g(),h===we&&(h=null),h!==we?(m=$(),m!==we?(125===e.charCodeAt(oi)?(b=Ee,oi++):(b=we,0===ui&&a(Le)),b!==we?(y=$(),y!==we?(ii=t,r=At(n,i,s,l,h),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t}function k(){var t,r;return ui++,e.substr(oi,3)===Lt?(t=Lt,oi+=3):(t=we,0===ui&&a(jt)),t===we&&(e.substr(oi,3)===St?(t=St,oi+=3):(t=we,0===ui&&a(It))),ui--,t===we&&(r=we,0===ui&&a(Et)),t}function _(){var t,r;return ui++,e.substr(oi,3)===Nt?(t=Nt,oi+=3):(t=we,0===ui&&a(Dt)),ui--,t===we&&(r=we,0===ui&&a(Tt)),t}function A(){var e,t;return e=oi,t=E(),t===we&&(t=L(),t===we&&(t=j(),t===we&&(t=S()))),t!==we&&(ii=e,t=Bt(t)),e=t}function E(){var t,r;return ui++,e.substr(oi,2)===Ht?(t=Ht,oi+=2):(t=we,0===ui&&a(Rt)),t===we&&(e.substr(oi,3)===Wt?(t=Wt,oi+=3):(t=we,0===ui&&a(Ft)),t===we&&(e.substr(oi,2)===Mt?(t=Mt,oi+=2):(t=we,0===ui&&a(Gt)),t===we&&(e.substr(oi,5)===Xt?(t=Xt,oi+=5):(t=we,0===ui&&a(qt)),t===we&&(e.substr(oi,3)===zt?(t=zt,oi+=3):(t=we,0===ui&&a(Ut)),t===we&&(e.substr(oi,2)===Pt?(t=Pt,oi+=2):(t=we,0===ui&&a(Vt)),t===we&&(e.substr(oi,4)===$t?(t=$t,oi+=4):(t=we,0===ui&&a(Kt)),t===we&&(e.substr(oi,2)===Zt?(t=Zt,oi+=2):(t=we,0===ui&&a(Jt)),t===we&&(e.substr(oi,3)===Qt?(t=Qt,oi+=3):(t=we,0===ui&&a(Yt)))))))))),ui--,t===we&&(r=we,0===ui&&a(Ot)),t}function L(){var t,r;return ui++,e.substr(oi,2)===tr?(t=tr,oi+=2):(t=we,0===ui&&a(rr)),t===we&&(e.substr(oi,3)===nr?(t=nr,oi+=3):(t=we,0===ui&&a(or)),t===we&&(e.substr(oi,2)===ir?(t=ir,oi+=2):(t=we,0===ui&&a(ar)),t===we&&(e.substr(oi,2)===cr?(t=cr,oi+=2):(t=we,0===ui&&a(sr)),t===we&&(e.substr(oi,2)===ur?(t=ur,oi+=2):(t=we,0===ui&&a(lr)),t===we&&(e.substr(oi,2).toLowerCase()===pr?(t=e.substr(oi,2),oi+=2):(t=we,0===ui&&a(fr))))))),ui--,t===we&&(r=we,0===ui&&a(er)),t}function j(){var t,r;return ui++,e.substr(oi,2)===hr?(t=hr,oi+=2):(t=we,0===ui&&a(gr)),t===we&&(e.substr(oi,3)===mr?(t=mr,oi+=3):(t=we,0===ui&&a(br)),t===we&&(e.substr(oi,2)===yr?(t=yr,oi+=2):(t=we,0===ui&&a(vr)),t===we&&(e.substr(oi,2)===xr?(t=xr,oi+=2):(t=we,0===ui&&a(wr)),t===we&&(e.substr(oi,2)===Cr?(t=Cr,oi+=2):(t=we,0===ui&&a(kr)),t===we&&(e.substr(oi,2).toLowerCase()===_r?(t=e.substr(oi,2),oi+=2):(t=we,0===ui&&a(Ar))))))),ui--,t===we&&(r=we,0===ui&&a(dr)),t}function S(){var t,r;return ui++,e.substr(oi,4).toLowerCase()===Lr?(t=e.substr(oi,4),oi+=4):(t=we,0===ui&&a(jr)),t===we&&(e.substr(oi,4).toLowerCase()===Sr?(t=e.substr(oi,4),oi+=4):(t=we,0===ui&&a(Ir)),t===we&&(e.substr(oi,4).toLowerCase()===Tr?(t=e.substr(oi,4),oi+=4):(t=we,0===ui&&a(Nr)),t===we&&(e.substr(oi,3).toLowerCase()===Dr?(t=e.substr(oi,3),oi+=3):(t=we,0===ui&&a(Br))))),ui--,t===we&&(r=we,0===ui&&a(Er)),t}function I(){var t,r;return ui++,t=oi,e.substr(oi,3).toLowerCase()===Hr?(r=e.substr(oi,3),oi+=3):(r=we,0===ui&&a(Rr)),r===we&&(e.substr(oi,4).toLowerCase()===Wr?(r=e.substr(oi,4),oi+=4):(r=we,0===ui&&a(Fr)),r===we&&(e.substr(oi,3).toLowerCase()===Mr?(r=e.substr(oi,3),oi+=3):(r=we,0===ui&&a(Gr)),r===we&&(e.substr(oi,5).toLowerCase()===Xr?(r=e.substr(oi,5),oi+=5):(r=we,0===ui&&a(qr)),r===we&&(e.substr(oi,3).toLowerCase()===zr?(r=e.substr(oi,3),oi+=3):(r=we,0===ui&&a(Ur)),r===we&&(e.substr(oi,3).toLowerCase()===Pr?(r=e.substr(oi,3),oi+=3):(r=we,0===ui&&a(Vr)),r===we&&(e.substr(oi,6).toLowerCase()===$r?(r=e.substr(oi,6),oi+=6):(r=we,0===ui&&a(Kr)),r===we&&(e.substr(oi,3).toLowerCase()===Zr?(r=e.substr(oi,3),oi+=3):(r=we,0===ui&&a(Jr)),r===we&&(e.substr(oi,8).toLowerCase()===Qr?(r=e.substr(oi,8),oi+=8):(r=we,0===ui&&a(Yr)),r===we&&(e.substr(oi,6).toLowerCase()===en?(r=e.substr(oi,6),oi+=6):(r=we,0===ui&&a(tn)),r===we&&(e.substr(oi,8).toLowerCase()===rn?(r=e.substr(oi,8),oi+=8):(r=we,0===ui&&a(nn)),r===we&&(e.substr(oi,6).toLowerCase()===on?(r=e.substr(oi,6),oi+=6):(r=we,0===ui&&a(an)),r===we&&(e.substr(oi,4).toLowerCase()===cn?(r=e.substr(oi,4),oi+=4):(r=we,0===ui&&a(sn)),r===we&&(e.substr(oi,3).toLowerCase()===un?(r=e.substr(oi,3),oi+=3):(r=we,0===ui&&a(ln)),r===we&&(e.substr(oi,3).toLowerCase()===pn?(r=e.substr(oi,3),oi+=3):(r=we,0===ui&&a(fn)))))))))))))))),r!==we&&(ii=t,r=dn(r)),t=r,ui--,t===we&&(r=we,0===ui&&a(Or)),t}function T(){var t,r,n,o,i,c;for(t=oi,r=oi,n=[],o=oi,i=N(),i!==we?(44===e.charCodeAt(oi)?(c=He,oi++):(c=we,0===ui&&a(Re)),c!==we?(ii=o,i=dt(i),o=i):(oi=o,o=we)):(oi=o,o=we);o!==we;)n.push(o),o=oi,i=N(),i!==we?(44===e.charCodeAt(oi)?(c=He,oi++):(c=we,0===ui&&a(Re)),c!==we?(ii=o,i=dt(i),o=i):(oi=o,o=we)):(oi=o,o=we);return n!==we?(o=oi,i=N(),i!==we&&(ii=o,i=dt(i)),o=i,o!==we?(n=[n,o],r=n):(oi=r,r=we)):(oi=r,r=we),r!==we&&(ii=t,r=Ge(r)),t=r}function N(){var t,r,n,o,i,c,s,u;return t=oi,r=$(),r!==we?(n=D(),n!==we?(o=$(),o!==we?(61===e.charCodeAt(oi)?(i=Ve,oi++):(i=we,0===ui&&a($e)),i!==we?(c=$(),c!==we?(s=H(),s!==we?(u=$(),u!==we?(ii=t,r=hn(n,s),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t}function D(){var t,r;return ui++,e.substr(oi,5).toLowerCase()===mn?(t=e.substr(oi,5),oi+=5):(t=we,0===ui&&a(bn)),t===we&&(e.substr(oi,5).toLowerCase()===yn?(t=e.substr(oi,5),oi+=5):(t=we,0===ui&&a(vn)),t===we&&(e.substr(oi,2).toLowerCase()===xn?(t=e.substr(oi,2),oi+=2):(t=we,0===ui&&a(wn)),t===we&&(e.substr(oi,3).toLowerCase()===Cn?(t=e.substr(oi,3),oi+=3):(t=we,0===ui&&a(kn)),t===we&&(e.substr(oi,9).toLowerCase()===_n?(t=e.substr(oi,9),oi+=9):(t=we,0===ui&&a(An)),t===we&&(e.substr(oi,10).toLowerCase()===En?(t=e.substr(oi,10),oi+=10):(t=we,0===ui&&a(Ln)),t===we&&(e.substr(oi,9).toLowerCase()===jn?(t=e.substr(oi,9),oi+=9):(t=we,0===ui&&a(Sn)),t===we&&(e.substr(oi,10).toLowerCase()===In?(t=e.substr(oi,10),oi+=10):(t=we,0===ui&&a(Tn)),t===we&&(e.substr(oi,11).toLowerCase()===Nn?(t=e.substr(oi,11),oi+=11):(t=we,0===ui&&a(Dn)),t===we&&(e.substr(oi,12).toLowerCase()===Bn?(t=e.substr(oi,12),oi+=12):(t=we,0===ui&&a(On)),t===we&&(e.substr(oi,12).toLowerCase()===Hn?(t=e.substr(oi,12),oi+=12):(t=we,0===ui&&a(Rn)),t===we&&(e.substr(oi,13).toLowerCase()===Wn?(t=e.substr(oi,13),oi+=13):(t=we,0===ui&&a(Fn)),t===we&&(e.substr(oi,12).toLowerCase()===Mn?(t=e.substr(oi,12),oi+=12):(t=we,0===ui&&a(Gn)),t===we&&(e.substr(oi,13).toLowerCase()===Xn?(t=e.substr(oi,13),oi+=13):(t=we,0===ui&&a(qn)),t===we&&(e.substr(oi,14).toLowerCase()===zn?(t=e.substr(oi,14),oi+=14):(t=we,0===ui&&a(Un)),t===we&&(e.substr(oi,15).toLowerCase()===Pn?(t=e.substr(oi,15),oi+=15):(t=we,0===ui&&a(Vn)),t===we&&(e.substr(oi,7).toLowerCase()===$n?(t=e.substr(oi,7),oi+=7):(t=we,0===ui&&a(Kn)))))))))))))))))),ui--,t===we&&(r=we,0===ui&&a(gn)),t}function B(){var t,r,n,o;return ui++,t=oi,34===e.charCodeAt(oi)?(r=Jn,oi++):(r=we,0===ui&&a(Qn)),r!==we?(n=O(),n!==we?(34===e.charCodeAt(oi)?(o=Jn,oi++):(o=we,0===ui&&a(Qn)),o!==we?(ii=t,r=Yn(n),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),ui--,t===we&&(r=we,0===ui&&a(Zn)),t}function O(){var t,r,n,o;for(t=[],r=oi,n=oi,ui++,34===e.charCodeAt(oi)?(o=Jn,oi++):(o=we,0===ui&&a(Qn)),ui--,o===we?n=void 0:(oi=n,n=we),n!==we?(e.substr(oi,2)===eo?(o=eo,oi+=2):(o=we,0===ui&&a(to)),o===we&&(e.length>oi?(o=e.charAt(oi),oi++):(o=we,0===ui&&a(ro))),o!==we?(ii=r,n=no(o),r=n):(oi=r,r=we)):(oi=r,r=we);r!==we;)t.push(r),r=oi,n=oi,ui++,34===e.charCodeAt(oi)?(o=Jn,oi++):(o=we,0===ui&&a(Qn)),ui--,o===we?n=void 0:(oi=n,n=we),n!==we?(e.substr(oi,2)===eo?(o=eo,oi+=2):(o=we,0===ui&&a(to)),o===we&&(e.length>oi?(o=e.charAt(oi),oi++):(o=we,0===ui&&a(ro))),o!==we?(ii=r,n=no(o),r=n):(oi=r,r=we)):(oi=r,r=we);return t}function H(){var e,t;return ui++,e=R(),e===we&&(e=B()),ui--,e===we&&(t=we,0===ui&&a(oo)),e}function R(){var t,r,n;if(t=oi,r=[],io.test(e.charAt(oi))?(n=e.charAt(oi),oi++):(n=we,0===ui&&a(ao)),n!==we)for(;n!==we;)r.push(n),io.test(e.charAt(oi))?(n=e.charAt(oi),oi++):(n=we,0===ui&&a(ao));else r=we;return r!==we&&(ii=t,r=co(r)),t=r}function W(){var t,r;return ui++,t=oi,uo.test(e.charAt(oi))?(r=e.charAt(oi),oi++):(r=we,0===ui&&a(lo)),r!==we&&(ii=t,r=no(r)),t=r,ui--,t===we&&(r=we,0===ui&&a(so)),t}function F(){var t,r;return ui++,t=oi,fo.test(e.charAt(oi))?(r=e.charAt(oi),oi++):(r=we,0===ui&&a(ho)),r!==we&&(ii=t,r=no(r)),t=r,ui--,t===we&&(r=we,0===ui&&a(po)),t}function M(){var t;return e.substr(oi,2)===go?(t=go,oi+=2):(t=we,0===ui&&a(mo)),t}function G(){var t;return e.substr(oi,2)===bo?(t=bo,oi+=2):(t=we,0===ui&&a(yo)),t}function X(){var t,r,n;return t=oi,r=oi,ui++,e.substr(oi,2)===bo?(n=bo,oi+=2):(n=we,0===ui&&a(yo)),ui--,n===we?r=void 0:(oi=r,r=we),r!==we?(e.length>oi?(n=e.charAt(oi),oi++):(n=we,0===ui&&a(ro)),n!==we?(ii=t,r=no(n),t=r):(oi=t,t=we)):(oi=t,t=we),t}function q(){var e,t,r,n;if(e=oi,t=M(),t!==we){for(r=[],n=X();n!==we;)r.push(n),n=X();r!==we?(n=G(),n!==we?(ii=e,t=vo(t,r,n),e=t):(oi=e,e=we)):(oi=e,e=we)}else oi=e,e=we;return e}function z(){var t;return e.substr(oi,2)===xo?(t=xo,oi+=2):(t=we,0===ui&&a(wo)),t===we&&(35===e.charCodeAt(oi)?(t=Co,oi++):(t=we,0===ui&&a(ko))),t}function U(){var t;return _o.test(e.charAt(oi))?(t=e.charAt(oi),oi++):(t=we,0===ui&&a(Ao)),t}function P(){var e,t,r,n;if(e=oi,t=z(),t!==we){for(r=[],n=U();n!==we;)r.push(n),n=U();r!==we?(ii=e,t=Eo(t,r),e=t):(oi=e,e=we)}else oi=e,e=we;return e}function V(){var e,t;return ui++,e=P(),e===we&&(e=q()),ui--,e===we&&(t=we,0===ui&&a(Lo)),e}function $(){var e,t;for(e=[],t=W(),t===we&&(t=F(),t===we&&(t=V()));t!==we;)e.push(t),t=W(),t===we&&(t=F(),t===we&&(t=V()));return e}function K(){var e,t;return ui++,e=oi,t=Z(),t!==we&&(ii=e,t=So(t)),e=t,e===we&&(e=oi,t=J(),t!==we&&(ii=e,t=Io(t)),e=t),ui--,e===we&&(t=we,0===ui&&a(jo)),e}function Z(){var t,r,n,o;return t=oi,34===e.charCodeAt(oi)?(r=Jn,oi++):(r=we,0===ui&&a(Qn)),r!==we?(n=J(),n!==we?(34===e.charCodeAt(oi)?(o=Jn,oi++):(o=we,0===ui&&a(Qn)),o!==we?(ii=t,r=To(n),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t}function J(){var e;return e=Y(),e===we&&(e=Q()),e}function Q(){var t,r,n;if(t=oi,r=[],No.test(e.charAt(oi))?(n=e.charAt(oi),oi++):(n=we,0===ui&&a(Do)),n!==we)for(;n!==we;)r.push(n),No.test(e.charAt(oi))?(n=e.charAt(oi),oi++):(n=we,0===ui&&a(Do));else r=we;return r!==we&&(ii=t,r=Bo(r)),t=r}function Y(){var t,r,n,o,i;return t=oi,r=oi,n=Q(),n!==we?(46===e.charCodeAt(oi)?(o=Oo,oi++):(o=we,0===ui&&a(Ho)),o!==we?(i=Q(),i!==we?(n=[n,o,i],r=n):(oi=r,r=we)):(oi=r,r=we)):(oi=r,r=we),r!==we&&(ii=t,r=Ro(r)),t=r}function ee(){var e,t;return ui++,e=oi,t=te(),t!==we&&(ii=e,t=Fo(t)),e=t,e===we&&(e=oi,t=re(),t!==we&&(ii=e,t=Mo(t)),e=t),ui--,e===we&&(t=we,0===ui&&a(Wo)),e}function te(){var t,r,n,o;return t=oi,34===e.charCodeAt(oi)?(r=Jn,oi++):(r=we,0===ui&&a(Qn)),r!==we?(n=re(),n!==we?(34===e.charCodeAt(oi)?(o=Jn,oi++):(o=we,0===ui&&a(Qn)),o!==we?(ii=t,r=So(n),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t}function re(){var t;return e.substr(oi,4).toLowerCase()===Go?(t=e.substr(oi,4),oi+=4):(t=we,0===ui&&a(Xo)),t===we&&(e.substr(oi,5).toLowerCase()===qo?(t=e.substr(oi,5),oi+=5):(t=we,0===ui&&a(zo)),t===we&&(e.substr(oi,2).toLowerCase()===Uo?(t=e.substr(oi,2),oi+=2):(t=we,0===ui&&a(Po)),t===we&&(e.substr(oi,3).toLowerCase()===Vo?(t=e.substr(oi,3),oi+=3):(t=we,0===ui&&a($o)),t===we&&(48===e.charCodeAt(oi)?(t=Ko,oi++):(t=we,0===ui&&a(Zo)),t===we&&(49===e.charCodeAt(oi)?(t=Jo,oi++):(t=we,0===ui&&a(Qo))))))),t}function ne(){var e,t;return ui++,e=oe(),e===we&&(e=ie()),ui--,e===we&&(t=we,0===ui&&a(Yo)),e}function oe(){var t,r,n,o;return t=oi,34===e.charCodeAt(oi)?(r=Jn,oi++):(r=we,0===ui&&a(Qn)),r!==we?(n=ie(),n!==we?(34===e.charCodeAt(oi)?(o=Jn,oi++):(o=we,0===ui&&a(Qn)),o!==we?(ii=t,r=So(n),t=r):(oi=t,t=we)):(oi=t,t=we)):(oi=t,t=we),t}function ie(){var t,r;return t=oi,r=J(),r!==we&&(ii=t,r=ei(r)),t=r,t===we&&(t=oi,e.substr(oi,4).toLowerCase()===ti?(r=e.substr(oi,4),oi+=4):(r=we,0===ui&&a(ri)),r!==we&&(ii=t,r=ni(r)),t=r),t}function ae(e,t){t&&Object.getOwnPropertyNames(t).forEach(function(r){e[r]=t[r]})}function ce(e,t){return e=e?e:{},ae(e,t),e}function se(e){var t={};return e[0].forEach(function(e){t=ce(t,e)}),ce(t,e[1])}function ue(e){return["true","on","1"].indexOf(e.toLowerCase())>-1}function le(e,t){var r={};return r[e.toLowerCase()]=t,r}function pe(e,t){return void 0===t||"*"===t||e.entities.some(function(e){return e.name===t})}function fe(e){return["box","abox","rbox","note","msc","hscale","width","arcgradient","wordwraparcs","label","color","idurl","id","url","linecolor","linecolour","textcolor","textcolour","textbgcolor","textbgcolour","arclinecolor","arclinecolour","arctextcolor","arctextcolour","arctextbgcolor","arctextbgcolour","arcskip"].indexOf(e)>-1}function de(e,t){return"Entity '"+e+"' in arc '"+t.from+" "+t.kind+" "+t.to+"' is not defined."}function he(e,t){this.name="EntityNotDefinedError",this.message=de(e,t),t.location&&(this.location=t.location,this.location.start.line++,this.location.end.line++)}function ge(e,t){return e||(e={},e.entities=[]),t&&t.arcs&&t.arcs.forEach(function(t){t.forEach(function(t){if(t.from&&!pe(e,t.from))throw new he(t.from,t);if(t.to&&!pe(e,t.to))throw new he(t.to,t);t.location&&delete t.location,t.arcs&&ge(e,t)})}),e}function me(e){return e&&e.options?!!e.options.watermark||!!e.options.width&&"auto"===e.options.width:!1}function be(e){return e&&e.arcs?e.arcs.some(function(e){return e.some(function(e){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(e.kind)>-1})}):!1}function ye(e,t){var r=me(e),n=be(t);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}var ve,xe=arguments.length>1?arguments[1]:{},we={},Ce={program:s},ke=s,_e="{",Ae={type:"literal",value:"{",description:'"{"'},Ee="}",Le={type:"literal",value:"}",description:'"}"'},je=function(e,t){t[1]=ge(t[1],t[2]);var r=ce(t[0],ce(t[1],t[2]));return r=ce({meta:ye(t[0],t[2])},r),e.length>0&&(r=ce({precomment:e},r)),r},Se="msc",Ie={type:"literal",value:"msc",description:'"msc"'},Te="xu",Ne={type:"literal",value:"xu",description:'"xu"'},De=function(e){return{options:e}},Be=function(e){return{entities:e}},Oe=function(e){return{arcs:e}},He=",",Re={type:"literal",value:",",description:'","'},We=function(e){return e},Fe=";",Me={type:"literal",value:";",description:'";"'},Ge=function(e){return se(e)},Xe={type:"other",description:"option"},qe="hscale",ze={type:"literal",value:"hscale",description:'"hscale"'},Ue="arcgradient",Pe={type:"literal",value:"arcgradient",description:'"arcgradient"'},Ve="=",$e={type:"literal",value:"=",description:'"="'},Ke=function(e,t){return le(e,t)},Ze="width",Je={type:"literal",value:"width",description:'"width"'},Qe="wordwraparcs",Ye={type:"literal",value:"wordwraparcs",description:'"wordwraparcs"'},et=function(e,t){var r={};return r[e.toLowerCase()]=ue(t),r},tt="watermark",rt={type:"literal",value:"watermark",description:'"watermark"'},nt=function(e){return e},ot=function(e){return e[0].push(e[1]),e[0]},it={type:"other",description:"entity"},at="[",ct={type:"literal",value:"[",description:'"["'},st="]",ut={type:"literal",value:"]",description:'"]"'},lt=function(e,t){return t},pt=function(e,t){return ce({name:e},t)},ft=function(e,t){return fe(e)&&n("MscGen keywords aren't allowed as entity names (embed them in quotes if you need them)"),ce({name:e},t)},dt=function(e){return e},ht=function(e){return[e]},gt=function(e){return e[0].push(e[1][0]),e[0]},mt=function(e,t){return t},bt=function(e,t){return ce(e,t)},yt=function(e){return{kind:e}},vt=function(e,t,n){return{kind:t,from:e,to:n,location:r()}},xt="*",wt={type:"literal",value:"*",description:'"*"'},Ct=function(e,t){return{kind:e,from:"*",to:t,location:r()}},kt=function(e,t){return{kind:t,from:e,to:"*",location:r()}},_t=function(e,t,r,n){return n},At=function(e,t,n,o,i){var a={kind:t,from:e,to:n,location:r(),arcs:i};return ce(a,o)},Et={type:"other",description:"empty row"},Lt="|||",jt={type:"literal",value:"|||",description:'"|||"'},St="...",It={type:"literal",value:"...",description:'"..."'},Tt={type:"other",description:"---"},Nt="---",Dt={type:"literal",value:"---",description:'"---"'},Bt=function(e){return e.toLowerCase()},Ot={type:"other",description:"bi-directional arrow"},Ht="--",Rt={type:"literal",value:"--",description:'"--"'},Wt="<->",Ft={type:"literal",value:"<->",description:'"<->"'},Mt="==",Gt={type:"literal",value:"==",description:'"=="'},Xt="<<=>>",qt={type:"literal",value:"<<=>>",description:'"<<=>>"'},zt="<=>",Ut={type:"literal",value:"<=>",description:'"<=>"'},Pt="..",Vt={type:"literal",value:"..",description:'".."'},$t="<<>>",Kt={type:"literal",value:"<<>>",description:'"<<>>"'},Zt="::",Jt={type:"literal",value:"::",description:'"::"'},Qt="<:>",Yt={type:"literal",value:"<:>",description:'"<:>"'},er={type:"other",description:"left to right arrow"},tr="->",rr={type:"literal",value:"->",description:'"->"'},nr="=>>",or={type:"literal",value:"=>>",description:'"=>>"'},ir="=>",ar={type:"literal",value:"=>",description:'"=>"'},cr=">>",sr={type:"literal",value:">>",description:'">>"'},ur=":>",lr={type:"literal",value:":>",description:'":>"'},pr="-x",fr={type:"literal",value:"-x",description:'"-x"'},dr={type:"other",description:"right to left arrow"},hr="<-",gr={type:"literal",value:"<-",description:'"<-"'},mr="<<=",br={type:"literal",value:"<<=",description:'"<<="'},yr="<=",vr={type:"literal",value:"<=",description:'"<="'},xr="<<",wr={type:"literal",value:"<<",description:'"<<"'},Cr="<:",kr={type:"literal",value:"<:",description:'"<:"'},_r="x-",Ar={type:"literal",value:"x-",description:'"x-"'},Er={type:"other",description:"box"},Lr="note",jr={type:"literal",value:"note",description:'"note"'},Sr="abox",Ir={type:"literal",value:"abox",description:'"abox"'},Tr="rbox",Nr={type:"literal",value:"rbox",description:'"rbox"'},Dr="box",Br={type:"literal",value:"box",description:'"box"'},Or={type:"other",description:"inline expression"},Hr="alt",Rr={type:"literal",value:"alt",description:'"alt"'},Wr="else",Fr={type:"literal",value:"else",description:'"else"'},Mr="opt",Gr={type:"literal",value:"opt",description:'"opt"'},Xr="break",qr={type:"literal",value:"break",description:'"break"'},zr="par",Ur={type:"literal",value:"par",description:'"par"'},Pr="seq",Vr={type:"literal",value:"seq",description:'"seq"'},$r="strict",Kr={type:"literal",value:"strict",description:'"strict"'},Zr="neg",Jr={type:"literal",value:"neg",description:'"neg"'},Qr="critical",Yr={type:"literal",value:"critical",description:'"critical"'},en="ignore",tn={type:"literal",value:"ignore",description:'"ignore"'},rn="consider",nn={type:"literal",value:"consider",description:'"consider"'},on="assert",an={type:"literal",value:"assert",description:'"assert"'},cn="loop",sn={type:"literal",value:"loop",description:'"loop"'},un="ref",ln={type:"literal",value:"ref",description:'"ref"'},pn="exc",fn={type:"literal",value:"exc",description:'"exc"'},dn=function(e){return e.toLowerCase()},hn=function(e,t){var r={};return r[e.toLowerCase().replace("colour","color")]=t,r},gn={type:"other",description:"attribute name"},mn="label",bn={type:"literal",value:"label",description:'"label"'},yn="idurl",vn={type:"literal",value:"idurl",description:'"idurl"'},xn="id",wn={type:"literal",value:"id",description:'"id"'},Cn="url",kn={type:"literal",value:"url",description:'"url"'},_n="linecolor",An={type:"literal",value:"linecolor",description:'"linecolor"'},En="linecolour",Ln={type:"literal",value:"linecolour",description:'"linecolour"'},jn="textcolor",Sn={type:"literal",value:"textcolor",description:'"textcolor"'},In="textcolour",Tn={type:"literal",value:"textcolour",description:'"textcolour"'},Nn="textbgcolor",Dn={type:"literal",value:"textbgcolor",description:'"textbgcolor"'},Bn="textbgcolour",On={type:"literal",value:"textbgcolour",description:'"textbgcolour"'},Hn="arclinecolor",Rn={type:"literal",value:"arclinecolor",description:'"arclinecolor"'},Wn="arclinecolour",Fn={type:"literal",value:"arclinecolour",
description:'"arclinecolour"'},Mn="arctextcolor",Gn={type:"literal",value:"arctextcolor",description:'"arctextcolor"'},Xn="arctextcolour",qn={type:"literal",value:"arctextcolour",description:'"arctextcolour"'},zn="arctextbgcolor",Un={type:"literal",value:"arctextbgcolor",description:'"arctextbgcolor"'},Pn="arctextbgcolour",Vn={type:"literal",value:"arctextbgcolour",description:'"arctextbgcolour"'},$n="arcskip",Kn={type:"literal",value:"arcskip",description:'"arcskip"'},Zn={type:"other",description:"double quoted string"},Jn='"',Qn={type:"literal",value:'"',description:'"\\""'},Yn=function(e){return e.join("")},eo='\\"',to={type:"literal",value:'\\"',description:'"\\\\\\""'},ro={type:"any",description:"any character"},no=function(e){return e},oo={type:"other",description:"identifier"},io=/^[A-Za-z_0-9]/,ao={type:"class",value:"[A-Za-z_0-9]",description:"[A-Za-z_0-9]"},co=function(e){return e.join("")},so={type:"other",description:"whitespace"},uo=/^[ \t]/,lo={type:"class",value:"[ \\t]",description:"[ \\t]"},po={type:"other",description:"lineend"},fo=/^[\r\n]/,ho={type:"class",value:"[\\r\\n]",description:"[\\r\\n]"},go="/*",mo={type:"literal",value:"/*",description:'"/*"'},bo="*/",yo={type:"literal",value:"*/",description:'"*/"'},vo=function(e,t,r){return e+t.join("")+r},xo="//",wo={type:"literal",value:"//",description:'"//"'},Co="#",ko={type:"literal",value:"#",description:'"#"'},_o=/^[^\r\n]/,Ao={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},Eo=function(e,t){return e+t.join("")},Lo={type:"other",description:"comment"},jo={type:"other",description:"number"},So=function(e){return e},Io=function(e){return e.toString()},To=function(e){return e.toString()},No=/^[0-9]/,Do={type:"class",value:"[0-9]",description:"[0-9]"},Bo=function(e){return parseInt(e.join(""),10)},Oo=".",Ho={type:"literal",value:".",description:'"."'},Ro=function(e){return parseFloat(e.join(""))},Wo={type:"other",description:"boolean"},Fo=function(e){return e},Mo=function(e){return e.toString()},Go="true",Xo={type:"literal",value:"true",description:'"true"'},qo="false",zo={type:"literal",value:"false",description:'"false"'},Uo="on",Po={type:"literal",value:"on",description:'"on"'},Vo="off",$o={type:"literal",value:"off",description:'"off"'},Ko="0",Zo={type:"literal",value:"0",description:'"0"'},Jo="1",Qo={type:"literal",value:"1",description:'"1"'},Yo={type:"other",description:"size"},ei=function(e){return e.toString()},ti="auto",ri={type:"literal",value:"auto",description:'"auto"'},ni=function(e){return e.toLowerCase()},oi=0,ii=0,ai=[{line:1,column:1,seenCR:!1}],ci=0,si=[],ui=0;if("startRule"in xe){if(!(xe.startRule in Ce))throw new Error("Can't start parsing from rule \""+xe.startRule+'".');ke=Ce[xe.startRule]}if(ve=ke(),ve!==we&&oi===e.length)return ve;throw ve!==we&&oi<e.length&&a({type:"end",description:"end of input"}),c(null,si,ci<e.length?e.charAt(ci):null,ci<e.length?i(ci,ci+1):i(ci,ci))}return e(t,Error),{SyntaxError:t,parse:r}}),r("lib/mscgenjs-core/parse/msgennyparser",[],function(){"use strict";function e(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function t(e,r,n,o){this.message=e,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function r(e){function r(t){var r,n,o=ho[t];if(o)return o;for(r=t-1;!ho[r];)r--;for(o=ho[r],o={line:o.line,column:o.column,seenCR:o.seenCR};t>r;)n=e.charAt(r),"\n"===n?(o.seenCR||o.line++,o.column=1,o.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(o.line++,o.column=1,o.seenCR=!0):(o.column++,o.seenCR=!1),r++;return ho[t]=o,o}function n(e,t){var n=r(e),o=r(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:o.line,column:o.column}}}function o(e){go>po||(po>go&&(go=po,mo=[]),mo.push(e))}function i(e,r,n,o){function i(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function a(e,t){function r(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}var n,o,i,a=new Array(e.length);for(i=0;i<e.length;i++)a[i]=e[i].description;return n=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],o=t?'"'+r(t)+'"':"end of input","Expected "+n+" but "+o+" found."}return null!==r&&i(r),new t(null!==e?e:a(r,n),r,n,o)}function a(){var e,t,r,n;return e=po,t=z(),t!==ge?(r=c(),r!==ge?(n=z(),n!==ge?(fo=e,t=ye(t,r),e=t):(po=e,e=ge)):(po=e,e=ge)):(po=e,e=ge),e}function c(){var e,t,r,n,o;return e=po,t=po,r=s(),r!==ge&&(fo=t,r=ve(r)),t=r,t===ge&&(t=null),t!==ge?(r=po,n=l(),n!==ge&&(fo=r,n=xe(n)),r=n,r===ge&&(r=null),r!==ge?(n=po,o=f(),o!==ge&&(fo=n,o=we(o)),n=o,n===ge&&(n=null),n!==ge?(t=[t,r,n],e=t):(po=e,e=ge)):(po=e,e=ge)):(po=e,e=ge),e}function s(){var t,r,n,i,a,c;for(t=po,r=po,n=[],i=po,a=u(),a!==ge?(44===e.charCodeAt(po)?(c=Ce,po++):(c=ge,0===bo&&o(ke)),c!==ge?(fo=i,a=_e(a),i=a):(po=i,i=ge)):(po=i,i=ge);i!==ge;)n.push(i),i=po,a=u(),a!==ge?(44===e.charCodeAt(po)?(c=Ce,po++):(c=ge,0===bo&&o(ke)),c!==ge?(fo=i,a=_e(a),i=a):(po=i,i=ge)):(po=i,i=ge);return n!==ge?(i=po,a=u(),a!==ge?(59===e.charCodeAt(po)?(c=Ae,po++):(c=ge,0===bo&&o(Ee)),c!==ge?(fo=i,a=_e(a),i=a):(po=i,i=ge)):(po=i,i=ge),i!==ge?(n=[n,i],r=n):(po=r,r=ge)):(po=r,r=ge),r!==ge&&(fo=t,r=Le(r)),t=r}function u(){var t,r,n,i,a,c,s,u;return t=po,r=z(),r!==ge?(e.substr(po,6).toLowerCase()===je?(n=e.substr(po,6),po+=6):(n=ge,0===bo&&o(Se)),n===ge&&(e.substr(po,11).toLowerCase()===Ie?(n=e.substr(po,11),po+=11):(n=ge,0===bo&&o(Te))),n!==ge?(i=z(),i!==ge?(61===e.charCodeAt(po)?(a=Ne,po++):(a=ge,0===bo&&o(De)),a!==ge?(c=z(),c!==ge?(s=U(),s!==ge?(u=z(),u!==ge?(fo=t,r=Be(n,s),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge),t===ge&&(t=po,r=z(),r!==ge?(e.substr(po,5).toLowerCase()===Oe?(n=e.substr(po,5),po+=5):(n=ge,0===bo&&o(He)),n!==ge?(i=z(),i!==ge?(61===e.charCodeAt(po)?(a=Ne,po++):(a=ge,0===bo&&o(De)),a!==ge?(c=z(),c!==ge?(s=Y(),s!==ge?(u=z(),u!==ge?(fo=t,r=Be(n,s),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge),t===ge&&(t=po,r=z(),r!==ge?(e.substr(po,12).toLowerCase()===Re?(n=e.substr(po,12),po+=12):(n=ge,0===bo&&o(We)),n!==ge?(i=z(),i!==ge?(61===e.charCodeAt(po)?(a=Ne,po++):(a=ge,0===bo&&o(De)),a!==ge?(c=z(),c!==ge?(s=Z(),s!==ge?(u=z(),u!==ge?(fo=t,r=Fe(n,s),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge),t===ge&&(t=po,r=z(),r!==ge?(e.substr(po,9).toLowerCase()===Me?(n=e.substr(po,9),po+=9):(n=ge,0===bo&&o(Ge)),n!==ge?(i=z(),i!==ge?(61===e.charCodeAt(po)?(a=Ne,po++):(a=ge,0===bo&&o(De)),a!==ge?(c=z(),c!==ge?(s=S(),s!==ge?(u=z(),u!==ge?(fo=t,r=Be(n,s),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)))),t}function l(){var t,r,n,i,a,c;for(t=po,r=po,n=[],i=po,a=p(),a!==ge?(44===e.charCodeAt(po)?(c=Ce,po++):(c=ge,0===bo&&o(ke)),c!==ge?(fo=i,a=Xe(a),i=a):(po=i,i=ge)):(po=i,i=ge);i!==ge;)n.push(i),i=po,a=p(),a!==ge?(44===e.charCodeAt(po)?(c=Ce,po++):(c=ge,0===bo&&o(ke)),c!==ge?(fo=i,a=Xe(a),i=a):(po=i,i=ge)):(po=i,i=ge);return n!==ge?(i=po,a=p(),a!==ge?(59===e.charCodeAt(po)?(c=Ae,po++):(c=ge,0===bo&&o(Ee)),c!==ge?(fo=i,a=Xe(a),i=a):(po=i,i=ge)):(po=i,i=ge),i!==ge?(n=[n,i],r=n):(po=r,r=ge)):(po=r,r=ge),r!==ge&&(fo=t,r=qe(r)),t=r}function p(){var t,r,n,i,a,c,s,u,l;return bo++,t=po,r=z(),r!==ge?(n=D(),n!==ge?(i=z(),i!==ge?(a=po,58===e.charCodeAt(po)?(c=Ue,po++):(c=ge,0===bo&&o(Pe)),c!==ge?(s=z(),s!==ge?(u=j(),u!==ge?(l=z(),l!==ge?(fo=a,c=Ve(n,u),a=c):(po=a,a=ge)):(po=a,a=ge)):(po=a,a=ge)):(po=a,a=ge),a===ge&&(a=null),a!==ge?(fo=t,r=$e(n,a),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge),bo--,t===ge&&(r=ge,0===bo&&o(ze)),t}function f(){var t,r,n,i,a;if(t=[],r=po,n=d(),n!==ge?(i=z(),i!==ge?(59===e.charCodeAt(po)?(a=Ae,po++):(a=ge,0===bo&&o(Ee)),a!==ge?(fo=r,n=Ke(n),r=n):(po=r,r=ge)):(po=r,r=ge)):(po=r,r=ge),r!==ge)for(;r!==ge;)t.push(r),r=po,n=d(),n!==ge?(i=z(),i!==ge?(59===e.charCodeAt(po)?(a=Ae,po++):(a=ge,0===bo&&o(Ee)),a!==ge?(fo=r,n=Ke(n),r=n):(po=r,r=ge)):(po=r,r=ge)):(po=r,r=ge);else t=ge;return t}function d(){var t,r,n,i,a,c;for(t=po,r=po,n=[],i=po,a=h(),a!==ge?(44===e.charCodeAt(po)?(c=Ce,po++):(c=ge,0===bo&&o(ke)),c!==ge?(fo=i,a=Ke(a),i=a):(po=i,i=ge)):(po=i,i=ge);i!==ge;)n.push(i),i=po,a=h(),a!==ge?(44===e.charCodeAt(po)?(c=Ce,po++):(c=ge,0===bo&&o(ke)),c!==ge?(fo=i,a=Ke(a),i=a):(po=i,i=ge)):(po=i,i=ge);return n!==ge?(i=po,a=h(),a!==ge&&(fo=i,a=Ze(a)),i=a,i!==ge?(n=[n,i],r=n):(po=r,r=ge)):(po=r,r=ge),r!==ge&&(fo=t,r=Je(r)),t=r}function h(){var e;return e=g(),e===ge&&(e=v()),e}function g(){var t,r,n,i,a,c,s;return t=po,r=po,n=m(),n!==ge&&(fo=r,n=Qe(n)),r=n,r===ge&&(r=po,n=y(),n!==ge&&(fo=r,n=Ye(n)),r=n,r===ge&&(r=po,n=b(),n!==ge&&(fo=r,n=et(n)),r=n)),r!==ge?(n=po,58===e.charCodeAt(po)?(i=Ue,po++):(i=ge,0===bo&&o(Pe)),i!==ge?(a=z(),a!==ge?(c=j(),c!==ge?(s=z(),s!==ge?(fo=n,i=tt(r,c),n=i):(po=n,n=ge)):(po=n,n=ge)):(po=n,n=ge)):(po=n,n=ge),n===ge&&(n=null),n!==ge?(fo=t,r=rt(r,n),t=r):(po=t,t=ge)):(po=t,t=ge),t}function m(){var e,t,r,n;return e=po,t=z(),t!==ge?(r=x(),r!==ge?(n=z(),n!==ge?(fo=e,t=nt(r),e=t):(po=e,e=ge)):(po=e,e=ge)):(po=e,e=ge),e}function b(){var e,t,r,n;return e=po,t=z(),t!==ge?(r=w(),r!==ge?(n=z(),n!==ge?(fo=e,t=nt(r),e=t):(po=e,e=ge)):(po=e,e=ge)):(po=e,e=ge),e}function y(){var t,r,n,i,a,c,s,u;return t=po,r=z(),r!==ge?(n=D(),n!==ge?(i=z(),i!==ge?(a=C(),a!==ge?(c=z(),c!==ge?(s=D(),s!==ge?(u=z(),u!==ge?(fo=t,r=ot(n,a,s),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge),t===ge&&(t=po,r=z(),r!==ge?(42===e.charCodeAt(po)?(n=it,po++):(n=ge,0===bo&&o(at)),n!==ge?(i=z(),i!==ge?(a=A(),a!==ge?(c=z(),c!==ge?(s=D(),s!==ge?(u=z(),u!==ge?(fo=t,r=ct(a,s),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge),t===ge&&(t=po,r=z(),r!==ge?(n=D(),n!==ge?(i=z(),i!==ge?(a=_(),a!==ge?(c=z(),c!==ge?(42===e.charCodeAt(po)?(s=it,po++):(s=ge,0===bo&&o(at)),s!==ge?(u=z(),u!==ge?(fo=t,r=st(n,a),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge),t===ge&&(t=po,r=z(),r!==ge?(n=D(),n!==ge?(i=z(),i!==ge?(a=k(),a!==ge?(c=z(),c!==ge?(42===e.charCodeAt(po)?(s=it,po++):(s=ge,0===bo&&o(at)),s!==ge?(u=z(),u!==ge?(fo=t,r=st(n,a),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)))),t}function v(){var t,r,n,i,a,c,s,u,l,p,d,h,g,m,b;return t=po,r=z(),r!==ge?(n=D(),n!==ge?(i=z(),i!==ge?(a=L(),a!==ge?(c=z(),c!==ge?(s=D(),s!==ge?(u=z(),u!==ge?(l=po,58===e.charCodeAt(po)?(p=Ue,po++):(p=ge,0===bo&&o(Pe)),p!==ge?(d=z(),d!==ge?(h=j(),h!==ge?(g=z(),g!==ge?(fo=l,p=ut(n,a,s,h),l=p):(po=l,l=ge)):(po=l,l=ge)):(po=l,l=ge)):(po=l,l=ge),l===ge&&(l=null),l!==ge?(123===e.charCodeAt(po)?(p=lt,po++):(p=ge,0===bo&&o(pt)),p!==ge?(d=z(),d!==ge?(h=f(),h===ge&&(h=null),h!==ge?(g=z(),g!==ge?(125===e.charCodeAt(po)?(m=ft,po++):(m=ge,0===bo&&o(dt)),m!==ge?(b=z(),b!==ge?(fo=t,r=ht(n,a,s,l,h),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge),t}function x(){var t,r;return bo++,e.substr(po,3)===mt?(t=mt,po+=3):(t=ge,0===bo&&o(bt)),t===ge&&(e.substr(po,3)===yt?(t=yt,po+=3):(t=ge,0===bo&&o(vt))),bo--,t===ge&&(r=ge,0===bo&&o(gt)),t}function w(){var t,r;return bo++,e.substr(po,3)===wt?(t=wt,po+=3):(t=ge,0===bo&&o(Ct)),bo--,t===ge&&(r=ge,0===bo&&o(xt)),t}function C(){var e,t;return e=po,t=k(),t===ge&&(t=_(),t===ge&&(t=A(),t===ge&&(t=E()))),t!==ge&&(fo=e,t=kt(t)),e=t}function k(){var t,r;return bo++,e.substr(po,2)===At?(t=At,po+=2):(t=ge,0===bo&&o(Et)),t===ge&&(e.substr(po,3)===Lt?(t=Lt,po+=3):(t=ge,0===bo&&o(jt)),t===ge&&(e.substr(po,2)===St?(t=St,po+=2):(t=ge,0===bo&&o(It)),t===ge&&(e.substr(po,5)===Tt?(t=Tt,po+=5):(t=ge,0===bo&&o(Nt)),t===ge&&(e.substr(po,3)===Dt?(t=Dt,po+=3):(t=ge,0===bo&&o(Bt)),t===ge&&(e.substr(po,2)===Ot?(t=Ot,po+=2):(t=ge,0===bo&&o(Ht)),t===ge&&(e.substr(po,4)===Rt?(t=Rt,po+=4):(t=ge,0===bo&&o(Wt)),t===ge&&(e.substr(po,2)===Ft?(t=Ft,po+=2):(t=ge,0===bo&&o(Mt)),t===ge&&(e.substr(po,3)===Gt?(t=Gt,po+=3):(t=ge,0===bo&&o(Xt)))))))))),bo--,t===ge&&(r=ge,0===bo&&o(_t)),t}function _(){var t,r;return bo++,e.substr(po,2)===zt?(t=zt,po+=2):(t=ge,0===bo&&o(Ut)),t===ge&&(e.substr(po,3)===Pt?(t=Pt,po+=3):(t=ge,0===bo&&o(Vt)),t===ge&&(e.substr(po,2)===$t?(t=$t,po+=2):(t=ge,0===bo&&o(Kt)),t===ge&&(e.substr(po,2)===Zt?(t=Zt,po+=2):(t=ge,0===bo&&o(Jt)),t===ge&&(e.substr(po,2)===Qt?(t=Qt,po+=2):(t=ge,0===bo&&o(Yt)),t===ge&&(e.substr(po,2).toLowerCase()===er?(t=e.substr(po,2),po+=2):(t=ge,0===bo&&o(tr))))))),bo--,t===ge&&(r=ge,0===bo&&o(qt)),t}function A(){var t,r;return bo++,e.substr(po,2)===nr?(t=nr,po+=2):(t=ge,0===bo&&o(or)),t===ge&&(e.substr(po,3)===ir?(t=ir,po+=3):(t=ge,0===bo&&o(ar)),t===ge&&(e.substr(po,2)===cr?(t=cr,po+=2):(t=ge,0===bo&&o(sr)),t===ge&&(e.substr(po,2)===ur?(t=ur,po+=2):(t=ge,0===bo&&o(lr)),t===ge&&(e.substr(po,2)===pr?(t=pr,po+=2):(t=ge,0===bo&&o(fr)),t===ge&&(e.substr(po,2).toLowerCase()===dr?(t=e.substr(po,2),po+=2):(t=ge,0===bo&&o(hr))))))),bo--,t===ge&&(r=ge,0===bo&&o(rr)),t}function E(){var t,r;return bo++,e.substr(po,4).toLowerCase()===mr?(t=e.substr(po,4),po+=4):(t=ge,0===bo&&o(br)),t===ge&&(e.substr(po,4).toLowerCase()===yr?(t=e.substr(po,4),po+=4):(t=ge,0===bo&&o(vr)),t===ge&&(e.substr(po,4).toLowerCase()===xr?(t=e.substr(po,4),po+=4):(t=ge,0===bo&&o(wr)),t===ge&&(e.substr(po,3).toLowerCase()===Cr?(t=e.substr(po,3),po+=3):(t=ge,0===bo&&o(kr))))),bo--,t===ge&&(r=ge,0===bo&&o(gr)),t}function L(){var t,r;return bo++,t=po,e.substr(po,3).toLowerCase()===Ar?(r=e.substr(po,3),po+=3):(r=ge,0===bo&&o(Er)),r===ge&&(e.substr(po,4).toLowerCase()===Lr?(r=e.substr(po,4),po+=4):(r=ge,0===bo&&o(jr)),r===ge&&(e.substr(po,3).toLowerCase()===Sr?(r=e.substr(po,3),po+=3):(r=ge,0===bo&&o(Ir)),r===ge&&(e.substr(po,5).toLowerCase()===Tr?(r=e.substr(po,5),po+=5):(r=ge,0===bo&&o(Nr)),r===ge&&(e.substr(po,3).toLowerCase()===Dr?(r=e.substr(po,3),po+=3):(r=ge,0===bo&&o(Br)),r===ge&&(e.substr(po,3).toLowerCase()===Or?(r=e.substr(po,3),po+=3):(r=ge,0===bo&&o(Hr)),r===ge&&(e.substr(po,6).toLowerCase()===Rr?(r=e.substr(po,6),po+=6):(r=ge,0===bo&&o(Wr)),r===ge&&(e.substr(po,3).toLowerCase()===Fr?(r=e.substr(po,3),po+=3):(r=ge,0===bo&&o(Mr)),r===ge&&(e.substr(po,8).toLowerCase()===Gr?(r=e.substr(po,8),po+=8):(r=ge,0===bo&&o(Xr)),r===ge&&(e.substr(po,6).toLowerCase()===qr?(r=e.substr(po,6),po+=6):(r=ge,0===bo&&o(zr)),r===ge&&(e.substr(po,8).toLowerCase()===Ur?(r=e.substr(po,8),po+=8):(r=ge,0===bo&&o(Pr)),r===ge&&(e.substr(po,6).toLowerCase()===Vr?(r=e.substr(po,6),po+=6):(r=ge,0===bo&&o($r)),r===ge&&(e.substr(po,4).toLowerCase()===Kr?(r=e.substr(po,4),po+=4):(r=ge,0===bo&&o(Zr)),r===ge&&(e.substr(po,3).toLowerCase()===Jr?(r=e.substr(po,3),po+=3):(r=ge,0===bo&&o(Qr)),r===ge&&(e.substr(po,3).toLowerCase()===Yr?(r=e.substr(po,3),po+=3):(r=ge,0===bo&&o(en)))))))))))))))),r!==ge&&(fo=t,r=tn(r)),t=r,bo--,t===ge&&(r=ge,0===bo&&o(_r)),t}function j(){var e;return e=S(),e===ge&&(e=T()),e}function S(){var t,r,n,i;return bo++,t=po,34===e.charCodeAt(po)?(r=nn,po++):(r=ge,0===bo&&o(on)),r!==ge?(n=I(),n!==ge?(34===e.charCodeAt(po)?(i=nn,po++):(i=ge,0===bo&&o(on)),i!==ge?(fo=t,r=an(n),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge),bo--,t===ge&&(r=ge,0===bo&&o(rn)),t}function I(){var t,r,n,i;for(t=[],r=po,n=po,bo++,34===e.charCodeAt(po)?(i=nn,po++):(i=ge,0===bo&&o(on)),bo--,i===ge?n=void 0:(po=n,n=ge),n!==ge?(e.substr(po,2)===cn?(i=cn,po+=2):(i=ge,0===bo&&o(sn)),i===ge&&(e.length>po?(i=e.charAt(po),po++):(i=ge,0===bo&&o(un))),i!==ge?(fo=r,n=ln(i),r=n):(po=r,r=ge)):(po=r,r=ge);r!==ge;)t.push(r),r=po,n=po,bo++,34===e.charCodeAt(po)?(i=nn,po++):(i=ge,0===bo&&o(on)),bo--,i===ge?n=void 0:(po=n,n=ge),n!==ge?(e.substr(po,2)===cn?(i=cn,po+=2):(i=ge,0===bo&&o(sn)),i===ge&&(e.length>po?(i=e.charAt(po),po++):(i=ge,0===bo&&o(un))),i!==ge?(fo=r,n=ln(i),r=n):(po=r,r=ge)):(po=r,r=ge);return t}function T(){var e,t;return e=po,t=N(),t!==ge&&(fo=e,t=pn(t)),e=t}function N(){var t,r,n,i;for(t=[],r=po,n=po,bo++,44===e.charCodeAt(po)?(i=Ce,po++):(i=ge,0===bo&&o(ke)),i===ge&&(59===e.charCodeAt(po)?(i=Ae,po++):(i=ge,0===bo&&o(Ee)),i===ge&&(123===e.charCodeAt(po)?(i=lt,po++):(i=ge,0===bo&&o(pt)))),bo--,i===ge?n=void 0:(po=n,n=ge),n!==ge?(e.length>po?(i=e.charAt(po),po++):(i=ge,0===bo&&o(un)),i!==ge?(fo=r,n=ln(i),r=n):(po=r,r=ge)):(po=r,r=ge);r!==ge;)t.push(r),r=po,n=po,bo++,44===e.charCodeAt(po)?(i=Ce,po++):(i=ge,0===bo&&o(ke)),i===ge&&(59===e.charCodeAt(po)?(i=Ae,po++):(i=ge,0===bo&&o(Ee)),i===ge&&(123===e.charCodeAt(po)?(i=lt,po++):(i=ge,0===bo&&o(pt)))),bo--,i===ge?n=void 0:(po=n,n=ge),n!==ge?(e.length>po?(i=e.charAt(po),po++):(i=ge,0===bo&&o(un)),i!==ge?(fo=r,n=ln(i),r=n):(po=r,r=ge)):(po=r,r=ge);return t}function D(){var t,r,n;if(bo++,t=po,r=[],dn.test(e.charAt(po))?(n=e.charAt(po),po++):(n=ge,0===bo&&o(hn)),n!==ge)for(;n!==ge;)r.push(n),dn.test(e.charAt(po))?(n=e.charAt(po),po++):(n=ge,0===bo&&o(hn));else r=ge;return r!==ge&&(fo=t,r=gn(r)),t=r,t===ge&&(t=S()),bo--,t===ge&&(r=ge,0===bo&&o(fn)),t}function B(){var t,r;return bo++,t=po,bn.test(e.charAt(po))?(r=e.charAt(po),po++):(r=ge,0===bo&&o(yn)),r!==ge&&(fo=t,r=ln(r)),t=r,bo--,t===ge&&(r=ge,0===bo&&o(mn)),t}function O(){var t,r;return bo++,t=po,xn.test(e.charAt(po))?(r=e.charAt(po),po++):(r=ge,0===bo&&o(wn)),r!==ge&&(fo=t,r=ln(r)),t=r,bo--,t===ge&&(r=ge,0===bo&&o(vn)),t}function H(){var t;return e.substr(po,2)===Cn?(t=Cn,po+=2):(t=ge,0===bo&&o(kn)),t}function R(){var t;return e.substr(po,2)===_n?(t=_n,po+=2):(t=ge,0===bo&&o(An)),t}function W(){var t,r,n;return t=po,r=po,bo++,e.substr(po,2)===_n?(n=_n,po+=2):(n=ge,0===bo&&o(An)),bo--,n===ge?r=void 0:(po=r,r=ge),r!==ge?(e.length>po?(n=e.charAt(po),po++):(n=ge,0===bo&&o(un)),n!==ge?(fo=t,r=ln(n),t=r):(po=t,t=ge)):(po=t,t=ge),t}function F(){var e,t,r,n;if(e=po,t=H(),t!==ge){for(r=[],n=W();n!==ge;)r.push(n),n=W();r!==ge?(n=R(),n!==ge?(fo=e,t=En(t,r,n),e=t):(po=e,e=ge)):(po=e,e=ge)}else po=e,e=ge;return e}function M(){var t;return e.substr(po,2)===Ln?(t=Ln,po+=2):(t=ge,0===bo&&o(jn)),t===ge&&(35===e.charCodeAt(po)?(t=Sn,po++):(t=ge,0===bo&&o(In))),t}function G(){var t;return Tn.test(e.charAt(po))?(t=e.charAt(po),po++):(t=ge,0===bo&&o(Nn)),t}function X(){var e,t,r,n;if(e=po,t=M(),t!==ge){for(r=[],n=G();n!==ge;)r.push(n),n=G();r!==ge?(fo=e,t=Dn(t,r),e=t):(po=e,e=ge)}else po=e,e=ge;return e}function q(){var e,t;return bo++,e=X(),e===ge&&(e=F()),bo--,e===ge&&(t=ge,0===bo&&o(Bn)),e}function z(){var e,t;for(e=[],t=B(),t===ge&&(t=O(),t===ge&&(t=q()));t!==ge;)e.push(t),t=B(),t===ge&&(t=O(),t===ge&&(t=q()));return e}function U(){var e,t;return bo++,e=po,t=P(),t!==ge&&(fo=e,t=Hn(t)),e=t,e===ge&&(e=po,t=V(),t!==ge&&(fo=e,t=Rn(t)),e=t),bo--,e===ge&&(t=ge,0===bo&&o(On)),e}function P(){var t,r,n,i;return t=po,34===e.charCodeAt(po)?(r=nn,po++):(r=ge,0===bo&&o(on)),r!==ge?(n=V(),n!==ge?(34===e.charCodeAt(po)?(i=nn,po++):(i=ge,0===bo&&o(on)),i!==ge?(fo=t,r=Wn(n),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge),t}function V(){var e;return e=K(),e===ge&&(e=$()),e}function $(){var t,r,n;if(t=po,r=[],Fn.test(e.charAt(po))?(n=e.charAt(po),po++):(n=ge,0===bo&&o(Mn)),n!==ge)for(;n!==ge;)r.push(n),Fn.test(e.charAt(po))?(n=e.charAt(po),po++):(n=ge,0===bo&&o(Mn));else r=ge;return r!==ge&&(fo=t,r=Gn(r)),t=r}function K(){var t,r,n,i,a;return t=po,r=po,n=$(),n!==ge?(46===e.charCodeAt(po)?(i=Xn,po++):(i=ge,0===bo&&o(qn)),i!==ge?(a=$(),a!==ge?(n=[n,i,a],r=n):(po=r,r=ge)):(po=r,r=ge)):(po=r,r=ge),r!==ge&&(fo=t,r=zn(r)),t=r}function Z(){var e,t;return bo++,e=po,t=J(),t!==ge&&(fo=e,t=Pn(t)),e=t,e===ge&&(e=po,t=Q(),t!==ge&&(fo=e,t=Vn(t)),e=t),bo--,e===ge&&(t=ge,0===bo&&o(Un)),e}function J(){var t,r,n,i;return t=po,34===e.charCodeAt(po)?(r=nn,po++):(r=ge,0===bo&&o(on)),r!==ge?(n=Q(),n!==ge?(34===e.charCodeAt(po)?(i=nn,po++):(i=ge,0===bo&&o(on)),i!==ge?(fo=t,r=Hn(n),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge),t}function Q(){var t;return e.substr(po,4).toLowerCase()===$n?(t=e.substr(po,4),po+=4):(t=ge,0===bo&&o(Kn)),t===ge&&(e.substr(po,5).toLowerCase()===Zn?(t=e.substr(po,5),po+=5):(t=ge,0===bo&&o(Jn)),t===ge&&(e.substr(po,2).toLowerCase()===Qn?(t=e.substr(po,2),po+=2):(t=ge,0===bo&&o(Yn)),t===ge&&(e.substr(po,3).toLowerCase()===eo?(t=e.substr(po,3),po+=3):(t=ge,0===bo&&o(to)),t===ge&&(48===e.charCodeAt(po)?(t=ro,po++):(t=ge,0===bo&&o(no)),t===ge&&(49===e.charCodeAt(po)?(t=oo,po++):(t=ge,0===bo&&o(io))))))),t}function Y(){var e,t;return bo++,e=ee(),e===ge&&(e=te()),bo--,e===ge&&(t=ge,0===bo&&o(ao)),e}function ee(){var t,r,n,i;return t=po,34===e.charCodeAt(po)?(r=nn,po++):(r=ge,0===bo&&o(on)),r!==ge?(n=te(),n!==ge?(34===e.charCodeAt(po)?(i=nn,po++):(i=ge,0===bo&&o(on)),i!==ge?(fo=t,r=Hn(n),t=r):(po=t,t=ge)):(po=t,t=ge)):(po=t,t=ge),t}function te(){var t,r;return t=po,r=V(),r!==ge&&(fo=t,r=co(r)),t=r,t===ge&&(t=po,e.substr(po,4).toLowerCase()===so?(r=e.substr(po,4),po+=4):(r=ge,0===bo&&o(uo)),r!==ge&&(fo=t,r=lo(r)),t=r),t}function re(e,t){t&&Object.getOwnPropertyNames(t).forEach(function(r){e[r]=t[r]})}function ne(e,t){return e=e?e:{},re(e,t),e}function oe(e){var t={};return e[0].forEach(function(e){t=ne(t,e)}),ne(t,e[1])}function ie(e){return["true","on","1"].indexOf(e.toLowerCase())>-1}function ae(e,t){var r={};return r[e.toLowerCase()]=t,r}function ce(e,t,r){return void 0===t||"*"===t?!0:e.entities.some(function(e){return e.name===t})?!0:r[t]===!0}function se(e){var t={};return t.name=e,t}function ue(e,t,r){return e||(e={},e.entities=[]),r||(r={}),t&&t.arcs&&t.arcs.forEach(function(t){t.forEach(function(t){ce(e,t.from,r)||(e.entities[e.entities.length]=se(t.from)),t.arcs&&(r[t.to]=!0,ne(e,ue(e,t,r)),delete r[t.to]),ce(e,t.to,r)||(e.entities[e.entities.length]=se(t.to))})}),e}function le(e){return e&&e.options?!!e.options.watermark||!!e.options.width&&"auto"===e.options.width:!1}function pe(e){return e&&e.arcs?e.arcs.some(function(e){return e.some(function(e){return["alt","else","opt","break","par","seq","strict","neg","critical","ignore","consider","assert","loop","ref","exc"].indexOf(e.kind)>-1})}):!1}function fe(e,t){var r=le(e),n=pe(t);return{extendedOptions:r,extendedArcTypes:n,extendedFeatures:r||n}}var de,he=arguments.length>1?arguments[1]:{},ge={},me={program:a},be=a,ye=function(e,t){t[1]=ue(t[1],t[2]);var r=ne(t[0],ne(t[1],t[2]));return r=ne({meta:fe(t[0],t[2])},r),e.length>0&&(r=ne({precomment:e},r)),r},ve=function(e){return{options:e}},xe=function(e){return{entities:e}},we=function(e){return{arcs:e}},Ce=",",ke={type:"literal",value:",",description:'","'},_e=function(e){return e},Ae=";",Ee={type:"literal",value:";",description:'";"'},Le=function(e){return oe(e)},je="hscale",Se={type:"literal",value:"hscale",description:'"hscale"'},Ie="arcgradient",Te={type:"literal",value:"arcgradient",description:'"arcgradient"'},Ne="=",De={type:"literal",value:"=",description:'"="'},Be=function(e,t){return ae(e,t)},Oe="width",He={type:"literal",value:"width",description:'"width"'},Re="wordwraparcs",We={type:"literal",value:"wordwraparcs",description:'"wordwraparcs"'},Fe=function(e,t){var r={};return r[e.toLowerCase()]=ie(t),r},Me="watermark",Ge={type:"literal",value:"watermark",description:'"watermark"'},Xe=function(e){return e},qe=function(e){return e[0].push(e[1]),e[0]},ze={type:"other",description:"entity"},Ue=":",Pe={type:"literal",value:":",description:'":"'},Ve=function(e,t){return t},$e=function(e,t){var r={};return r.name=e,t&&(r.label=t),r},Ke=function(e){return e},Ze=function(e){return[e]},Je=function(e){return e[0].push(e[1][0]),e[0]},Qe=function(e){return e},Ye=function(e){return e},et=function(e){return e},tt=function(e,t){return t},rt=function(e,t){return t&&(e.label=t),e},nt=function(e){return{kind:e}},ot=function(e,t,r){return{kind:t,from:e,to:r}},it="*",at={type:"literal",value:"*",description:'"*"'},ct=function(e,t){return{kind:e,from:"*",to:t}},st=function(e,t){return{kind:t,from:e,to:"*"}},ut=function(e,t,r,n){return n},lt="{",pt={type:"literal",value:"{",description:'"{"'},ft="}",dt={type:"literal",value:"}",description:'"}"'},ht=function(e,t,r,n,o){var i={kind:t,from:e,to:r,arcs:o};return n&&(i.label=n),i},gt={type:"other",description:"empty row"},mt="|||",bt={type:"literal",value:"|||",description:'"|||"'},yt="...",vt={type:"literal",value:"...",description:'"..."'},xt={type:"other",description:"---"},wt="---",Ct={type:"literal",value:"---",description:'"---"'},kt=function(e){return e.toLowerCase()},_t={type:"other",description:"bi-directional arrow"},At="--",Et={type:"literal",value:"--",description:'"--"'},Lt="<->",jt={type:"literal",value:"<->",description:'"<->"'},St="==",It={type:"literal",value:"==",description:'"=="'},Tt="<<=>>",Nt={type:"literal",value:"<<=>>",description:'"<<=>>"'},Dt="<=>",Bt={type:"literal",value:"<=>",description:'"<=>"'},Ot="..",Ht={type:"literal",value:"..",description:'".."'},Rt="<<>>",Wt={type:"literal",value:"<<>>",description:'"<<>>"'},Ft="::",Mt={type:"literal",value:"::",description:'"::"'},Gt="<:>",Xt={type:"literal",value:"<:>",description:'"<:>"'},qt={type:"other",description:"left to right arrow"},zt="->",Ut={type:"literal",value:"->",description:'"->"'},Pt="=>>",Vt={type:"literal",value:"=>>",description:'"=>>"'},$t="=>",Kt={type:"literal",value:"=>",description:'"=>"'},Zt=">>",Jt={type:"literal",value:">>",description:'">>"'},Qt=":>",Yt={type:"literal",value:":>",description:'":>"'},er="-x",tr={type:"literal",value:"-x",description:'"-x"'},rr={type:"other",description:"right to left arrow"},nr="<-",or={type:"literal",value:"<-",description:'"<-"'},ir="<<=",ar={type:"literal",value:"<<=",description:'"<<="'},cr="<=",sr={type:"literal",value:"<=",description:'"<="'},ur="<<",lr={type:"literal",value:"<<",description:'"<<"'},pr="<:",fr={type:"literal",value:"<:",description:'"<:"'},dr="x-",hr={type:"literal",value:"x-",description:'"x-"'},gr={type:"other",description:"box"},mr="note",br={type:"literal",value:"note",description:'"note"'},yr="abox",vr={type:"literal",value:"abox",description:'"abox"'},xr="rbox",wr={type:"literal",value:"rbox",description:'"rbox"'},Cr="box",kr={type:"literal",value:"box",description:'"box"'},_r={type:"other",description:"inline expression"},Ar="alt",Er={type:"literal",value:"alt",description:'"alt"'},Lr="else",jr={type:"literal",value:"else",description:'"else"'},Sr="opt",Ir={type:"literal",value:"opt",description:'"opt"'},Tr="break",Nr={type:"literal",value:"break",description:'"break"'},Dr="par",Br={type:"literal",value:"par",description:'"par"'},Or="seq",Hr={type:"literal",value:"seq",description:'"seq"'},Rr="strict",Wr={type:"literal",value:"strict",description:'"strict"'},Fr="neg",Mr={type:"literal",value:"neg",description:'"neg"'},Gr="critical",Xr={type:"literal",value:"critical",description:'"critical"'},qr="ignore",zr={type:"literal",value:"ignore",description:'"ignore"'},Ur="consider",Pr={type:"literal",value:"consider",description:'"consider"'},Vr="assert",$r={type:"literal",value:"assert",description:'"assert"'},Kr="loop",Zr={type:"literal",value:"loop",description:'"loop"'},Jr="ref",Qr={type:"literal",value:"ref",description:'"ref"'},Yr="exc",en={type:"literal",value:"exc",description:'"exc"'},tn=function(e){return e.toLowerCase()},rn={type:"other",description:"double quoted string"},nn='"',on={type:"literal",value:'"',description:'"\\""'},an=function(e){return e.join("")},cn='\\"',sn={type:"literal",value:'\\"',description:'"\\\\\\""'},un={type:"any",description:"any character"},ln=function(e){return e},pn=function(e){return e.join("").trim()},fn={type:"other",description:"identifier"},dn=/^[^;, "\t\n\r=\-><:{*]/,hn={type:"class",value:'[^;, \\"\\t\\n\\r=\\-><:\\{\\*]',description:'[^;, \\"\\t\\n\\r=\\-><:\\{\\*]'},gn=function(e){return e.join("")},mn={type:"other",description:"whitespace"},bn=/^[ \t]/,yn={type:"class",value:"[ \\t]",description:"[ \\t]"},vn={type:"other",description:"lineend"},xn=/^[\r\n]/,wn={type:"class",value:"[\\r\\n]",description:"[\\r\\n]"},Cn="/*",kn={type:"literal",value:"/*",description:'"/*"'},_n="*/",An={type:"literal",value:"*/",description:'"*/"'},En=function(e,t,r){return e+t.join("")+r},Ln="//",jn={type:"literal",value:"//",description:'"//"'},Sn="#",In={type:"literal",value:"#",description:'"#"'},Tn=/^[^\r\n]/,Nn={type:"class",value:"[^\\r\\n]",description:"[^\\r\\n]"},Dn=function(e,t){return e+t.join("")},Bn={type:"other",description:"comment"},On={type:"other",description:"number"},Hn=function(e){return e},Rn=function(e){return e.toString()},Wn=function(e){return e.toString()},Fn=/^[0-9]/,Mn={type:"class",value:"[0-9]",description:"[0-9]"},Gn=function(e){return parseInt(e.join(""),10)},Xn=".",qn={type:"literal",value:".",description:'"."'},zn=function(e){return parseFloat(e.join(""))},Un={type:"other",description:"boolean"},Pn=function(e){return e},Vn=function(e){return e.toString()},$n="true",Kn={type:"literal",value:"true",description:'"true"'},Zn="false",Jn={type:"literal",value:"false",description:'"false"'},Qn="on",Yn={type:"literal",value:"on",description:'"on"'},eo="off",to={type:"literal",value:"off",description:'"off"'},ro="0",no={type:"literal",value:"0",description:'"0"'},oo="1",io={type:"literal",value:"1",description:'"1"'},ao={type:"other",description:"size"},co=function(e){return e.toString()},so="auto",uo={type:"literal",value:"auto",description:'"auto"'},lo=function(e){return e.toLowerCase()},po=0,fo=0,ho=[{line:1,column:1,seenCR:!1}],go=0,mo=[],bo=0;if("startRule"in he){if(!(he.startRule in me))throw new Error("Can't start parsing from rule \""+he.startRule+'".');be=me[he.startRule]}if(de=be(),de!==ge&&po===e.length)return de;throw de!==ge&&po<e.length&&o({type:"end",description:"end of input"}),i(null,mo,go<e.length?e.charAt(go):null,go<e.length?n(go,go+1):n(go,go))}return e(t,Error),{SyntaxError:t,parse:r}}),r("lib/mscgenjs-core/render/graphics/constants",[],function(){"use strict";return{SVGNS:"http://www.w3.org/2000/svg",XLINKNS:"http://www.w3.org/1999/xlink",LINE_WIDTH:2,FONT_SIZE:12,CSS_FENCE_CLASS:"mscgenjs-fence"}}),r("lib/mscgenjs-core/render/graphics/svglowlevelfactory",["./constants"],function(e){"use strict";function t(e,t,r){return r&&e.setAttribute(t,r),e}function r(e,r){return r&&Object.keys(r).forEach(function(n){t(e,n,r[n])}),e}function n(t,n){return r(o.createElementNS(e.SVGNS,t),n)}var o={};return{init:function(e){o=e},setAttribute:t,setAttributes:r,createElement:n}}),r("lib/mscgenjs-core/render/graphics/geometry",[],function(){"use strict";function e(e){return 360*e/(2*Math.PI)}function t(t){return 0-e(Math.atan(t.height/t.width))}function r(e){var t=-1;return e.xTo>e.xFrom&&(t=1),{dx:t,dy:t*(e.yTo-e.yFrom)/(e.xTo-e.xFrom)}}return{getDiagonalAngle:t,getDirection:r}}),r("lib/mscgenjs-core/render/graphics/svgelementfactory",["./constants","./svglowlevelfactory","./geometry"],function(e,t,r){"use strict";function n(r,n){return t.createElement("svg",{version:"1.1",id:r,"class":n,xmlns:e.SVGNS,"xmlns:xlink":e.XLINKNS,width:0,height:0})}function o(e){return t.createElement("desc",{id:e})}function i(){return t.createElement("defs")}function a(e,r,n,o){return p(t.createElement("path",{d:e,"class":r}),n,o)}function c(e,r){return t.createElement("polygon",{points:e,"class":r})}function s(e,r,n,o,i,a){return p(t.createElement("rect",{width:e.width,height:e.height,x:e.x,y:e.y,rx:i,ry:a,"class":r}),n,o)}function u(e,r){return t.createElement("g",{id:e,"class":r})}function l(r,n){var o=t.createElement("use",{x:r.x.toString(),y:r.y.toString()});return o.setAttributeNS(e.XLINKNS,"xlink:href","#"+n),o}function p(e,r,n){var o="";return n&&(o+="fill:"+n+";"),r&&(o+="stroke:"+r+";"),
t.setAttribute(e,"style",o)}function f(e,r){return t.createElement("line",{x1:e.xFrom.toString(),y1:e.yFrom.toString(),x2:e.xTo.toString(),y2:e.yTo.toString(),"class":r})}function d(t,r){var n=j.createElementNS(e.SVGNS,"a");return n.setAttributeNS(e.XLINKNS,"xlink:href",t),n.setAttributeNS(e.XLINKNS,"xlink:title",t),n.setAttributeNS(e.XLINKNS,"xlink:show","new"),n.appendChild(r),n}function h(e,t,r,n){var o=3;return a("M"+e.x+","+e.y+"l"+o+", -"+e.height/2+"l"+(e.width-2*o)+",0l"+o+","+e.height/2+"l-"+o+","+e.height/2+"l-"+(e.width-2*o)+",0 l-"+o+",-"+e.height/2,t,r,n)}function g(t,r,n,o){var i=Math.max(9,Math.min(4.5*e.LINE_WIDTH,t.height/2)),c=i.toString(10);return a("M"+t.x+","+t.y+"l"+(t.width-i)+",0 l0,"+c+" l"+c+",0 m-"+c+",-"+c+" l"+c+","+c+" l0,"+(t.height-i)+" l-"+t.width+",0 l0,-"+(t.height+e.LINE_WIDTH/2)+" ",r,n,o)}function m(e,t,r,n,o){var i=o?o:7;return a("M"+e.x+","+e.y+" l"+e.width+",0  l0,"+(e.height-i)+" l-"+i.toString(10)+","+i.toString(10)+" l-"+(e.width-i)+",0 ",t,r,n)}function b(t,r){var n=j.createElementNS(e.SVGNS,"tspan"),o=j.createTextNode(t);return n.appendChild(o),r?d(r,n):n}function y(e,r,n,o,i,a){var c=t.createElement("text",{x:r.x.toString(),y:r.y.toString(),"class":n});if(c.appendChild(b(e,o)),i){var s=b(" ["+i+"]",a);s.setAttribute("style",S),c.appendChild(s)}return c}function v(e,n,o){return t.setAttributes(y(e,{x:n.width/2,y:n.height/2},o),{transform:"rotate("+r.getDiagonalAngle(n).toString()+" "+(n.width/2).toString()+" "+(n.height/2).toString()+")"})}function x(t,r){var n=0;return r.indexOf("nodi")<0&&(n=t.xTo>t.xFrom?-7.5*e.LINE_WIDTH:7.5*e.LINE_WIDTH),n}function w(t,r){var n=0;return r.indexOf("nodi")<0&&r.indexOf("bidi")>-1&&(n=t.xTo>t.xFrom?7.5*e.LINE_WIDTH:-7.5*e.LINE_WIDTH),n}function C(t,n){var o=e.LINE_WIDTH,i=r.getDirection(t),c=x(t,n),s=w(t,n),u=(t.xTo-t.xFrom+c-s).toString(),l=(t.yTo-t.yFrom).toString(),p="l"+i.dx.toString()+","+i.dy.toString(),f=" l"+u+","+l;return a("M"+t.xFrom.toString()+","+(t.yFrom-7.5*e.LINE_WIDTH*i.dy).toString()+p+"M"+(t.xFrom+s).toString()+","+(t.yFrom-o).toString()+f+"M"+(t.xFrom+s).toString()+","+(t.yFrom+o).toString()+f+"M"+(t.xTo-i.dx).toString()+","+(t.yTo+7.5*e.LINE_WIDTH*i.dy).toString()+p,n)}function k(e,t,r){return Boolean(r)?C(e,t):f(e,t)}function _(t,r,n,o,i){var c=i?t.x+7.5*e.LINE_WIDTH:t.x;return a("M"+t.x.toString()+", -"+t.y.toString()+" C"+(t.x+n).toString()+","+(t.y-7.5*e.LINE_WIDTH).toString()+" "+(t.x+n).toString()+","+(r+0).toString()+" "+c.toString()+","+r.toString(),o)}function A(e,r,n,o){return t.createElement("marker",{orient:n,id:e,"class":r,viewBox:Boolean(o)?o:"0 0 10 10",refX:"9",refY:"3",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10"})}function E(e,r,n){var o=A(e,"arrow-marker","auto");return o.appendChild(t.setAttributes(a(r,"arrow-style"),{style:"stroke-dasharray:100,1;stroke:"+n||"black"})),o}function L(e,r,n){var o=A(e,"arrow-marker","auto");return o.appendChild(t.setAttributes(c(r,"arrow-style"),{stroke:n||"black",fill:n||"black"})),o}var j={},S="vertical-align:text-top;";return S+="font-size:0.7em;text-anchor:start;",{init:function(e){j=e,t.init(e)},createSVG:n,createDesc:o,createDefs:i,createRect:s,createABox:h,createNote:g,createEdgeRemark:m,createText:y,createDiagonalText:v,createLine:k,createUTurn:_,createGroup:u,createUse:l,createMarkerPath:E,createMarkerPolygon:L}}),r("lib/mscgenjs-core/render/graphics/idmanager",[],function(){"use strict";var e="mscgen_js-svg-",t=e;return{setPrefix:function(r){t=e+r},get:function(e){return e?t+e:t}}}),function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function n(e,t,r){var n=r.length;switch(n){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function o(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function i(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function a(e,t,r,n){var o=-1,i=e?e.length:0;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function c(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function s(e){return e&&e.Object===Object?e:null}function u(e,t){return null==e?$e:e[t]}function l(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(r){}return t}function p(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}function f(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function d(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function h(){}function g(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function m(){this.__data__=yr?yr(null):{}}function b(e){return this.has(e)&&delete this.__data__[e]}function y(e){var t=this.__data__;if(yr){var r=t[e];return r===Qe?$e:r}return Qt.call(t,e)?t[e]:$e}function v(e){var t=this.__data__;return yr?t[e]!==$e:Qt.call(t,e)}function x(e,t){var r=this.__data__;return r[e]=yr&&t===$e?Qe:t,this}function w(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function C(){this.__data__=[]}function k(e){var t=this.__data__,r=G(t,e);if(0>r)return!1;var n=t.length-1;return r==n?t.pop():ur.call(t,r,1),!0}function _(e){var t=this.__data__,r=G(t,e);return 0>r?$e:t[r][1]}function A(e){return G(this.__data__,e)>-1}function E(e,t){var r=this.__data__,n=G(r,e);return 0>n?r.push([e,t]):r[n][1]=t,this}function L(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function j(){this.__data__={hash:new g,map:new(hr||w),string:new g}}function S(e){return pe(this,e)["delete"](e)}function I(e){return pe(this,e).get(e)}function T(e){return pe(this,e).has(e)}function N(e,t){return pe(this,e).set(e,t),this}function D(e){this.__data__=new w(e)}function B(){this.__data__=new w}function O(e){return this.__data__["delete"](e)}function H(e){return this.__data__.get(e)}function R(e){return this.__data__.has(e)}function W(e,t){var r=this.__data__;return r instanceof w&&r.__data__.length==Ze&&(r=this.__data__=new L(r.__data__)),r.set(e,t),this}function F(e,t,r,n){return e===$e||Te(e,$t[r])&&!Qt.call(n,r)?t:e}function M(e,t,r){var n=e[t];Qt.call(e,t)&&Te(n,r)&&(r!==$e||t in e)||(e[t]=r)}function G(e,t){for(var r=e.length;r--;)if(Te(e[r][0],t))return r;return-1}function X(e,t){return e&&ce(t,ze(t),e)}function q(e,t,r,n,i,a,c){var s;if(n&&(s=a?n(e,i,a,c):n(e)),s!==$e)return s;if(!Re(e))return e;var u=Lr(e);if(u){if(s=me(e),!t)return ae(e,s)}else{var p=ge(e),f=p==st||p==ut;if(jr(e))return Q(e,t);if(p==ft||p==nt||f&&!a){if(l(e))return a?e:{};if(s=be(f?{}:e),!t)return se(e,X(s,e))}else{if(!Wt[p])return a?e:{};s=ye(e,p,q,t)}}c||(c=new D);var d=c.get(e);if(d)return d;if(c.set(e,s),!u)var h=r?le(e):ze(e);return o(h||e,function(o,i){h&&(i=o,o=e[i]),M(s,i,q(o,t,r,n,i,e,c))}),s}function z(e){return Re(e)?cr(e):{}}function U(e,t,r,n,o){var a=-1,c=e.length;for(r||(r=xe),o||(o=[]);++a<c;){var s=e[a];t>0&&r(s)?t>1?U(s,t-1,r,n,o):i(o,s):n||(o[o.length]=s)}return o}function P(e,t,r){var n=t(e);return Lr(e)?n:i(n,r(e))}function V(e,t){return null!=e&&(Qt.call(e,t)||"object"==typeof e&&t in e&&null===de(e))}function $(e){if(!Re(e)||_e(e))return!1;var t=Oe(e)||l(e)?er:Ot;return t.test(Ee(e))}function K(e){return pr(Object(e))}function Z(e){e=null==e?e:Object(e);var t=[];for(var r in e)t.push(r);return t}function J(e){return function(t){return null==t?$e:t[e]}}function Q(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}function Y(e){var t=new e.constructor(e.byteLength);return new or(t).set(new or(e)),t}function ee(e,t){var r=t?Y(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function te(t,r,n){var o=r?n(f(t),!0):f(t);return a(o,e,new t.constructor)}function re(e){var t=new e.constructor(e.source,Nt.exec(e));return t.lastIndex=e.lastIndex,t}function ne(e,r,n){var o=r?n(d(e),!0):d(e);return a(o,t,new e.constructor)}function oe(e){return Ar?Object(Ar.call(e)):{}}function ie(e,t){var r=t?Y(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function ae(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function ce(e,t,r,n){r||(r={});for(var o=-1,i=t.length;++o<i;){var a=t[o],c=n?n(r[a],e[a],a,r,e):e[a];M(r,a,c)}return r}function se(e,t){return ce(e,he(e),t)}function ue(e){return Se(function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:$e,a=o>2?r[2]:$e;for(i=e.length>3&&"function"==typeof i?(o--,i):$e,a&&Ce(r[0],r[1],a)&&(i=3>o?$e:i,o=1),t=Object(t);++n<o;){var c=r[n];c&&e(t,c,n,i)}return t})}function le(e){return P(e,ze,he)}function pe(e,t){var r=e.__data__;return ke(t)?r["string"==typeof t?"string":"hash"]:r.map}function fe(e,t){var r=u(e,t);return $(r)?r:$e}function de(e){return lr(Object(e))}function he(e){return ar(Object(e))}function ge(e){return Yt.call(e)}function me(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&Qt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function be(e){return"function"!=typeof e.constructor||Ae(e)?{}:z(de(e))}function ye(e,t,r,n){var o=e.constructor;switch(t){case vt:return Y(e);case it:case at:return new o(+e);case xt:return ee(e,n);case wt:case Ct:case kt:case _t:case At:case Et:case Lt:case jt:case St:return ie(e,n);case lt:return te(e,n,r);case pt:case mt:return new o(e);case ht:return re(e);case gt:return ne(e,n,r);case bt:return oe(e)}}function ve(e){var t=e?e.length:$e;return He(t)&&(Lr(e)||Fe(e)||Ne(e))?c(t,String):null}function xe(e){return Lr(e)||Ne(e)}function we(e,t){return t=null==t?et:t,!!t&&("number"==typeof e||Rt.test(e))&&e>-1&&e%1==0&&t>e}function Ce(e,t,r){if(!Re(r))return!1;var n=typeof t;return("number"==n?De(r)&&we(t,r.length):"string"==n&&t in r)?Te(r[t],e):!1}function ke(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function _e(e){return!!Zt&&Zt in e}function Ae(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||$t;return e===r}function Ee(e){if(null!=e){try{return Jt.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Le(e){var t=e?e.length:0;return t?U(e,1):[]}function je(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(Je);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(je.Cache||L),r}function Se(e,t){if("function"!=typeof e)throw new TypeError(Je);return t=fr(t===$e?e.length-1:Xe(t),0),function(){for(var r=arguments,o=-1,i=fr(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,r[0],a);case 2:return e.call(this,r[0],r[1],a)}var c=Array(t+1);for(o=-1;++o<t;)c[o]=r[o];return c[t]=a,n(e,this,c)}}function Ie(e){return q(e,!0,!0)}function Te(e,t){return e===t||e!==e&&t!==t}function Ne(e){return Be(e)&&Qt.call(e,"callee")&&(!sr.call(e,"callee")||Yt.call(e)==nt)}function De(e){return null!=e&&He(Er(e))&&!Oe(e)}function Be(e){return We(e)&&De(e)}function Oe(e){var t=Re(e)?Yt.call(e):"";return t==st||t==ut}function He(e){return"number"==typeof e&&e>-1&&e%1==0&&et>=e}function Re(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function We(e){return!!e&&"object"==typeof e}function Fe(e){return"string"==typeof e||!Lr(e)&&We(e)&&Yt.call(e)==mt}function Me(e){return"symbol"==typeof e||We(e)&&Yt.call(e)==bt}function Ge(e){if(!e)return 0===e?e:0;if(e=qe(e),e===Ye||e===-Ye){var t=0>e?-1:1;return t*tt}return e===e?e:0}function Xe(e){var t=Ge(e),r=t%1;return t===t?r?t-r:t:0}function qe(e){if("number"==typeof e)return e;if(Me(e))return rt;if(Re(e)){var t=Oe(e.valueOf)?e.valueOf():e;e=Re(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Tt,"");var r=Bt.test(e);return r||Ht.test(e)?Ft(e.slice(2),r?2:8):Dt.test(e)?rt:+e}function ze(e){var t=Ae(e);if(!t&&!De(e))return K(e);var r=ve(e),n=!!r,o=r||[],i=o.length;for(var a in e)!V(e,a)||n&&("length"==a||we(a,i))||t&&"constructor"==a||o.push(a);return o}function Ue(e){for(var t=-1,r=Ae(e),n=Z(e),o=n.length,i=ve(e),a=!!i,c=i||[],s=c.length;++t<o;){var u=n[t];a&&("length"==u||we(u,s))||"constructor"==u&&(r||!Qt.call(e,u))||c.push(u)}return c}function Pe(){return[]}function Ve(){return!1}var $e,Ke="4.13.1",Ze=200,Je="Expected a function",Qe="__lodash_hash_undefined__",Ye=1/0,et=9007199254740991,tt=1.7976931348623157e308,rt=NaN,nt="[object Arguments]",ot="[object Array]",it="[object Boolean]",at="[object Date]",ct="[object Error]",st="[object Function]",ut="[object GeneratorFunction]",lt="[object Map]",pt="[object Number]",ft="[object Object]",dt="[object Promise]",ht="[object RegExp]",gt="[object Set]",mt="[object String]",bt="[object Symbol]",yt="[object WeakMap]",vt="[object ArrayBuffer]",xt="[object DataView]",wt="[object Float32Array]",Ct="[object Float64Array]",kt="[object Int8Array]",_t="[object Int16Array]",At="[object Int32Array]",Et="[object Uint8Array]",Lt="[object Uint8ClampedArray]",jt="[object Uint16Array]",St="[object Uint32Array]",It=/[\\^$.*+?()[\]{}|]/g,Tt=/^\s+|\s+$/g,Nt=/\w*$/,Dt=/^[-+]0x[0-9a-f]+$/i,Bt=/^0b[01]+$/i,Ot=/^\[object .+?Constructor\]$/,Ht=/^0o[0-7]+$/i,Rt=/^(?:0|[1-9]\d*)$/,Wt={};Wt[nt]=Wt[ot]=Wt[vt]=Wt[xt]=Wt[it]=Wt[at]=Wt[wt]=Wt[Ct]=Wt[kt]=Wt[_t]=Wt[At]=Wt[lt]=Wt[pt]=Wt[ft]=Wt[ht]=Wt[gt]=Wt[mt]=Wt[bt]=Wt[Et]=Wt[Lt]=Wt[jt]=Wt[St]=!0,Wt[ct]=Wt[st]=Wt[yt]=!1;var Ft=parseInt,Mt="object"==typeof exports&&exports,Gt=Mt&&"object"==typeof module&&module,Xt=Gt&&Gt.exports===Mt,qt=s("object"==typeof global&&global),zt=s("object"==typeof self&&self),Ut=s("object"==typeof this&&this),Pt=qt||zt||Ut||Function("return this")(),Vt=Array.prototype,$t=Object.prototype,Kt=Pt["__core-js_shared__"],Zt=function(){var e=/[^.]+$/.exec(Kt&&Kt.keys&&Kt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Jt=Function.prototype.toString,Qt=$t.hasOwnProperty,Yt=$t.toString,er=RegExp("^"+Jt.call(Qt).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tr=Xt?Pt.Buffer:$e,rr=Pt.Reflect,nr=Pt.Symbol,or=Pt.Uint8Array,ir=rr?rr.enumerate:$e,ar=Object.getOwnPropertySymbols,cr=Object.create,sr=$t.propertyIsEnumerable,ur=Vt.splice,lr=Object.getPrototypeOf,pr=Object.keys,fr=Math.max,dr=fe(Pt,"DataView"),hr=fe(Pt,"Map"),gr=fe(Pt,"Promise"),mr=fe(Pt,"Set"),br=fe(Pt,"WeakMap"),yr=fe(Object,"create"),vr=Ee(dr),xr=Ee(hr),wr=Ee(gr),Cr=Ee(mr),kr=Ee(br),_r=nr?nr.prototype:$e,Ar=_r?_r.valueOf:$e;g.prototype.clear=m,g.prototype["delete"]=b,g.prototype.get=y,g.prototype.has=v,g.prototype.set=x,w.prototype.clear=C,w.prototype["delete"]=k,w.prototype.get=_,w.prototype.has=A,w.prototype.set=E,L.prototype.clear=j,L.prototype["delete"]=S,L.prototype.get=I,L.prototype.has=T,L.prototype.set=N,D.prototype.clear=B,D.prototype["delete"]=O,D.prototype.get=H,D.prototype.has=R,D.prototype.set=W,ir&&!sr.call({valueOf:1},"valueOf")&&(Z=function(e){return p(ir(e))});var Er=J("length");ar||(he=Pe),(dr&&ge(new dr(new ArrayBuffer(1)))!=xt||hr&&ge(new hr)!=lt||gr&&ge(gr.resolve())!=dt||mr&&ge(new mr)!=gt||br&&ge(new br)!=yt)&&(ge=function(e){var t=Yt.call(e),r=t==ft?e.constructor:$e,n=r?Ee(r):$e;if(n)switch(n){case vr:return xt;case xr:return lt;case wr:return dt;case Cr:return gt;case kr:return yt}return t}),je.Cache=L;var Lr=Array.isArray,jr=tr?function(e){return e instanceof tr}:Ve,Sr=ue(function(e,t,r,n){ce(t,Ue(t),e,n)}),Ir=Se(function(e){return e.push($e,F),n(Sr,$e,e)});h.assignInWith=Sr,h.defaults=Ir,h.flatten=Le,h.keys=ze,h.keysIn=Ue,h.memoize=je,h.rest=Se,h.extendWith=Sr,h.cloneDeep=Ie,h.eq=Te,h.isArguments=Ne,h.isArray=Lr,h.isArrayLike=De,h.isArrayLikeObject=Be,h.isBuffer=jr,h.isFunction=Oe,h.isLength=He,h.isObject=Re,h.isObjectLike=We,h.isString=Fe,h.isSymbol=Me,h.stubArray=Pe,h.stubFalse=Ve,h.toFinite=Ge,h.toInteger=Xe,h.toNumber=qe,h.VERSION=Ke,(zt||{})._=h,"function"==typeof r&&"object"==typeof r.amd&&r.amd?r("lib/mscgenjs-core/lib/lodash/lodash.custom",[],function(){return h}):Gt?((Gt.exports=h)._=h,Mt._=h):Pt._=h}.call(this),r("lib/mscgenjs-core/render/graphics/svgutensils",["./constants","./idmanager","./svgelementfactory","./svglowlevelfactory","../../lib/lodash/lodash.custom"],function(e,t,r,n,o){"use strict";function i(t){var n=r.createSVG(t,e.CSS_FENCE_CLASS);return d.body.appendChild(n),n}function a(e){var t=d.getElementById(h);t=t?t:i(h),t.appendChild(e);var r=e.getBBox();return t.removeChild(e),r}function c(e){var t=1e5;return Math.abs(e.height)>t||Math.abs(e.width)>t?{height:0,width:0,x:0,y:0}:e}function s(e){return"function"==typeof e.getBBox?c(a(e)):{height:15,width:15,x:2,y:2}}function u(t){var r=d.createElementNS(e.SVGNS,"tspan");return r.appendChild(d.createTextNode(t)),r}function l(e){var t=n.createElement("text",{x:"0",y:"0"});return t.appendChild(u(e)),t}function p(){return s(l("jy9@")).height}function f(e){t.setPrefix(e);var r=d.getElementById(t.get());if(r){var n=d.getElementById(e);n?n.removeChild(r):d.body.removeChild(r)}}var d={},h=t.get("bboxer");return{init:function(e){d=e},removeRenderedSVGFromElement:f,getBBox:s,calculateTextHeight:o.memoize(p),webkitNamespaceBugWorkaround:function(e){return e.replace(/ xlink=/g," xmlns:xlink=","g").replace(/ href=/g," xlink:href=","g")}}}),r("lib/mscgenjs-core/render/graphics/renderutensils",[],function(){"use strict";function e(e,t){t.scale=e/t.width,t.width*=t.scale,t.height*=t.scale,t.horizontaltransform*=t.scale,t.verticaltransform*=t.scale,t.x=0-t.horizontaltransform,t.y=0-t.verticaltransform}function t(e,t){return e?2*(2*(e+1)*t):0}function r(e,t,r){return"-x"===e?t+.75*(r-t):r}return{scaleCanvasToWidth:e,determineDepthCorrection:t,determineArcXTo:r}}),r("lib/mscgenjs-core/render/graphics/csstemplates",[],function(){"use strict";return{baseTemplate:"svg.mscgenjs-fence{font-family:Helvetica,sans-serif;font-size:<%=fontSize%>px;font-weight:normal;font-style:normal;text-decoration:none;background-color:white;stroke:black;stroke-width:<%=lineWidth%>;color:black;}.mscgenjs-fence rect{fill:none;stroke:black;}.mscgenjs-fence rect.entity{fill:white;}.mscgenjs-fence rect.label-text-background{fill:white;stroke:white;stroke-width:0;}.mscgenjs-fence rect.bglayer{fill:white;stroke:white;stroke-width:0;}.mscgenjs-fence line{stroke:black;}.mscgenjs-fence line.return{stroke-dasharray:5,2;}.mscgenjs-fence line.comment{stroke-dasharray:5,2;}.mscgenjs-fence line.inline_expression_divider{stroke-dasharray:10,5;}.mscgenjs-fence text{color:inherit;stroke:none;text-anchor:middle;}.mscgenjs-fence text.entity-text{text-decoration:underline;}.mscgenjs-fence text.anchor-start{text-anchor:start;}.mscgenjs-fence path{stroke:black;color:black;fill:none;}.mscgenjs-fence .arrow-marker{overflow:visible;}.mscgenjs-fence .arrow-style{stroke-width:1;}.mscgenjs-fence .arcrowomit{stroke-dasharray:2,2;}.mscgenjs-fence rect.box, .mscgenjs-fence path.box{fill:white;}.mscgenjs-fence .inherit{stroke:inherit;color:inherit;}.mscgenjs-fence .inherit-fill{fill:inherit;}.mscgenjs-fence .watermark{stroke:black;color:black;fill:black;font-size:48pt;font-weight:bold;opacity:0.14;}"}}),r("lib/mscgenjs-core/render/graphics/renderskeleton",["./svgelementfactory","./constants","./csstemplates"],function(e,t,r){"use strict";function n(t,r){return r.forEach(function(r){"method"===r.type?t.appendChild(e.createMarkerPolygon(r.name,r.path,r.color)):t.appendChild(e.createMarkerPath(r.name,r.path,r.color))}),t}function o(e){var t=p.createElement("style");return t.setAttribute("type","text/css"),t.appendChild(p.createTextNode(l(e))),t}function i(t,r,i){var a=e.createDefs();return a.appendChild(o(t,i)),a=n(a,r),a.appendChild(e.createGroup(t+"__defs")),a}function a(t){var r=e.createGroup(t+"__body");return r.appendChild(e.createGroup(t+"__background")),r.appendChild(e.createGroup(t+"__arcspanlayer")),r.appendChild(e.createGroup(t+"__lifelinelayer")),r.appendChild(e.createGroup(t+"__sequencelayer")),r.appendChild(e.createGroup(t+"__notelayer")),r.appendChild(e.createGroup(t+"__watermark")),r.appendChild(e.createGroup(t+"__onionskin","onionskin")),r}function c(t){return e.init(t.document),t.document}function s(r,n,o,s,l){p=c(r);var f=p.getElementById(n);null===f&&(f=p.body);var d=e.createSVG(o,t.CSS_FENCE_CLASS);return d.appendChild(u(r,o,l.source)),d.appendChild(i(o,s,l.styleAdditions)),d.appendChild(a(o)),f.appendChild(d),p}function u(t,r,n){var o=e.createDesc(r+"__msc_source");return Boolean(n)&&o.appendChild(t.document.createTextNode("\n\n# Generated by mscgen_js - https://sverweij.github.io/mscgen_js\n"+n)),o}function l(e,n){return r.baseTemplate.replace(/<%=fontSize%>/g,t.FONT_SIZE).replace(/<%=lineWidth%>/g,t.LINE_WIDTH)+(Boolean(n)?n:"")}var p={};return{bootstrap:s,init:c}}),r("lib/mscgenjs-core/render/text/asttransform",[],function(){"use strict";function e(e,t){e&&t&&e.forEach(function(e){t.forEach(function(t){t(e)})})}function t(e,t,r,n){n&&n.forEach(function(n){n(r,e,t)})}function r(e,r,o){r.forEach(function(i){t(e,r,i,o),i.arcs&&n(e,i.arcs,o)})}function n(e,t,n){e&&t&&n&&t.forEach(function(t){r(e,t,n)})}function o(t,r,o){return e(t.entities,r),n(t.entities,t.arcs,o),t}return{transform:o}}),r("lib/mscgenjs-core/render/text/arcmappings",[],function(){"use strict";var e={"->":"rvee","<->":"rvee","=>":"normal","<=>":"normal","-x":"oinvonormal"},t={box:"box",abox:"hexagon",rbox:"box",note:"note"},r={">>":"dashed","<<>>":"dashed","..":"dashed",":>":"bold","<:>":"bold","::":"bold",rbox:"rounded"},n={"|||":"emptyarc","...":"emptyarc","---":"emptyarc","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression","else":"inline_expression",opt:"inline_expression","break":"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"},o={"<-":"->","<=":"=>","<<=":"=>>","<<":">>","<:":":>","x-":"-x"},i={"|||":"empty-row","...":"omitted-row","---":"comment-row","->":"signal","=>":"method","=>>":"callback",">>":"return",":>":"emphasised","-x":"lost","<-":"signal","<=":"method","<<=":"callback","<<":"return","<:":"emphasised","x-":"lost","<->":"signal","<=>":"method","<<=>>":"callback","<<>>":"return","<:>":"emphasised","--":"signal","==":"method","..":"return","::":"emphasised"},a={"|||":"empty","...":"empty","---":"empty","->":"directional","=>":"directional","=>>":"directional",">>":"directional",":>":"directional","-x":"directional","<-":"directional","<=":"directional","<<=":"directional","<<":"directional","<:":"directional","x-":"directional",note:"box",box:"box",abox:"box",rbox:"box","<->":"bidirectional","<=>":"bidirectional","<<=>>":"bidirectional","<<>>":"bidirectional","<:>":"bidirectional","--":"nondirectional","==":"nondirectional","..":"nondirectional","::":"nondirectional",alt:"inline_expression","else":"inline_expression",opt:"inline_expression","break":"inline_expression",par:"inline_expression",seq:"inline_expression",strict:"inline_expression",neg:"inline_expression",critical:"inline_expression",ignore:"inline_expression",consider:"inline_expression",assert:"inline_expression",loop:"inline_expression",ref:"inline_expression",exc:"inline_expression"};return{getArrow:function(t){return e[t]},getShape:function(e){return t[e]},getStyle:function(e){return r[e]},getAggregate:function(e){return n[e]},getClass:function(e){return i[e]||e},getAggregateClass:function(e){return a[e]||e},getNormalizedKind:function(e){return o[e]||e}}}),r("lib/mscgenjs-core/render/text/textutensils",[],function(){"use strict";return{wrap:function(e,t){for(var r=0,n=[],o=0,i=0,a=0,c=0,s=e.replace(/[\t\n]+/g," ").replace(/\\n/g,"\n");c<=s.length;)c>=s.length?n.push(s.substring(o,c)):"\n"===s[c]?(r=0,a=c,n.push(s.substring(o,a)),o=a+1):r++>=t&&(a=s.substring(0,c).lastIndexOf(" "),-1===a||o>a?(r=1,a=c,i=c):(r=0,i=a+1),n.push(s.substring(o,a)),o=i),c++;return n},unescapeString:function(e){return e.replace(/\\"/g,'"')},escapeString:function(e){return e.replace(/\\"/g,'"').replace(/"/g,'\\"')}}}),r("lib/mscgenjs-core/render/text/flatten",["./asttransform","./arcmappings","../../lib/lodash/lodash.custom","./textutensils"],function(e,t,r,n){"use strict";function o(e){"undefined"==typeof e.label&&(e.label=e.name)}function i(e){Boolean(e.label)&&(e.label=n.unescapeString(e.label)),Boolean(e.id)&&(e.id=n.unescapeString(e.id))}function a(e){e.label=Boolean(e.label)?e.label:""}function c(e){if(e.kind&&t.getNormalizedKind(e.kind)!==e.kind){e.kind=t.getNormalizedKind(e.kind);var r=e.from;e.from=e.to,e.to=r}return e}function s(e,t){!e.linecolor&&t.arclinecolor&&(e.linecolor=t.arclinecolor),!e.textcolor&&t.arctextcolor&&(e.textcolor=t.arctextcolor),!e.textbgcolor&&t.arctextbgcolor&&(e.textbgcolor=t.arctextbgcolor)}function u(e,t){if(e&&e.from){var r=t.filter(function(t){return t.name===e.from});r.length>0&&s(e,r[0])}}function l(e){return e.arcs.reduce(function(e,t){return e+(Boolean(t[0].arcs)?l(t[0])+1:0)},e.arcs.length)}function p(e,n,o,i){var a=[],c=[],u=[];return e.forEach(function(e){if("inline_expression"===t.getAggregate(e.kind)){if(e.depth=n,Boolean(e.arcs)){var a=r.cloneDeep(e);a.numberofrows=l(a),delete a.arcs,c.push(a),e.arcs.forEach(function(e){u=u.concat(p(e,n+1,a.from,a.to)),e.forEach(function(e){s(e,a)})}),n>g&&(g=n)}else c.push(e);u.push([{kind:"|||",from:e.from,to:e.to}])}else o&&i&&"emptyarc"===t.getAggregate(e.kind)&&(e.from=o,e.to=i,e.depth=n),c.push(e)}),a.push(c),a.concat(u)}function f(e){var t={};return g=0,Boolean(e.options)&&(t.options=r.cloneDeep(e.options)),Boolean(e.entities)&&(t.entities=r.cloneDeep(e.entities)),t.arcs=[],e&&e.arcs&&e.arcs.forEach(function(e){p(e,0).forEach(function(e){t.arcs.push(e)})}),t.depth=g+1,t}function d(e,t){return e.filter(function(e){return t.from!==e.name}).map(function(e){return t.to=e.name,r.cloneDeep(t)})}function h(e){if(e.entities&&e.arcs){var t=[],n={};e.arcs.forEach(function(o,i){o.filter(function(e){return"*"===e.to}).forEach(function(a,c){n=r.cloneDeep(a),delete e.arcs[i][c],t=d(e.entities,n),o[c]=t.shift(),e.arcs[i]=o.concat(t)})})}return e}var g=0;return{swapRTLArc:c,unwind:f,explodeBroadcasts:h,flatten:function(t){return e.transform(f(t),[o,i],[c,u,i,a])},dotFlatten:function(t){return h(e.transform(t,[o],[c,u]))}}}),r("lib/mscgenjs-core/render/graphics/swap",[],function(){"use strict";function e(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}return{swapfromto:function(t){e(t,"from","to")}}}),r("lib/mscgenjs-core/render/graphics/rowmemory",[],function(){"use strict";function e(e,t){o=[],i=e,a=t}function t(e){return o[e]?o[e]:{y:i+1.5*a+e*a,height:a}}function r(){return t(o.length-1)}function n(e,r,n){if(("undefined"==typeof r||a>r)&&(r=a),"undefined"==typeof n){var i=t(e-1);i&&i.y>0&&(n=i.y+(i.height+r)/2)}o[e]={y:n,height:r}}var o=[],i=0,a=0;return{clear:e,get:t,getLast:r,set:n}}),r("lib/mscgenjs-core/render/graphics/markermanager",["../../lib/lodash/lodash.custom","../text/arcmappings"],function(e,t){"use strict";function r(e,t,r){return t&&r&&["<->","->"].indexOf(e>-1)?r>t?"signal":"signal-u":""}function n(e,t,r){return"<->"===e&&r>=t?"signal-l":"signal-lu"}function o(e,t,o,i,a){var c=[];return u[t]&&u[t].attributes&&(c=u[t].attributes.map(function(c){return{name:c.name,value:c.value.replace(/\{\{signal-marker-end\}\}/g,r(t,i,a)).replace(/\{\{signal-marker-start\}\}/g,n(t,i,a)).replace(/\{\{id\}\}/g,e).replace(/\{\{color\}\}/g,o||"black")}})),c}function i(e,r){return u[t.getNormalizedKind(e)].marker.name+(Boolean(r)?" "+r:" black")}function a(e,r){function n(t){a(e,t)}return Array.isArray(r)&&r.forEach(n),r.arcs&&r.arcs.forEach(n),r.kind&&u[t.getNormalizedKind(r.kind)]&&u[t.getNormalizedKind(r.kind)].marker&&e.indexOf(i(r.kind,r.linecolor))<0&&e.push(i(r.kind,r.linecolor)),e}function c(e){return{kind:e.split(" ")[0],color:e.split(" ")[1]}}function s(e){return e.arcs.reduce(a,[]).sort().map(c)}var u={"->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"}],marker:{name:"signal"}},"<->":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}{{signal-marker-end}}-{{color}})"},{name:"marker-start",value:"url(#{{id}}{{signal-marker-start}}-{{color}})"}],marker:{name:"signal"}},"=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<=>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},">>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"}],marker:{name:"callback",end:""}},"<<>>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}callback-{{color}})"},{name:"marker-start",value:"url(#{{id}}callback-l-{{color}})"}],marker:{name:"callback",end:"",start:"-l"}},"..":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"--":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"==":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"::":{attributes:[{name:"style",value:"stroke:{{color}}"}]},"=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<=>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},":>":{attributes:[{name:"style",value:"stroke:{{color}};"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"}],marker:{name:"method",end:""}},"<:>":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}method-{{color}})"},{name:"marker-start",value:"url(#{{id}}method-l-{{color}})"}],marker:{name:"method",end:"",start:"-l"}},"-x":{attributes:[{name:"style",value:"stroke:{{color}}"},{name:"marker-end",value:"url(#{{id}}lost-{{color}})"}],marker:{name:"lost",end:""}}},l={signal:{variants:[{name:"",path:"M9,3 l-8, 2"},{name:"-u",path:"M9,3 l-8,-2"},{name:"-l",path:"M9,3 l 8, 2"},{name:"-lu",path:"M9,3 l 8,-2"}]},method:{variants:[{name:"",path:"1,1  9,3  1,5"},{name:"-l",path:"17,1 9,3 17,5"}]},callback:{variants:[{name:"",path:"M 1,1 l 8,2 l-8,2"},{name:"-l",path:"M17,1 l-8,2 l 8,2"}]},lost:{variants:[{name:"",path:"M7,0 l5,6 M7,6 l5,-6"}]}};return{getAttributes:o,getMarkerDefs:function(t,r){return e.flatten(s(r).map(function(e){return l[e.kind].variants.map(function(r){return{name:t+e.kind+r.name+"-"+e.color,path:r.path,color:e.color,type:e.kind}})}))}}}),r("lib/mscgenjs-core/render/graphics/renderlabels",["./svgelementfactory","./svgutensils","./constants","../text/textutensils","../text/arcmappings"],function(e,t,r,n,o){"use strict";function i(e,t){t&&e.setAttribute("style","fill:"+t+";")}function a(e,t,r){i(e,t&&!r?"blue":r)}function c(r,n){var o=e.createRect(t.getBBox(r),"label-text-background");return n&&o.setAttribute("style","fill:"+n+"; stroke:"+n+";"),o}function s(t,r,n,o,i,a){var c={};return c=0===t?e.createText(r,{x:n,y:o},i,a.url,a.id,a.idurl):e.createText(r,{x:n,y:o},i,a.url)}function u(e,t,r){var n=t||e,i=o.getClass(n),a=o.getAggregateClass(n);return i===a?i+r:a+r+i+r}function l(e,n,o,c,l,p){var f=o+(l+.25)*t.calculateTextHeight(),d="";d=u(c.kind,p&&p.kind,"-text "),p&&(p.alignLeft&&(d+="anchor-start "),p.alignAround&&(f=o+(l+.25)*(t.calculateTextHeight()+r.LINE_WIDTH)));var h=s(l,e,n,f,d,c);return i(h,c.textcolor),
a(h,c.url,c.textcolor),h}function p(n,o,i,a){var s=e.createGroup(a);if(n.label){var u=o.x+o.width/2,p=d(n.label,n.kind,o.width,r.FONT_SIZE,i?i.wordWrapArcs:!1),f={};i&&i.alignAbove&&p.forEach(function(){p.push("")});var h=o.y-(p.length-1)/2*(t.calculateTextHeight()+1);i&&i.alignAround&&(1===p.length&&p.push(""),h=o.y-(p.length-1)/2*(t.calculateTextHeight()+r.LINE_WIDTH+1)),p.forEach(function(e,t){""!==e&&(f=l(e,u,h,n,t,i),i&&i.ownBackground&&s.appendChild(c(f,n.textbgcolor)),s.appendChild(f)),h++})}return s}function f(e,t){var r=Math.abs(e),n=12;return 160>=r?r/(t/n*8):320>=r?r/(t/n*6.4):480>=r?r/(t/n*5.9):r/(t/n*5.6)}function d(e,t,r,i,a){return"box"===o.getAggregate(t)||"undefined"==typeof t||a?n.wrap(e,f(r,i)):e.split("\\n")}return{createLabel:p,splitLabel:d}}),r("lib/mscgenjs-core/render/graphics/entities",["./renderlabels","./constants"],function(e,t){"use strict";function r(e){return c[e]}var n=160,o=100,i=34,a={interEntitySpacing:n,height:i,width:o},c={};return{init:function(e){a.interEntitySpacing=n,a.height=i,a.width=o,e&&(a.interEntitySpacing=e*n,a.width=e*o),c={}},getX:r,setX:function(e,t){c[e.name]=t+a.width/2},getOAndD:function(e,t){return{from:r(e),to:r(t)}},setHeight:function(e){a.height=e},getDims:function(){return a},getNoEntityLines:function(r){return e.splitLabel(r,"box",a.width,t.FONT_SIZE).length}}}),r("lib/mscgenjs-core/render/graphics/renderast",["./svgelementfactory","./svglowlevelfactory","./svgutensils","./renderutensils","./renderskeleton","../text/flatten","../text/arcmappings","./swap","./rowmemory","./idmanager","./markermanager","./entities","./renderlabels","./constants","../../lib/lodash/lodash.custom"],function(e,t,r,n,o,i,a,c,s,u,l,p,f,d,h){"use strict";function g(e,t,r,n,o){return m(e,n,r,{source:t,styleAdditions:o})}function m(e,t,n,o){var a=i.flatten(e),c=o||{};c=h.defaults(c,{source:null,styleAdditions:null,mirrorEntitiesOnBottom:!1}),b(a,t,n,c),y(a),v(a);var s=t.document.getElementById(n);return s?r.webkitNamespaceBugWorkaround(s.innerHTML):r.webkitNamespaceBugWorkaround(t.document.body.innerHTML)}function b(e,t,n,i){u.setPrefix(n),J.document=o.bootstrap(t,n,u.get(),l.getMarkerDefs(u.get(),e),i),J.mirrorEntitiesOnBottom=Boolean(i.mirrorEntitiesOnBottom),r.init(J.document),x(J,e.depth),k(J,e.options)}function y(e){N(e.entities),s.clear(p.getDims().height,J.arcRowHeight),B(e.arcs,e.entities),J.mirrorEntitiesOnBottom&&T()}function v(e){var t=_(e);A(J,t),L(e.options,t),j(t)}function x(e,t){w(e.layer,e.document),e.maxDepth=t?t:0}function w(e,t){e.defs=t.getElementById(u.get("__defs")),e.lifeline=t.getElementById(u.get("__lifelinelayer")),e.sequence=t.getElementById(u.get("__sequencelayer")),e.notes=t.getElementById(u.get("__notelayer")),e.inline=t.getElementById(u.get("__arcspanlayer")),e.watermark=t.getElementById(u.get("__watermark"))}function C(e,t){e.arcRowHeight=K,e.arcGradient=Z,e.wordWrapArcs=!1,t&&(t.arcgradient&&(e.arcRowHeight=parseInt(t.arcgradient,10)+K,e.arcGradient=parseInt(t.arcgradient,10)+Z),e.wordWrapArcs=Boolean(t.wordwraparcs))}function k(e,t){p.init(t&&t.hscale),C(e,t)}function _(e){var t=n.determineDepthCorrection(e.depth,d.LINE_WIDTH),r=s.getLast(),o={width:e.entities.length*p.getDims().interEntitySpacing+t,height:Boolean(J.mirrorEntitiesOnBottom)?2*p.getDims().height+r.y+r.height+2*$:r.y+r.height/2+2*$,horizontaltransform:(p.getDims().interEntitySpacing+t-p.getDims().width)/2,autoscale:!!e.options&&!!e.options.width&&"auto"===e.options.width,verticaltransform:$,scale:1};return o.x=0-o.horizontaltransform,o.y=0-o.verticaltransform,o}function A(t,r){var n=e.createRect(r,"bglayer");t.document.getElementById(u.get("__background")).appendChild(n)}function E(t,r){J.layer.watermark.appendChild(e.createDiagonalText(t,r,"watermark"))}function L(e,t){e&&(e.watermark&&E(e.watermark,t),e.width&&"auto"!==e.width&&n.scaleCanvasToWidth(e.width,t))}function j(e){var r=J.document.getElementById(u.get()),n=J.document.getElementById(u.get("__body"));n.setAttribute("transform","translate("+e.horizontaltransform+","+e.verticaltransform+") scale("+e.scale+","+e.scale+")"),e.autoscale&&e.autoscale===!0?t.setAttributes(r,{width:"100%",height:"100%",viewBox:"0 0 "+e.width.toString()+" "+e.height.toString()}):t.setAttributes(r,{width:e.width.toString(),height:e.height.toString()})}function S(e){var t=e[0],n=2;return e.forEach(function(e){var r=p.getNoEntityLines(e.label);r>n&&(n=r,t=e)}),n>2?Math.max(p.getDims().height,r.getBBox(I(t)).height):p.getDims().height}function I(t,r){var n=e.createGroup(u.get(t.name)),o=p.getDims();o.x=r?r:0;var i=f.createLabel(t,{x:o.x,y:o.height/2,width:o.width},{kind:"entity"}),a=e.createRect(o,"entity",t.linecolor,t.textbgcolor);return n.appendChild(a),n.appendChild(i),n}function T(){var t=s.getLast().y+(s.getLast().height+J.arcRowHeight)/2;J.layer.lifeline.appendChild(e.createUse({x:0,y:t},u.get("arcrow"))),J.layer.sequence.appendChild(e.createUse({x:0,y:t+J.arcRowHeight/2},u.get("entities")))}function N(t){var r=0,n=e.createGroup(u.get("entities"));t&&(p.setHeight(S(t)+2*d.LINE_WIDTH),t.forEach(function(e){n.appendChild(I(e,r)),p.setX(e,r),r+=p.getDims().interEntitySpacing}),J.layer.defs.appendChild(n),J.layer.sequence.appendChild(e.createUse({x:0,y:0},u.get("entities")))),J.arcEndX=r-p.getDims().interEntitySpacing+p.getDims().width}function D(t,n,o){var i=!1,c=[];s.set(n),t.forEach(function(e,t){var l=u.get(n.toString()+"_"+t.toString()),h={};switch(a.getAggregate(e.kind)){case"emptyarc":h=M(e,l),i="..."===e.kind,c.push({id:l,layer:J.layer.sequence});break;case"box":h=P(l,p.getOAndD(e.from,e.to),e),c.push({id:l,layer:J.layer.notes});break;case"inline_expression":h=O(l+"_label",e),c.push({id:l+"_label",layer:J.layer.notes}),Q.push({id:l,arc:e,rownum:n});break;default:if(e.from&&e.to){var g=0,m=0;if("*"===e.to){var b=e.label;m=p.getX(e.from),o.forEach(function(t,r){t.name!==e.from&&(g=p.getX(t.name),e.label="",J.layer.defs.appendChild(q(l+"bc"+r,e,m,g)),c.push({id:l+"bc"+r,layer:J.layer.sequence}))}),e.label=b,h=f.createLabel(e,{x:0,y:0,width:J.arcEndX},{alignAround:!0,ownBackground:!0,wordWrapArcs:J.wordWrapArcs},l+"_lbl"),c.push({id:l+"_lbl",layer:J.layer.sequence})}else h=q(l,e,p.getX(e.from),p.getX(e.to)),c.push({id:l,layer:J.layer.sequence})}}h&&(s.set(n,Math.max(s.get(n).height,r.getBBox(h).height+2*d.LINE_WIDTH)),J.layer.defs.appendChild(h))});var l="arcrow_"+n.toString(),h="arcrow";i&&(h="arcrowomit"),J.layer.defs.appendChild(W(o,h,s.get(n).height,u.get(l))),J.layer.lifeline.appendChild(e.createUse({x:0,y:s.get(n).y},u.get(l))),c.forEach(function(t){t.layer.appendChild(e.createUse({x:0,y:s.get(n).y},t.id))})}function B(t,r){if(Q=[],J.layer.defs.appendChild(W(r,u.get("arcrow"))),J.layer.lifeline.appendChild(e.createUse({x:0,y:s.get(-1).y},u.get("arcrow"))),t){for(var n=0;n<t.length;n++)D(t[n],n,r);H(Q)}}function O(t,n){var o={from:p.getX(n.from),to:p.getX(n.to)},i=7;o.from>o.to&&c.swapfromto(o);var a=2*J.maxDepth*d.LINE_WIDTH,s=o.to-o.from+(p.getDims().interEntitySpacing-2*d.LINE_WIDTH)-i-d.LINE_WIDTH,u=o.from-(p.getDims().interEntitySpacing-3*d.LINE_WIDTH-a)/2-2*(J.maxDepth-n.depth)*d.LINE_WIDTH,l=e.createGroup(t);n.label=n.kind+(n.label?": "+n.label:"");var h=f.createLabel(n,{x:u+d.LINE_WIDTH-s/2,y:J.arcRowHeight/4,width:s},{alignLeft:!0,ownBackground:!1,wordWrapArcs:J.wordWrapArcs}),g=r.getBBox(h),m=Math.max(g.height+2*d.LINE_WIDTH,J.arcRowHeight/2-2*d.LINE_WIDTH),b=Math.min(g.width+2*d.LINE_WIDTH,s),y=e.createEdgeRemark({width:b-d.LINE_WIDTH+i,height:m,x:u,y:0},"box inline_expression_label",n.linecolor,n.textbgcolor,i);return l.appendChild(y),l.appendChild(h),l}function H(t){t.forEach(function(t){J.layer.defs.appendChild(R(t)),J.layer.inline.appendChild(e.createUse({x:0,y:s.get(t.rownum).y},t.id))})}function R(e){var t=s.get(e.rownum).y,r=s.get(e.rownum+e.arc.numberofrows+1).y,n=r-t;return e.arc.label="",P(e.id,p.getOAndD(e.arc.from,e.arc.to),e.arc,n)}function W(t,r,n,o){o||(o=r),(!n||n<J.arcRowHeight)&&(n=J.arcRowHeight);var i=e.createGroup(o);return t.forEach(function(t){var o=e.createLine({xFrom:p.getX(t.name),yFrom:0-n/2,xTo:p.getX(t.name),yTo:n/2},r);t.linecolor&&o.setAttribute("style","stroke:"+t.linecolor+";"),i.appendChild(o)}),i}function F(t,r,n,o,i){var c=2*(J.arcRowHeight/5),s=p.getDims().interEntitySpacing/2,f={},h="arc "+a.getAggregateClass(t)+" "+a.getClass(t);if(o){f=e.createGroup();var g=e.createUTurn({x:r,y:c/2},n+c-2*d.LINE_WIDTH,s-2*d.LINE_WIDTH,h,"::"!==t),m=e.createUTurn({x:r,y:c/2},n+c-d.LINE_WIDTH,s),b=e.createUTurn({x:r,y:c/2},n+c,s,h,"::"!==t);Boolean(i)&&g.setAttribute("style","stroke:"+i),l.getAttributes(u.get(),t,i,r,r).forEach(function(e){m.setAttribute(e.name,e.value)}),m.setAttribute("style","stroke:transparent;"),Boolean(i)&&b.setAttribute("style","stroke:"+i),f.appendChild(g),f.appendChild(b),f.appendChild(m),f.setAttribute("class",h)}else f=e.createUTurn({x:r,y:c/2},n+c,s,h,"-x"===t),l.getAttributes(u.get(),t,i,r,r).forEach(function(e){f.setAttribute(e.name,e.value)});return f}function M(e,t){var r={};switch(e.from&&e.to&&p.getX(e.from)>p.getX(e.to)&&c.swapfromto(e),e.kind){case"...":case"|||":r=z(t,e);break;case"---":r=U(t,e)}return r}function G(e){return e.arcskip?e.arcskip*J.arcRowHeight:0}function X(e){return"<:>"===e?"bidi ":"::"===e?"nodi ":""}function q(t,r,o,i){var c=e.createGroup(t),s="arc ";s+=X(r.kind),s+=a.getAggregateClass(r.kind)+" "+a.getClass(r.kind);var h=[":>","::","<:>"].indexOf(r.kind)>-1,g=G(r),m=0===g?J.arcGradient:g;if(i=n.determineArcXTo(r.kind,o,i),o===i){c.appendChild(F(r.kind,o,g,h,r.linecolor));var b=2*p.getDims().interEntitySpacing/3;c.appendChild(f.createLabel(r,{x:o+1.5*d.LINE_WIDTH-b/2,y:0-J.arcRowHeight/5-d.LINE_WIDTH/2,width:b},{alignLeft:!0,alignAbove:!0,ownBackground:!0,wordWrapArcs:J.wordWrapArcs}))}else{var y=e.createLine({xFrom:o,yFrom:0,xTo:i,yTo:m},s,h);l.getAttributes(u.get(),r.kind,r.linecolor,o,i).forEach(function(e){y.setAttribute(e.name,e.value)}),c.appendChild(y),c.appendChild(f.createLabel(r,{x:o,y:0,width:i-o},{alignAround:!0,ownBackground:!0,wordWrapArcs:J.wordWrapArcs}))}return c}function z(t,r){var n=0,o=J.arcEndX,i=e.createGroup(t);return r.from&&r.to&&(n=p.getX(r.from),o=Math.abs(p.getX(r.to)-p.getX(r.from))),i.appendChild(f.createLabel(r,{x:n,y:0,width:o},{ownBackground:!0,wordWrapArcs:J.wordWrapArcs},t+"_lbl")),i}function U(t,r){var n=0,o=J.arcEndX,i="comment",a=e.createGroup(t);if(r.from&&r.to){var c=1*J.maxDepth*d.LINE_WIDTH,s=2*(J.maxDepth-r.depth)*d.LINE_WIDTH;n=p.getX(r.from)-(p.getDims().interEntitySpacing+2*d.LINE_WIDTH)/2-(s-c),o=p.getX(r.to)+(p.getDims().interEntitySpacing+2*d.LINE_WIDTH)/2+(s-c),i="inline_expression_divider"}var u=e.createLine({xFrom:n,yFrom:0,xTo:o,yTo:0},i);return a.appendChild(u),a.appendChild(z(t+"_txt",r)),r.linecolor&&u.setAttribute("style","stroke:"+r.linecolor+";"),a}function P(t,n,o,i){n.from>n.to&&c.swapfromto(n);var a=2*J.maxDepth*d.LINE_WIDTH,s=n.to-n.from+p.getDims().interEntitySpacing-2*d.LINE_WIDTH-a,u=6,l=n.from-(p.getDims().interEntitySpacing-2*d.LINE_WIDTH-a)/2,h=e.createGroup(t),g={},m=f.createLabel(o,{x:l,y:0,width:s}),b=r.getBBox(m),y=i?i:Math.max(b.height+2*d.LINE_WIDTH,J.arcRowHeight-2*d.LINE_WIDTH),v={width:s,height:y,x:l,y:0-y/2};switch(o.kind){case"box":g=e.createRect(v,"box",o.linecolor,o.textbgcolor);break;case"rbox":g=e.createRect(v,"box rbox",o.linecolor,o.textbgcolor,u,u);break;case"abox":v.y=0,g=e.createABox(v,"box abox",o.linecolor,o.textbgcolor);break;case"note":g=e.createNote(v,"box note",o.linecolor,o.textbgcolor);break;default:var x=2*(J.maxDepth-o.depth)*d.LINE_WIDTH;g=e.createRect({width:s+2*x,height:y,x:l-x,y:0},"box inline_expression "+o.kind,o.linecolor,o.textbgcolor)}return h.appendChild(g),h.appendChild(m),h}function V(e,t){J.document=o.init(t),r.init(J.document),r.removeRenderedSVGFromElement(e)}var $=3,K=38,Z=0,J=Object.seal({arcRowHeight:K,arcGradient:Z,arcEndX:0,wordWrapArcs:!1,mirrorEntitiesOnBottom:!1,maxDepth:0,document:{},layer:{defs:{},lifeline:{},sequence:{},notes:{},inline:{},watermark:{}}}),Q=[];return{clean:V,renderAST:g,renderASTNew:m}}),r("utl/exporter",[],function(){"use strict";function e(e,t,r){return e.pathname+"?lang="+r+"&msc="+encodeURIComponent(t)}function t(t,n,o){return e(t,n,o).length<r}var r=4094;return{toLocationString:function(r,n,o){var i="# source too long for an URL";return t(r,n,o)&&(i=n),e(r,i,o)}}}),r("embedding/config",[],function(){"use strict";function e(e,t){Object.getOwnPropertyNames(t).forEach(function(r){e[r]=t[r]})}var t={defaultLanguage:"mscgen",parentElementPrefix:"mscgen_js-parent_",clickable:!1,clickURL:"https://sverweij.github.io/mscgen_js/",loadFromSrcAttribute:!1};return{getConfig:function(){return"undefined"!=typeof mscgen_js_config&&mscgen_js_config&&"object"==typeof mscgen_js_config&&e(t,mscgen_js_config),t}}}),r("utl/tpl",[],function(){"use strict";return{applyTemplate:function(e,t){var r=e;return t&&Object.keys(t).forEach(function(e){r=r.replace(new RegExp("{"+e+"}","g"),t[e])}),r}}}),r("embedding/error-rendering",["../utl/tpl"],function(e){"use strict";function t(e,t){for(var r=e.toString(),n=t-r.length,o=0;n>o;o++)r=" "+r;return r}function r(e,r){return t(r,3)+" "+e}function n(t,r){return t.split("").reduce(function(t,n,i){return i===r?t+e.applyTemplate(s,{"char":o(n)}):t+o(n)},"")}function o(e){return e.replace(/</g,"&lt;")}var i="<pre><div style='color: red'># ERROR on line {line}, column {col} - {message}</div>",a="<pre><div style='color: red'># ERROR {message}</div>",c="<mark>{line}\n</mark>",s="<span style='text-decoration:underline'>{char}</span>";return{formatNumber:t,deHTMLize:o,renderError:function(t,s,u){var l=Boolean(s)?e.applyTemplate(i,{message:u,line:s.start.line,col:s.start.column}):e.applyTemplate(a,{message:u});return t.split("\n").reduce(function(t,i,a){return s&&a===s.start.line-1?t+e.applyTemplate(c,{line:r(n(i,s.start.column-1),a+1)}):t+o(r(i,a+1))+"\n"},l)+"</pre>"}}}),r("utl/domutl",[],function(){"use strict";return{ajax:function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(e){e.target.readyState===XMLHttpRequest.DONE&&(200===n.status?t(e):r(e))},n.open("GET",e),n.responseType="text";try{n.send()}catch(o){r(o)}}}}),t(["lib/mscgenjs-core/parse/xuparser","lib/mscgenjs-core/parse/msgennyparser","lib/mscgenjs-core/render/graphics/renderast","utl/exporter","embedding/config","embedding/error-rendering","utl/domutl","utl/tpl"],function(e,t,r,n,o,i,a,c){"use strict";function s(){u();var e=document.getElementsByClassName("mscgen_js");l(e,0),l(document.getElementsByTagName("mscgen"),e.length)}function u(){for(var e=document.scripts,t=0;t<e.length;t++)A[e[t].type]&&!e[t].hasAttribute("data-renderedby")&&(e[t].insertAdjacentHTML("afterend",c.applyTemplate(w,{src:e[t].src?c.applyTemplate(C,{src:e[t].src}):"",lang:A[e[t].type]||o.getConfig().defaultLanguage,msc:e[t].textContent.replace(/</g,"&lt;"),mirrorEntities:y(e[t])?"data-mirror-entities='true'":""})),e[t].setAttribute("data-renderedby","mscgen_js"))}function l(e,t){for(var r=0;r<e.length;r++)p(e[r],t+r)}function p(e,t){e.hasAttribute("data-renderedby")||d(e,t)}function f(e,t){e.innerHTML=c.applyTemplate("<div style='color: red'>{string}</div>",{string:t})}function d(e,t){m(e,t),e.setAttribute("data-renderedby","mscgen_js"),o.getConfig().loadFromSrcAttribute&&e.getAttribute("data-src")?a.ajax(e.getAttribute("data-src"),function(t){h(e,t.target.response)},function(){f(e,c.applyTemplate(k,{url:e.getAttribute("data-src")}))}):!o.getConfig().loadFromSrcAttribute&&e.getAttribute("data-src")?f(e,c.applyTemplate(_,{url:e.getAttribute("data-src")})):h(e,e.textContent)}function h(e,t){var r=b(e),n=v(t,r);n.entities?x(n,e.id,t,r,y(e)):e.innerHTML=i.renderError(t,n.location,n.message)}function g(e,t,r){var i={pathname:"index.html"},a=document.createElement("a");return a.setAttribute("href",o.getConfig().clickURL+n.toLocationString(i,e,t)),a.setAttribute("id",r+"link"),a.setAttribute("style","text-decoration: none;"),a.setAttribute("title","click to edit in the mscgen_js interpreter"),a}function m(e,t){e.id||(e.id=o.getConfig().parentElementPrefix+t.toString())}function b(e){var t=e.getAttribute("data-language");return t||(t=o.getConfig().defaultLanguage),t}function y(e){var t=e.getAttribute("data-mirror-entities");return t&&"true"===t?!0:!1}function v(r,n){var o={};try{o="msgenny"===n?t.parse(r):"json"===n?JSON.parse(r):e.parse(r)}catch(i){return i}return o}function x(e,t,n,i,a){var c=document.getElementById(t);c.innerHTML="",!0===o.getConfig().clickable&&(c.appendChild(g(n,i,t)),t+="link"),r.clean(t,window),r.renderASTNew(e,window,t,{source:n,mirrorEntitiesOnBottom:a})}var w="<span class='mscgen_js' {src} data-language='{lang}' {mirrorEntities}>{msc}<span>",C="data-src='{src}' ",k="ERROR: Could not find or open the URL '{url}' specified in the <code>data-src</code> attribute.",_="ERROR: Won't load the chart specified in <code>data-src='{url}'</code>, because loading from separate files is switched off in the mscgen_js configuration. <br><br>See <a href='https://sverweij.github.io/mscgen_js/embed.html#loading-from-separate-files'>Loading charts from separate files</a> in the mscgen_js embedding guide how to enable it.",A={"text/x-mscgen":"mscgen","text/x-msgenny":"msgenny","text/x-xu":"xu"};s()}),r("mscgen-inpage",function(){})}();